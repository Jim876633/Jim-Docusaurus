"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9288],{6217:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>h,contentTitle:()=>o,default:()=>m,frontMatter:()=>l,metadata:()=>j,toc:()=>p});var t=n(5893),i=n(1151),r=n(5397);const c=n.p+"assets/images/day27-1-166dbe149018767ac61d35924f98a1ce.jpg",a=n.p+"assets/images/day27-2-46e4f7fb38065f5cdc288f1712efbf92.jpg",d=n.p+"assets/images/day27-3-4c4f4babd773bb81c9f535952472d034.jpg",l={title:"[Day 27] \u5acc Jest \u592a\u6162\uff1f\u4f86\u770b\u770b SWC \u8ddf Vitest \u5427\uff01",tags:["ITHome 2023"]},o=void 0,j={id:"ITHome2023/day27",title:"[Day 27] \u5acc Jest \u592a\u6162\uff1f\u4f86\u770b\u770b SWC \u8ddf Vitest \u5427\uff01",description:"\u5728\u6211\u5011\u524d\u9762\u5728\u5be6\u4f5c\u6e2c\u8a66\u7684\u6642\u5019\uff0c\u4e0d\u77e5\u9053\u5927\u5bb6\u6709\u6c92\u6709\u89ba\u5f97 Jest \u8dd1\u6e2c\u8a66\u597d\u50cf\u6709\u9ede\u6162\u6b38\uff5e\u96d6\u7136\u516c\u8a8d Jest \u8dd1\u6e2c\u8a66\u7684\u901f\u5ea6\u6bd4 Mocha \u8ddf Karma \u9084\u8981\u5feb\uff0c\u4f46\u662f\u5728\u8dd1 React \u6e2c\u8a66\u7684\u6642\u5019\uff0c\u9084\u662f\u6703\u89ba\u5f97\u6709\u9ede\u6162\uff0c\u5c24\u5176\u662f\u5728\u4f60\u7684\u5c08\u6848\u8d8a\u5927\u7684\u6642\u5019\uff0c\u6e2c\u8a66\u7684\u6642\u9593\u5c31\u6703\u8d8a\u9577\uff0c\u90a3\u6709\u6c92\u6709\u4ec0\u9ebc\u65b9\u6cd5\u53ef\u4ee5\u8b93\u6e2c\u8a66\u7684\u901f\u5ea6\u8b8a\u5feb\u4e00\u9ede\u5462\uff1f",source:"@site/docs/ITHome2023/day27.mdx",sourceDirName:"ITHome2023",slug:"/ITHome2023/day27",permalink:"/en/ITHome2023/day27",draft:!1,unlisted:!1,tags:[{label:"ITHome 2023",permalink:"/en/tags/it-home-2023"}],version:"current",lastUpdatedAt:1699970253,formattedLastUpdatedAt:"Nov 14, 2023",frontMatter:{title:"[Day 27] \u5acc Jest \u592a\u6162\uff1f\u4f86\u770b\u770b SWC \u8ddf Vitest \u5427\uff01",tags:["ITHome 2023"]},sidebar:"tutorialSidebar",previous:{title:"[Day 26] Copilot Chat \u6e2c\u8a66\u5fc3\u5f97",permalink:"/en/ITHome2023/day26"},next:{title:"[Day 28] \u6e2c\u8a66\u5b88\u5247\uff1a\u5982\u4f55\u8b93\u6e2c\u8a66\u66f4\u6709\u898f\u7bc4",permalink:"/en/ITHome2023/day28"}},h={},p=[{value:"SWC",id:"swc",level:2},{value:"Vitest",id:"vitest",level:2}];function x(e){const s={a:"a",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.p,{children:"\u5728\u6211\u5011\u524d\u9762\u5728\u5be6\u4f5c\u6e2c\u8a66\u7684\u6642\u5019\uff0c\u4e0d\u77e5\u9053\u5927\u5bb6\u6709\u6c92\u6709\u89ba\u5f97 Jest \u8dd1\u6e2c\u8a66\u597d\u50cf\u6709\u9ede\u6162\u6b38\uff5e\u96d6\u7136\u516c\u8a8d Jest \u8dd1\u6e2c\u8a66\u7684\u901f\u5ea6\u6bd4 Mocha \u8ddf Karma \u9084\u8981\u5feb\uff0c\u4f46\u662f\u5728\u8dd1 React \u6e2c\u8a66\u7684\u6642\u5019\uff0c\u9084\u662f\u6703\u89ba\u5f97\u6709\u9ede\u6162\uff0c\u5c24\u5176\u662f\u5728\u4f60\u7684\u5c08\u6848\u8d8a\u5927\u7684\u6642\u5019\uff0c\u6e2c\u8a66\u7684\u6642\u9593\u5c31\u6703\u8d8a\u9577\uff0c\u90a3\u6709\u6c92\u6709\u4ec0\u9ebc\u65b9\u6cd5\u53ef\u4ee5\u8b93\u6e2c\u8a66\u7684\u901f\u5ea6\u8b8a\u5feb\u4e00\u9ede\u5462\uff1f"}),"\n",(0,t.jsx)(s.h2,{id:"swc",children:"SWC"}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"https://swc.rs/",children:"SWC"})," \u662f\u4e00\u500b\u57fa\u65bc Rust \u7684\u6253\u5305\u7de8\u8b6f\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u4f86\u53d6\u4ee3 Babel\uff0c\u4e26\u4e14\u53ef\u4ee5\u66f4\u5feb\u901f\u7684\u7de8\u8b6f\u7a0b\u5f0f\u78bc\uff0c\u800c SWC \u4e5f\u6709\u63d0\u4f9b ",(0,t.jsx)(s.a,{href:"https://www.npmjs.com/package/@swc/jest",children:"@swc/jest"})," \u9019\u500b\u5957\u4ef6\uff0c\u53ef\u4ee5\u8b93\u6211\u5011\u5728 Jest \u4e2d\u4f7f\u7528 SWC \u4f86\u53d6\u4ee3 Babel\u3002"]}),"\n",(0,t.jsx)(s.p,{children:"\u5b89\u88dd\u5957\u4ef6\uff1a"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"npm i -D jest @swc/core @swc/jest\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u63a5\u8457\u5728 Jest \u7684\u8a2d\u5b9a\u6a94\u4e2d\u628a\u539f\u672c\u7684 ",(0,t.jsx)(s.code,{children:"babel-jest"})," \u66ff\u63db\u6210 ",(0,t.jsx)(s.code,{children:"@swc/jest"}),"\uff1a"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "transform": {\n    "^.+\\\\.(js|jsx|ts|tsx)$": "@swc/jest"\n  }\n}\n'})}),"\n",(0,t.jsxs)(s.p,{children:["\u5982\u679c\u662f\u4f7f\u7528 React \u9084\u9700\u8981\u52a0\u4e0a ",(0,t.jsx)(s.code,{children:"react"})," \u7684\u8a2d\u5b9a\uff1a"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "transform": {\n    "^.+\\\\.(js|jsx|ts|tsx)$": [\n      "@swc/jest",\n      {\n        "jsc": {\n          "transform": {\n            "react": {\n              "runtime": "automatic"\n            }\n          }\n        }\n      }\n    ]\n  }\n}\n'})}),"\n",(0,t.jsx)(s.p,{children:"\u8b93\u6211\u5011\u4f86\u5be6\u969b\u8dd1\u6e2c\u8a66\u770b\u770b\u5feb\u4e86\u591a\u5c11\uff0c\u5148\u4f86\u770b\u770b\u539f\u672c\u7684\u6e2c\u8a66\u901f\u5ea6\uff1a"}),"\n",(0,t.jsx)(r.E,{src:c}),"\n",(0,t.jsx)(s.p,{children:"\u800c\u4f7f\u7528 SWC \u4e4b\u5f8c\u7684\u6e2c\u8a66\u901f\u5ea6\uff1a"}),"\n",(0,t.jsx)(r.E,{src:a}),"\n",(0,t.jsx)(s.p,{children:"\u5e73\u5747\u6e2c\u8a66\u4e0b\u4f86\u5927\u6982\u5feb\u4e86 1 \u79d2\u5de6\u53f3\uff0cSWC \u7684\u5b98\u7db2\u8072\u7a31\u5728\u55ae\u57f7\u884c\u7dd2\u4e0a\u6bd4 Babel \u5feb 20 \u500d\uff0c\u800c\u5728\u56db\u6838\u5fc3\u4e0a\u6bd4 Babel \u5feb\u4e0a 70 \u500d\uff0c\u4e0d\u904e\u4e0d\u78ba\u5b9a\u662f\u4e0d\u662f\u5728\u6e2c\u8a66\u4e0a\u662f\u5426\u4e5f\u662f\u9019\u6a23\uff0c\u7562\u7adf SWC \u4e5f\u53ea\u662f\u7bc0\u7701\u4e86\u7de8\u8b6f\u7684\u6642\u9593\uff0c\u5728\u8dd1\u6e2c\u8a66\u4e0a\u770b\u8d77\u4f86\u9084\u662f\u4f7f\u7528 Jest\uff0c\u4e0d\u904e\u5be6\u6e2c\u4e0b\u4f86\u7684\u78ba\u662f\u6709\u63d0\u5347\u8dd1\u6e2c\u8a66\u7684\u901f\u5ea6\u7684\uff01"}),"\n",(0,t.jsx)(s.h2,{id:"vitest",children:"Vitest"}),"\n",(0,t.jsx)(s.p,{children:"Vitest \u5982\u540c Vite \u4e00\u6a23\u662f\u4f7f\u7528 esbuild \u4f86\u9032\u884c\u6253\u5305\u7de8\u8b6f\uff0c\u5982\u679c\u6709\u7528\u904e Vite \u5c31\u77e5\u9053\u4ed6\u6709\u591a\u5feb\uff0c\u800c Vitest \u642d\u914d Vite \u53ef\u4ee5\u66f4\u65b9\u4fbf\u4f86\u9032\u884c\u8a2d\u7f6e\u3002"}),"\n",(0,t.jsx)(s.p,{children:"\u5b89\u88dd\u5957\u4ef6\uff1a"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"npm i -D vitest\n"})}),"\n",(0,t.jsxs)(s.p,{children:["\u5728 package.json \u4e2d\u628a\u6e2c\u8a66\u6846\u67b6 ",(0,t.jsx)(s.code,{children:"jest"})," \u6539\u6210 ",(0,t.jsx)(s.code,{children:"vitest"}),"\uff0c\u518d\u628a\u539f\u672c Jest \u7684\u8a2d\u5b9a\u90fd\u62ff\u6389\uff1a"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "scripts": {\n    "test": "vitest"\n  }\n}\n'})}),"\n",(0,t.jsxs)(s.p,{children:["\u63a5\u8457\u5982\u679c\u4f7f\u7528 Vite \u7684\u8a71\uff0c\u8981\u5728 ",(0,t.jsx)(s.code,{children:"vite.config.js"})," \u4e2d\u52a0\u4e0a\u7b2c\u4e00\u884c\u7684\u8a2d\u5b9a\uff1a"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:'/// <reference types="vitest" />\nimport { defineConfig } from "vite";\n\nexport default defineConfig({\n  test: {\n    // ...\n  },\n});\n'})}),"\n",(0,t.jsxs)(s.p,{children:["\u7136\u5f8c\u539f\u672c\u7684 ",(0,t.jsx)(s.code,{children:"setupTests.ts"})," \u5c31\u53ef\u4ee5\u52a0\u5728 ",(0,t.jsx)(s.code,{children:"vite.config.js"})," \u4e2d\u7684 test \u88e1\uff1a"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:'/// <reference types="vitest" />\nimport { defineConfig } from "vite";\n\nexport default defineConfig({\n  // \u6e2c\u8a66\u8a2d\u5b9a\n  test: {\n    globals: true,\n    environment: "jsdom",\n    setupFiles: ["./setupTests.ts"],\n  },\n});\n'})}),"\n",(0,t.jsxs)(s.p,{children:["\u518d\u4f86\u5982\u679c\u6709\u4f7f\u7528 @testing-library/jest-dom \u7684\u8a71\uff0c\u5728 ",(0,t.jsx)(s.code,{children:"setupTests.ts"})," \u5f15\u5165\u6642\u8981\u6539\u6210\uff1a"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-ts",children:'import "@testing-library/jest-dom/vitest";\n'})}),"\n",(0,t.jsxs)(s.p,{children:["\u4f7f\u7528 TypeScript \u7684\u8a71\uff0c\u9700\u8981\u5728 ",(0,t.jsx)(s.code,{children:"tsconfig.json"})," \u4e2d\u52a0\u5165\uff1a"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "types": ["vitest/globals", "@testing-library/jest-dom/vitest"]\n  }\n}\n'})}),"\n",(0,t.jsxs)(s.p,{children:["\u63a5\u8457\u5728\u6839\u64da\u5b98\u7db2 ",(0,t.jsx)(s.a,{href:"https://vitest.dev/guide/migration.html",children:"Migration Guide"})," \u7684\u6307\u793a\uff0c\u628a\u4e00\u4e9b jest \u7684\u8a9e\u6cd5\u6539\u6210 vitest \u7684\u8a9e\u6cd5\uff0c\u5c31\u5927\u529f\u544a\u6210\u4e86\uff01"]}),"\n",(0,t.jsx)(s.p,{children:"\u8b93\u6211\u5011\u5be6\u969b\u8dd1\u4e00\u6b21 Vitest \u7684\u6e2c\u8a66\uff1a"}),"\n",(0,t.jsx)(r.E,{src:d}),"\n",(0,t.jsx)(s.p,{children:"\u53ef\u4ee5\u770b\u5230\u53c8\u6bd4 SWC \u5feb\u4e86\u4e00\u79d2\u591a\uff0c\u4e5f\u5c31\u662f\u8aaa\u6bd4 Jest \u5feb\u4e86\u5169\u79d2\u591a\uff01\u662f\u4e0d\u662f\u7b49\u4e0d\u53ca\u628a Jest \u63db\u6389\u5566\uff0c\u800c\u4e14\u7576\u5c08\u6848\u8d8a\u5927\u8d8a\u80fd\u660e\u986f\u770b\u51fa\u4ed6\u5011\u7684\u5dee\u7570\u3002"}),"\n",(0,t.jsx)(s.p,{children:"\u4e0d\u904e Vitest \u7562\u7adf\u9084\u662f\u6bd4\u8f03\u65b0\u7684\u5de5\u5177\uff0c\u793e\u7fa4\u4e0a\u7576\u7136\u662f\u6bd4\u4e0d\u904e\u6b77\u53f2\u60a0\u4e45\u7684 Jest\uff0c\u800c\u4e14\u6709\u4e9b\u8a9e\u6cd5\u9084\u4e0d\u5b8c\u5168\u652f\u63f4 Jest\uff0c\u4f46\u662f\u6211\u975e\u5e38\u770b\u597d Vitest \u7684\u767c\u5c55\uff0c\u901f\u5ea6\u5feb\u7528\u8d77\u4f86\u5c31\u662f\u8212\u670d\u554a\uff5e"}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.p,{children:"\u9019\u4e00\u7bc7\u8a66\u8457\u628a Jest \u63db\u6210 SWC \u8ddf Vitest \u4f86\u8dd1\u6e2c\u8a66\uff0c\u53ef\u4ee5\u770b\u5230\u901f\u5ea6\u4e0a\u7684\u78ba\u6709\u63d0\u5347\uff0c\u800c\u4e14\u5be6\u969b\u628a Jest \u66ff\u63db\u6389\u4e26\u4e0d\u6703\u8017\u8cbb\u5f88\u5927\u7684\u529f\u592b\uff0c\u6240\u4ee5\u5982\u679c\u4f60\u89ba\u5f97 Jest \u8dd1\u6e2c\u8a66\u592a\u6162\u7684\u8a71\uff0c\u53ef\u4ee5\u8003\u616e\u4f7f\u7528 SWC \u6216\u662f Vitest \u4f86\u53d6\u4ee3 Jest\uff01"}),"\n",(0,t.jsx)(s.p,{children:"\u66ff\u63db\u7684\u904e\u7a0b\u53ef\u4ee5\u53c3\u8003\uff1a"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/Jim876633/ithome-2023/commit/9b51fe2f9f72a22ed590d0151dd1d162d73c95b7",children:"SWC"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.a,{href:"https://github.com/Jim876633/ithome-2023/commit/3eb26270d53a87eb21f149923983aa65e120599b",children:"Vitest"})}),"\n"]})]})}function m(e={}){const{wrapper:s}={...(0,i.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(x,{...e})}):x(e)}},5397:(e,s,n)=>{n.d(s,{E:()=>i});n(7294);var t=n(5893);const i=e=>{let{src:s,width:n="100%",center:i=!1,style:r={}}=e;const c={width:`min(100%,${n})`,display:i?"block":"inline-block",margin:i?"0 auto":"0",borderRadius:"5px",...r};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("img",{src:s,style:{...c}}),(0,t.jsx)("br",{}),(0,t.jsx)("br",{})]})}},1151:(e,s,n)=>{n.d(s,{Z:()=>a,a:()=>c});var t=n(7294);const i={},r=t.createContext(i);function c(e){const s=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),t.createElement(r.Provider,{value:s},e.children)}}}]);