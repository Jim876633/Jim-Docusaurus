"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8353],{775:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>p,contentTitle:()=>d,default:()=>g,frontMatter:()=>a,metadata:()=>o,toc:()=>j});var n=s(5893),i=s(1151),r=s(5397);const c=s.p+"assets/images/vite-react-vitest-1-8c8d857f714e35572d06e1678d9919e9.png",l=s.p+"assets/images/vite-react-vitest-2-cf534225d1d55b79221e300e45b9c3ec.png",a={title:"\u3010Unit Test\u3011\u4f7f\u7528 Vite + Vitest \u9032\u884c React \u6e2c\u8a66",sidebar_label:"\u4f7f\u7528 Vite + Vitest \u9032\u884c React \u6e2c\u8a66",tags:["Unit Test","Vite","Vitest","React"]},d=void 0,o={id:"Unit test/vite-react-vitest",title:"\u3010Unit Test\u3011\u4f7f\u7528 Vite + Vitest \u9032\u884c React \u6e2c\u8a66",description:"React + Vitest",source:"@site/docs/Unit test/vite-react-vitest.mdx",sourceDirName:"Unit test",slug:"/Unit test/vite-react-vitest",permalink:"/en/Unit test/vite-react-vitest",draft:!1,unlisted:!1,tags:[{label:"Unit Test",permalink:"/en/tags/unit-test"},{label:"Vite",permalink:"/en/tags/vite"},{label:"Vitest",permalink:"/en/tags/vitest"},{label:"React",permalink:"/en/tags/react"}],version:"current",lastUpdatedAt:1699945574,formattedLastUpdatedAt:"Nov 14, 2023",frontMatter:{title:"\u3010Unit Test\u3011\u4f7f\u7528 Vite + Vitest \u9032\u884c React \u6e2c\u8a66",sidebar_label:"\u4f7f\u7528 Vite + Vitest \u9032\u884c React \u6e2c\u8a66",tags:["Unit Test","Vite","Vitest","React"]},sidebar:"tutorialSidebar",previous:{title:"\u6e2c\u8a66\u5206\u985e\u53ca\u524d\u7aef\u6e2c\u8a66\u5de5\u5177\u4ecb\u7d39",permalink:"/en/Unit test/intro"},next:{title:"Other",permalink:"/en/category/other"}},p={},j=[{value:"React + Vitest",id:"react--vitest",level:2},{value:"JavaScript",id:"javascript",level:3},{value:"TypeScript",id:"typescript",level:3},{value:"React testing library",id:"react-testing-library",level:2},{value:"JavaScript",id:"javascript-1",level:3},{value:"TypeScript",id:"typescript-1",level:3},{value:"\u53c3\u8003\u8cc7\u6599",id:"\u53c3\u8003\u8cc7\u6599",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"react--vitest",children:"React + Vitest"}),"\n",(0,n.jsx)(t.p,{children:"\u9996\u5148\u5148\u4e0b\u8f09 Vite + React \u7684\u5c08\u6848"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npm create vite@latest\n"})}),"\n",(0,n.jsx)(t.p,{children:"\u9019\u908a\u6703\u6709\u5169\u500b\u554f\u7b54\u7684\u9078\u9805\uff0c\u6211\u9019\u908a\u9078\u64c7 React + TypeScript + SWC"}),"\n",(0,n.jsx)(r.E,{src:c,width:"400px"}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"https://swc.rs/",children:"SWC"})," \u662f\u4e00\u500b\u7528 Rust \u958b\u767c\u7684 JavaScript / TypeScript \u7de8\u8b6f\u5668\uff0c\u6253\u5305\u901f\u5ea6\u6bd4 Babel \u9084\u5feb\uff0c\u73fe\u5728 Next.js \u53ca Vite \u90fd\u6709\u652f\u63f4 SWC"]})}),"\n",(0,n.jsxs)(t.p,{children:["\u518d\u4f86\u5b89\u88dd ",(0,n.jsx)(t.a,{href:"https://vitest.dev/",children:"Vitest"})]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npm i -D vitest\n"})}),"\n",(0,n.jsxs)(t.p,{children:["\u5728 ",(0,n.jsx)(t.em,{children:"package.json"})," \u52a0\u5165 test script"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",metastring:"title='package.json'",children:'{\n  "scripts": {\n    "test": "vitest"\n  }\n}\n'})}),"\n",(0,n.jsxs)(t.p,{children:["\u63a5\u8457\u5728 ",(0,n.jsx)(t.em,{children:"vite.config.ts"})," \u4e2d\u52a0\u5165 reference \u8ddf test \u7684\u8a2d\u5b9a\uff0c\u8a2d\u5b9a globals \u70ba true\uff0c\u9019\u6a23\u5c31\u53ef\u4ee5\u5728\u5168\u57df\u4f7f\u7528 ",(0,n.jsx)(t.code,{children:"describe"}),"\u3001",(0,n.jsx)(t.code,{children:"it"}),"\u3001",(0,n.jsx)(t.code,{children:"expect"})," \u7b49\u65b9\u6cd5\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:"{1,7-9} title='vite.config.ts'",children:'/// <reference types="vitest" />\nimport { defineConfig } from "vite";\nimport react from "@vitejs/plugin-react-swc";\n\nexport default defineConfig({\n  plugins: [react()],\n  test: {\n    globals: true,\n  },\n});\n'})}),"\n",(0,n.jsx)(t.h3,{id:"javascript",children:"JavaScript"}),"\n",(0,n.jsx)(r.E,{src:l,width:"500px"}),"\n",(0,n.jsxs)(t.p,{children:["\u8a2d\u7f6e\u5b8c\u5f8c\u5982\u679c\u4f7f\u7528 ",(0,n.jsx)(t.strong,{children:"JavaScript"})," \u53ef\u80fd\u6703\u767c\u73fe\u6703\u5831 eslint \u7684\u932f\uff0c\u5982\u4e0a\u5716\uff0c\u4f46\u662f\u8dd1\u6e2c\u8a66\u662f\u6c92\u554f\u984c\u7684\uff0c\u9019\u662f\u56e0\u70ba eslint \u6c92\u6709\u52a0\u5165 vitest \u7684 config\uff0c\u6240\u4ee5\u6703\u5831\u932f\uff0c\u9700\u8981\u4e0b\u8f09 ",(0,n.jsx)(t.a,{href:"https://www.npmjs.com/package/eslint-plugin-vitest",children:"eslint-plugin-vitest"})," \u4f86\u89e3\u6c7a\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npm i -D eslint-plugin-vitest\n"})}),"\n",(0,n.jsxs)(t.p,{children:["\u7136\u5f8c\u5728 eslint \u7684\u8a2d\u5b9a\u6a94\u4e2d\u8a2d\u5b9a env \u53ca\u52a0\u5165 ",(0,n.jsx)(t.code,{children:"plugin:vitest/globals"}),"\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:"{2,8} title='.eslintrc.cjs'",children:'module.exports = {\n  env: { browser: true, es2021: true, "vitest/env": true },\n  extends: [\n    "eslint:recommended",\n    "plugin:react/recommended",\n    "plugin:react/jsx-runtime",\n    "plugin:react-hooks/recommended",\n    "plugin:vitest/recommended",\n  ],\n};\n'})}),"\n",(0,n.jsx)(t.h3,{id:"typescript",children:"TypeScript"}),"\n",(0,n.jsxs)(t.p,{children:["\u5982\u679c\u4f7f\u7528 ",(0,n.jsx)(t.strong,{children:"TypeScript"})," \u7684\u8a71\uff0c\u5247\u9700\u8981\u5728 ",(0,n.jsx)(t.em,{children:"tsconfig.json"})," \u4e2d\u52a0\u5165 types\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",metastring:"{3} title='tsconfig.json'",children:'{\n  "compilerOptions": {\n    "types": ["vitest/globals"]\n  }\n}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"react-testing-library",children:"React testing library"}),"\n",(0,n.jsxs)(t.p,{children:["\u4f7f\u7528 React \u9032\u884c\u6e2c\u8a66\u8ddf Jest \u4e00\u6a23\u52a0\u5165\u4e09\u500b\u57fa\u672c\u7684 ",(0,n.jsx)(t.strong,{children:"testing-library"})," \u4ee5\u53ca\u6e2c\u8a66\u74b0\u5883 ",(0,n.jsx)(t.strong,{children:"jsdom"}),"\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"npm i -D @testing-library/react @testing-library/jest-dom @testing-library/user-event jsdom\n"})}),"\n",(0,n.jsx)(t.h3,{id:"javascript-1",children:"JavaScript"}),"\n",(0,n.jsxs)(t.p,{children:["\u5efa\u7acb\u4e00\u500b ",(0,n.jsx)(t.em,{children:"./tests/setup.js"})," \u6a94\u6848\u628a ",(0,n.jsx)(t.em,{children:"@testing-library/jest-dom"})," \u5957\u4ef6\u5f15\u5165\uff0c\u5c31\u53ef\u4ee5\u5728\u5168\u57df\u4e2d\u4f7f\u7528 jest-dom \u7684\u64f4\u5145\u8a9e\u6cd5\u3002"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:"title='./tests/setup.js'",children:'import "@testing-library/jest-dom";\n'})}),"\n",(0,n.jsxs)(t.p,{children:["\u63a5\u8457\u5728 ",(0,n.jsx)(t.em,{children:"vite.config.js"})," \u52a0\u5165\u74b0\u5883\u53ca ",(0,n.jsx)(t.code,{children:"setupFile"})," \u8def\u5f91"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:"{9-10} title='vite.config.js'",children:'/// <reference types="vitest" />\nimport { defineConfig } from "vite";\nimport react from "@vitejs/plugin-react-swc";\n\nexport default defineConfig({\n  plugins: [react()],\n  test: {\n    globals: true,\n    environment: "jsdom",\n    setupFiles: "./tests/setup.js",\n  },\n});\n'})}),"\n",(0,n.jsx)(t.h3,{id:"typescript-1",children:"TypeScript"}),"\n",(0,n.jsxs)(t.p,{children:["\u5728 ",(0,n.jsx)(t.strong,{children:"TypeScript"})," \u56e0\u70ba\u6700\u8fd1 ",(0,n.jsx)(t.em,{children:"@testing-library/jest-dom"})," \u6709\u9032\u884c",(0,n.jsx)(t.a,{href:"https://github.com/testing-library/jest-dom/releases/tag/v6.0.0",children:"\u66f4\u7248"}),"\uff0c\u628a type \u578b\u5225\u62c9\u51fa\u53bb\u4e86\uff0c\u6240\u4ee5 ",(0,n.jsx)(t.em,{children:"jest-dom"})," \u5f15\u5165\u7684\u65b9\u5f0f\u8981\u6539\u6210"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-js",metastring:"title='./tests/setup.ts'",children:'import "@testing-library/jest-dom/vitest";\n'})}),"\n",(0,n.jsxs)(t.p,{children:["\u7136\u5f8c\u5728 ",(0,n.jsx)(t.em,{children:"tsconfig.json"})," \u628a ",(0,n.jsx)(t.em,{children:"@testing-library/jest-dom/vitest"})," \u52a0\u5165 types"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",metastring:"title='tsconfig.json'",children:'{\n  "compilerOptions": {\n    "types": ["vitest/globals", "@testing-library/jest-dom/vitest"]\n  }\n}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"\u53c3\u8003\u8cc7\u6599",children:"\u53c3\u8003\u8cc7\u6599"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://www.robinwieruch.de/vitest-react-testing-library/",children:"Vitest with React Testing Library"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://pjchender.dev/npm/note-vite-vitest/",children:"note-vite-vitest"})}),"\n"]})]})}function g(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},5397:(e,t,s)=>{s.d(t,{E:()=>i});s(7294);var n=s(5893);const i=e=>{let{src:t,width:s="100%",center:i=!1,style:r={}}=e;const c={width:`min(100%,${s})`,display:i?"block":"inline-block",margin:i?"0 auto":"0",borderRadius:"5px",...r};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{src:t,style:{...c}}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]})}},1151:(e,t,s)=>{s.d(t,{Z:()=>l,a:()=>c});var n=s(7294);const i={},r=n.createContext(i);function c(e){const t=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),n.createElement(r.Provider,{value:t},e.children)}}}]);