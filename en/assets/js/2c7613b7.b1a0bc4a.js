"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2501],{3905:(e,t,n)=>{n.d(t,{Zo:()=>s,kt:()=>d});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)n=l[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=r.createContext({}),u=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=u(e.components);return r.createElement(p.Provider,{value:t},e.children)},m="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},k=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,p=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),m=u(n),k=a,d=m["".concat(p,".").concat(k)]||m[k]||c[k]||l;return n?r.createElement(d,i(i({ref:t},s),{},{components:n})):r.createElement(d,i({ref:t},s))}));function d(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,i=new Array(l);i[0]=k;var o={};for(var p in t)hasOwnProperty.call(t,p)&&(o[p]=t[p]);o.originalType=e,o[m]="string"==typeof e?e:a,i[1]=o;for(var u=2;u<l;u++)i[u]=n[u];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}k.displayName="MDXCreateElement"},9821:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>o,toc:()=>u});var r=n(7462),a=(n(7294),n(3905));const l={title:"[Day 06] React Testing Library \u8a9e\u6cd5\u4ecb\u7d39",tags:["ITHome 2023"]},i=void 0,o={unversionedId:"ITHome2023/day06",id:"ITHome2023/day06",title:"[Day 06] React Testing Library \u8a9e\u6cd5\u4ecb\u7d39",description:"\u524d\u9762\u63d0\u5230 Jest \u672c\u8eab\u6709\u63d0\u4f9b\u5f88\u591a\u6e2c\u8a66\u65b9\u6cd5\uff0c\u4f46\u5728\u6e2c\u8a66\u4e0a\u90fd\u6bd4\u8f03\u504f\u5411\u908f\u8f2f\u6e2c\u8a66\uff0c\u50cf\u662f a + b \u662f\u5426\u7b49\u65bc c\u3002\u800c\u5be6\u969b\u4e0a\u6211\u5011\u6240\u9700\u8981\u7684\u6e2c\u8a66\u6709\u4e00\u5927\u90e8\u5206\u4e5f\u5305\u542b UI \u7684\u6e2c\u8a66\uff0c\u50cf\u662f\u756b\u9762\u4e0a\u6709\u6c92\u986f\u793a\u6b63\u78ba\u6587\u5b57\uff0c\u6216\u662f\u4f7f\u7528\u8005\u9ede\u64ca\u6709\u6c92\u6709\u8df3\u51fa\u8996\u7a97\u7b49\u7b49\uff0c\u9019\u6642\u5019\u5c31\u9700\u8981\u4f7f\u7528 Testing Library \u3002",source:"@site/docs/ITHome2023/day06.mdx",sourceDirName:"ITHome2023",slug:"/ITHome2023/day06",permalink:"/Jim-Docusaurus/en/ITHome2023/day06",draft:!1,tags:[{label:"ITHome 2023",permalink:"/Jim-Docusaurus/en/tags/it-home-2023"}],version:"current",lastUpdatedAt:1699334004,formattedLastUpdatedAt:"Nov 7, 2023",frontMatter:{title:"[Day 06] React Testing Library \u8a9e\u6cd5\u4ecb\u7d39",tags:["ITHome 2023"]},sidebar:"tutorialSidebar",previous:{title:"[Day 05] React \u6e2c\u8a66\u5b89\u88dd\u4ecb\u7d39 ( CRA / Vite / Next.js )",permalink:"/Jim-Docusaurus/en/ITHome2023/day05"},next:{title:"[Day 07] \u5beb\u6e2c\u8a66 AI \u5de5\u5177\u63a8\u85a6",permalink:"/Jim-Docusaurus/en/ITHome2023/day07"}},p={},u=[{value:"Testing Library For React",id:"testing-library-for-react",level:2},{value:"\ud83d\udccc @testing-library/react",id:"-testing-libraryreact",level:3},{value:"\ud83d\udccc @testing-library/jest-dom",id:"-testing-libraryjest-dom",level:3},{value:"\ud83d\udccc @testing-library/user-event",id:"-testing-libraryuser-event",level:3}],s={toc:u};function m(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},s,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"\u524d\u9762\u63d0\u5230 Jest \u672c\u8eab\u6709\u63d0\u4f9b\u5f88\u591a\u6e2c\u8a66\u65b9\u6cd5\uff0c\u4f46\u5728\u6e2c\u8a66\u4e0a\u90fd\u6bd4\u8f03\u504f\u5411\u908f\u8f2f\u6e2c\u8a66\uff0c\u50cf\u662f a + b \u662f\u5426\u7b49\u65bc c\u3002\u800c\u5be6\u969b\u4e0a\u6211\u5011\u6240\u9700\u8981\u7684\u6e2c\u8a66\u6709\u4e00\u5927\u90e8\u5206\u4e5f\u5305\u542b UI \u7684\u6e2c\u8a66\uff0c\u50cf\u662f\u756b\u9762\u4e0a\u6709\u6c92\u986f\u793a\u6b63\u78ba\u6587\u5b57\uff0c\u6216\u662f\u4f7f\u7528\u8005\u9ede\u64ca\u6709\u6c92\u6709\u8df3\u51fa\u8996\u7a97\u7b49\u7b49\uff0c\u9019\u6642\u5019\u5c31\u9700\u8981\u4f7f\u7528 Testing Library \u3002"),(0,a.kt)("p",null,"Testing Library ",(0,a.kt)("a",{parentName:"p",href:"https://testing-library.com/docs/"},"\u6587\u6a94\u4ecb\u7d39"),"\u958b\u982d\u5c31\u5f88\u660e\u78ba\u7684\u8aaa\u4e86"),(0,a.kt)("blockquote",null,(0,a.kt)("p",{parentName:"blockquote"},"The @testing-library family of packages helps you test UI components in a user-centric way.")),(0,a.kt)("p",null,"\u4e5f\u5c31\u662f @testing-library \u7cfb\u5217\u7684\u5957\u4ef6\u53ef\u4ee5\u5e6b\u52a9\u4f60\u4ee5\u7528\u6236\u70ba\u4e2d\u5fc3\u7684\u65b9\u5f0f\u6e2c\u8a66 UI \u5143\u4ef6\u3002"),(0,a.kt)("p",null,"Testing Library \u4e0d\u53ea\u63d0\u4f9b\u53ef\u4ee5\u5171\u901a\u4f7f\u7528\u7684\u6e2c\u8a66\u5957\u4ef6\uff0c\u9084\u6709\u5c08\u70ba\u5404\u500b\u6846\u67b6\u6240\u51fa\u7684\u5957\u4ef6\uff0c\u57fa\u672c\u7684\u4e09\u5927\u6846\u67b6 React\u3001Vue\u3001Angular \u90fd\u6709\u5c6c\u65bc\u4ed6\u5011\u7684\u6e2c\u8a66 UI \u5957\u4ef6\u3002\u800c\u6bd4\u8f03\u65b0\u7684\u6846\u67b6\u50cf\u662f Preact\u3001Svelte \u4e5f\u90fd\u6709\u5728\u6301\u7e8c\u66f4\u65b0\u3002"),(0,a.kt)("h2",{id:"testing-library-for-react"},"Testing Library For React"),(0,a.kt)("p",null,"\u4ee5 React \u4f86\u8aaa\uff0c\u642d\u914d Jest \u6703\u9700\u8981\u7684 Testing Libary \u6709\u4ee5\u4e0b\u5e7e\u500b\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@testing-library/react"},"@testing-library/react")," - \u6a21\u64ec React \u6e32\u67d3\uff0cEx\uff1arender\u3001screen")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@testing-library/jest-dom"},"@testing-library/jest-dom")," - \u64f4\u5145 jest \u7684\u65b7\u8a00\u5eab\uff0cEx\uff1atoBeInTheDocument\u3001toHaveClass")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@testing-library/user-event"},"@testing-library/user-event")," - \u6a21\u64ec\u4f7f\u7528\u8005\u64cd\u4f5c\uff0cEx\uff1auseEvent.click\u3001userEvent.type"))),(0,a.kt)("p",null,"\u63a5\u4e0b\u4f86\u4f86\u5404\u5225\u4ecb\u7d39\u9019\u4e09\u500b\u7684\u4f7f\u7528\u6642\u6a5f\uff1a"),(0,a.kt)("h3",{id:"-testing-libraryreact"},"\ud83d\udccc @testing-library/react"),(0,a.kt)("p",null,"\u4e3b\u8981\u662f\u63d0\u4f9b\u6a21\u64ec\u6e32\u67d3 UI \u756b\u9762\u7684\u51fd\u5f0f\uff0c\u6bd4\u8f03\u5e38\u7528\u7684\u6709"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"render()"))),(0,a.kt)("p",null,"\u5c31\u5982\u540c React \u4e2d\u7684 render\uff0c\u5c31\u662f\u6a21\u64ec\u6e32\u67d3 React \u5143\u4ef6\uff0c\u5047\u8a2d\u6709\u4e00\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},"<Home/>")," \u5143\u4ef6\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"export const Home = () => {\n  return <h1>Home Page</h1>;\n};\n")),(0,a.kt)("p",null,"\u8981\u6e2c\u8a66\u5143\u4ef6\u7684 DOM \u5143\u7d20\u6642\uff0c\u5c31\u53ef\u4ee5\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"render()")," \u51fd\u5f0f\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import { render } from "@testing-library/react";\nimport { Home } from "./Home";\n\ndescribe("testing home component", () => {\n  it("show Home Page in the home component", () => {\n    const { getByText } = render(<Home />);\n    //\u4f7f\u7528 getByText \u5224\u65b7\u6293\u5230\u6587\u5b57\u7684\u5143\u7d20\u662f\u5426\u5b58\u5728\n    expect(getByText("Home Page")).toBeTruthy();\n  });\n});\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"render()")," \u51fd\u5f0f\u6703\u56de\u50b3\u4e00\u500b\u7269\u4ef6\u5305\u542b\u4e00\u4e9b\u5c6c\u6027\u5c0d\u8c61\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://testing-library.com/docs/queries/about/"},"...Query"),"\uff1agetBy\u3001queryBy\u3001findBy\u3001getAllBy\u3001queryAllBy\u3001findAllBy\uff0c\u53d6\u5f97\u5143\u4ef6\u5167\u7684\u5143\u7d20\u3002"),(0,a.kt)("li",{parentName:"ul"},"container\uff1a\u6e32\u67d3\u7684 DOM \u7bc0\u9ede\u3002"),(0,a.kt)("li",{parentName:"ul"},"debug\uff1a\u5075\u932f\u51fd\u5f0f\uff0c\u53ef\u4ee5\u986f\u793a\u7576\u524d\u7684 DOM \u7d50\u69cb\u3002"),(0,a.kt)("li",{parentName:"ul"},"rerender\uff1a\u91cd\u65b0\u6e32\u67d3\u5143\u4ef6\u3002"),(0,a.kt)("li",{parentName:"ul"},"unmount\uff1a\u53d6\u6d88\u6e32\u67d3\u3002")),(0,a.kt)("p",null,"Query \u6709\u5f88\u591a\u4e0d\u540c\u7684\u53d6\u5143\u7d20\u65b9\u6cd5\uff0c\u6709 get\u3001find\u3001query\uff0c\u5404\u81ea\u90fd\u6709\u53d6\u5f97\u591a\u5143\u7d20\u7684 all \u65b9\u6cd5"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:"center"},"Query \u7a2e\u985e\\\u7d50\u679c"),(0,a.kt)("th",{parentName:"tr",align:null},"\u6c92\u6709\u7b26\u5408"),(0,a.kt)("th",{parentName:"tr",align:null},"\u4e00\u9805\u7b26\u5408"),(0,a.kt)("th",{parentName:"tr",align:null},"\u591a\u9805\u7b26\u5408"),(0,a.kt)("th",{parentName:"tr",align:null},"\u662f\u5426\u70ba\u975e\u540c\u6b65\u51fd\u5f0f"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"getBy..."),(0,a.kt)("td",{parentName:"tr",align:null},"Throw Error"),(0,a.kt)("td",{parentName:"tr",align:null},"\u56de\u50b3\u5143\u7d20"),(0,a.kt)("td",{parentName:"tr",align:null},"Throw Error"),(0,a.kt)("td",{parentName:"tr",align:null},"\u274c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"queryBy..."),(0,a.kt)("td",{parentName:"tr",align:null},"\u56de\u50b3 ",(0,a.kt)("inlineCode",{parentName:"td"},"null")),(0,a.kt)("td",{parentName:"tr",align:null},"\u56de\u50b3\u5143\u7d20"),(0,a.kt)("td",{parentName:"tr",align:null},"Throw Error"),(0,a.kt)("td",{parentName:"tr",align:null},"\u274c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"findBy..."),(0,a.kt)("td",{parentName:"tr",align:null},"Throw Error"),(0,a.kt)("td",{parentName:"tr",align:null},"\u56de\u50b3\u5143\u7d20"),(0,a.kt)("td",{parentName:"tr",align:null},"\u56de\u50b3\u5143\u7d20"),(0,a.kt)("td",{parentName:"tr",align:null},"\u2705")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"getAllBy..."),(0,a.kt)("td",{parentName:"tr",align:null},"Throw Error"),(0,a.kt)("td",{parentName:"tr",align:null},"\u56de\u50b3\u5143\u7d20\u9663\u5217"),(0,a.kt)("td",{parentName:"tr",align:null},"\u56de\u50b3\u5143\u7d20\u9663\u5217"),(0,a.kt)("td",{parentName:"tr",align:null},"\u274c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"queryAllBy..."),(0,a.kt)("td",{parentName:"tr",align:null},"\u56de\u50b3 ",(0,a.kt)("inlineCode",{parentName:"td"},"[]")),(0,a.kt)("td",{parentName:"tr",align:null},"\u56de\u50b3\u5143\u7d20\u9663\u5217"),(0,a.kt)("td",{parentName:"tr",align:null},"\u56de\u50b3\u5143\u7d20\u9663\u5217"),(0,a.kt)("td",{parentName:"tr",align:null},"\u274c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:"center"},"findAllBy..."),(0,a.kt)("td",{parentName:"tr",align:null},"Throw Error"),(0,a.kt)("td",{parentName:"tr",align:null},"\u56de\u50b3\u5143\u7d20\u9663\u5217"),(0,a.kt)("td",{parentName:"tr",align:null},"\u56de\u50b3\u5143\u7d20\u9663\u5217"),(0,a.kt)("td",{parentName:"tr",align:null},"\u2705")))),(0,a.kt)("p",null,"\u770b\u8d77\u4f86\u5f88\u5bb9\u6613\u641e\u6df7\uff0c\u4e0d\u904e\u4ed6\u5011\u90fd\u6709\u5404\u81ea\u4f7f\u7528\u7684\u6642\u6a5f"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"getBy...\uff1a\u5927\u90e8\u5206\u90fd\u53ef\u4ee5\u4f7f\u7528\uff0c\u5224\u65b7\u5143\u7d20\u662f\u5426\u5b58\u5728\u3002"),(0,a.kt)("li",{parentName:"ul"},"queryBy...\uff1a\u56e0\u70ba\u627e\u4e0d\u5230\u6703\u56de\u50b3 null \u7684\u7279\u6027\uff0c\u6240\u4ee5\u5e38\u7528\u4f86\u5224\u65b7\u5143\u7d20\u662f\u5426\u4e00\u958b\u59cb\u4e0d\u5b58\u5728\u3002"),(0,a.kt)("li",{parentName:"ul"},"findBy...\uff1a\u975e\u540c\u6b65\u51fd\u5f0f\uff0c\u53ef\u4ee5\u5224\u65b7\u9700\u7b49\u5f85\u7684\u5143\u7d20\u662f\u5426\u5b58\u5728\uff0c\u4f8b\u5982 API \u56de\u50b3\u624d\u6703\u986f\u793a\u5728\u756b\u9762\u4e0a\u3002")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"screen()"))),(0,a.kt)("p",null,"\u96d6\u7136 ",(0,a.kt)("inlineCode",{parentName:"p"},"render()")," \u89e3\u6c7a\u4e86\u6a21\u64ec UI \u7684\u60c5\u6cc1\uff0c\u4e0d\u904e\u53ea\u80fd\u6839\u64da ",(0,a.kt)("inlineCode",{parentName:"p"},"render()")," \u7684\u5167\u5bb9\u9032\u884c\u6e2c\u8a66\uff0c\u5982\u679c\u6709\u591a\u500b ",(0,a.kt)("inlineCode",{parentName:"p"},"render()")," \u51fd\u5f0f\u6e2c\u8d77\u4f86\u5c31\u6703\u6bd4\u8f03\u9ebb\u7169\uff0c\u9019\u6642\u5019\u5c31\u53ef\u4ee5\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"screen()"),"\u3002"),(0,a.kt)("p",null,"\u5176\u5be6 ",(0,a.kt)("inlineCode",{parentName:"p"},"screen()")," \u7b97\u662f @testing-library/dom \u6240\u63d0\u4f9b\uff0c\u800c\u6240\u6709\u6846\u67b6\u7684 @testing-library \u5e95\u5c64\u90fd\u6709 @testing-library/dom\uff0c\u6240\u4ee5\u9019\u908a\u624d\u53ef\u4ee5\u76f4\u63a5\u505a\u4f7f\u7528\u3002"),(0,a.kt)("p",null,"\u800c ",(0,a.kt)("inlineCode",{parentName:"p"},"screen()")," \u6240\u6293\u53d6\u7684\u5143\u7d20\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"<body></body>")," \u5167\u7684\u6240\u6709 DOM \u5143\u7d20\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import { render, screen } from "@testing-library/react";\nimport { Home } from "./Home";\n\ndescribe("testing home component", () => {\n  it("show Home Page in the home component", () => {\n    render(<Home />);\n    render(<Home />);\n    //\u4f7f\u7528 getAllByText \u5224\u65b7\u662f\u5426\u6293\u53d6\u5169\u500b\u5143\u7d20\n    expect(screen.getAllByText("Home Page")).toHaveLength(2);\n  });\n});\n')),(0,a.kt)("p",null,"\u500b\u4eba\u5728\u6293\u5143\u7d20\u6642\u662f\u6bd4\u8f03\u5e38\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"screen()")," \u52dd\u904e\u65bc\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"render()")," \u56de\u50b3\u7684\u65b9\u6cd5\uff0c\u4f7f\u7528\u8d77\u4f86\u4e5f\u6bd4\u8f03\u65b9\u4fbf\u3002"),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("inlineCode",{parentName:"li"},"renderHook()"))),(0,a.kt)("p",null,"\u9867\u540d\u601d\u7fa9\u5c31\u662f\u53bb\u6a21\u64ec\u5ba2\u88fd\u5316\u7684 React Hook\uff0c\u5047\u8a2d\u4eca\u5929\u6709\u4e00\u500b\u8a08\u6578\u5668\u7684 custom hook"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import { useState } from "react";\n\nfunction useCounter(initialValue = 0) {\n  const [count, setCount] = useState(initialValue);\n  // \u52a0\u4e00\u51fd\u5f0f\n  const increment = () => {\n    setCount(count + 1);\n  };\n  // \u6e1b\u4e00\u51fd\u5f0f\n  const decrement = () => {\n    setCount(count - 1);\n  };\n\n  return { count, increment, decrement };\n}\n\nexport default useCounter;\n')),(0,a.kt)("p",null,"\u8981\u6e2c\u8a66\u9019\u500b hook \u5c31\u53ef\u4ee5\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"renderHook()"),"\uff0c\u4ed6\u53ef\u4ee5\u50b3\u5165\u5169\u500b\u53c3\u6578\uff0c\u7b2c\u4e00\u500b\u5c31\u662f\u8981\u6e2c\u8a66\u7684\u51fd\u5f0f\uff0c\u7b2c\u4e8c\u662f\u50b3\u5165\u51fd\u5f0f\u7684\u53c3\u6578 (\u975e\u5fc5\u8981)\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import useCounter from "./useCounter";\nimport { renderHook, act } from "@testing-library/react";\n\nit("should increment and decrement the counter", () => {\n  const { result } = renderHook(useCounter);\n\n  expect(result.current.count).toBe(0);\n\n  act(() => {\n    result.current.increment(); // \u547c\u53eb + 1 \u51fd\u5f0f\n  });\n\n  expect(result.current.count).toBe(1);\n\n  act(() => {\n    result.current.decrement(); // \u547c\u53eb -1 \u51fd\u5f0f\n  });\n\n  expect(result.current.count).toBe(0);\n});\n')),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"renderHook()")," \u6703\u56de\u50b3\u4e00\u500b\u7269\u4ef6\uff0c\u53ef\u4ee5\u4f7f\u7528 result \u5c6c\u6027\u5229\u7528 result.current \u53bb\u64cd\u63a7\u51fd\u5f0f\u7684\u56de\u50b3\u7269\u4ef6\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u6709",(0,a.kt)("strong",{parentName:"p"},"\u66f4\u6539 state")," \u7684\u64cd\u4f5c\uff0c\u5c31\u9700\u8981\u4f7f\u7528 ",(0,a.kt)("strong",{parentName:"p"},"act")," \u5305\u8d77\u4f86\uff0c\u9019\u6a23\u624d\u53ef\u4ee5\u5373\u6642\u66f4\u65b0 state \u7684\u72c0\u614b\u3002"),(0,a.kt)("h3",{id:"-testing-libraryjest-dom"},"\ud83d\udccc @testing-library/jest-dom"),(0,a.kt)("p",null,"@testing-library/jest-dom \u63d0\u4f9b\u7d66 Jest \u5f88\u591a DOM \u5143\u7d20\u7684\u64f4\u5145\u5224\u65b7\uff0c\u8b93\u6211\u5011\u5728\u6293\u5143\u7d20\u6642\uff0c\u6709\u66f4\u591a\u7684\u65b9\u6cd5\u53bb\u6e2c\u8a66\uff0c\u6bd4\u8f03\u5e38\u7528\u7684\u50cf\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"toBeInTheDocument"),"\u3001",(0,a.kt)("inlineCode",{parentName:"p"},"toHaveClass")," \u7b49\u7b49\u3002"),(0,a.kt)("p",null,"\u4ee5\u525b\u525b\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"<Home/>")," \u6e32\u67d3\u6e2c\u8a66\u70ba\u4f8b"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import { render, screen } from "@testing-library/react";\n\ndescribe("testing home component", () => {\n  it("show Home Page in the home component", () => {\n    render(<Home />);\n    expect(screen.getByText("Home Page")).toBeInTheDocument(); // \u5224\u65b7\u5143\u7d20\u662f\u5426\u5b58\u5728\u65bc DOM \u4e2d\n  });\n});\n')),(0,a.kt)("p",null,"\u6216\u662f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import { render, screen } from "@testing-library/react";\n\ndescribe("testing div", () => {\n  it("test div className have \'hide\'", () => {\n    render(<div className=\'hide\'>test</div>);\n    expect(screen.getByText("test")).toHaveClass("hide"); //\u5224\u65b7\u5143\u7d20\u662f\u5426\u542b\u6709\u6307\u5b9a\u7684 class name\n  });\n});\n')),(0,a.kt)("h3",{id:"-testing-libraryuser-event"},"\ud83d\udccc @testing-library/user-event"),(0,a.kt)("p",null,"\u6700\u5f8c\u4e00\u500b\u5c31\u662f\u6a21\u64ec\u4f7f\u7528\u8457\u64cd\u4f5c\uff0cuser-event \u5e38\u5e38\u8ddf\u53e6\u4e00\u500b @testing-library/react \u7684 fireEvent \u62ff\u4f86\u6bd4\u8f03\uff0cfireEvent \u5c31\u662f\u5728\u7a0b\u5f0f\u78bc\u4e2d\u6703\u7528\u7684\u4e8b\u4ef6\u8655\u7406\uff0c\u50cf\u662f click \u6216\u662f change\uff0c\u800c user-event \u7684\u5e95\u5c64\u5c31\u662f fireEvent\uff0c\u4e0d\u904e userEvent \u80fd\u66f4\u8cbc\u5408\u4f7f\u7528\u8005\u7684\u6a21\u64ec\u60c5\u6cc1\uff0c\u50cf\u662f\u540c\u6a23\u662f\u5728 input \u8f38\u5165\u6587\u5b57\uff0c\u5982\u679c\u4f7f\u7528 fireEvent \u5c31\u6703\u4f7f\u7528 change \u7684\u4e8b\u4ef6\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"fireEvent\uff1a")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import { fireEvent } from "@testing-library/react";\n\nfireEvent.change(inputElement, { target: { value: "Hello World!" } });\n')),(0,a.kt)("p",null,"\u4e0d\u904e\u5982\u679c\u662f\u4f7f\u7528 userEvent \u5c31\u6703\u4f7f\u7528 type \u7684\u4e8b\u4ef6\u3002"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"userEvent\uff1a")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import userEvent from "@testing-library/user-event";\n\nconst user = userEvent.setup();\nawait user.type(inputElement, "Hello World!");\n')),(0,a.kt)("p",null,"\u9664\u4e86 userEvent \u662f\u975e\u540c\u6b65\u4ee5\u5916\uff0c\u4e4d\u770b\u4e4b\u4e0b\u6c92\u6709\u4ec0\u9ebc\u4e0d\u4e00\u6a23\uff0c\u4e0d\u904e userEvent \u7684 type \u9084\u5305\u542b\u4f7f\u7528\u8005\u9ede\u64ca input\uff0c\u8f38\u5165\u6587\u5b57\u7684 keyDown\u3001keyUp \u4e8b\u4ef6\uff0c\u6bd4\u8d77 fireEvent \u7684 change\uff0c\u66f4\u8cbc\u8fd1\u5be6\u969b\u7684\u4f7f\u7528\u8005\u64cd\u4f5c\u60c5\u6cc1\u3002"),(0,a.kt)("p",null,"\u5047\u8a2d\u6709\u4e00\u500b input\uff0c\u8f38\u5165\u6587\u5b57\u7684\u540c\u6642\u6703\u986f\u793a KeyDown\u3001KeyUp \u7684\u6587\u5b57"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"import React, { useState } from \"react\";\n\nfunction KeyEvent() {\n  const [text, setText] = useState(\"\");\n  const [keyEvent, setKeyEvent] = useState(\"\");\n\n  // keyDown \u4e8b\u4ef6\n  const handleKeyDown = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    setKeyEvent((prev) => prev + `Key Down: ${e.key}`);\n  };\n  // keyUp \u4e8b\u4ef6\n  const handleKeyUp = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    setKeyEvent((prev) => prev + `Key Up: ${e.key}`);\n  };\n\n  return (\n    <div>\n      <input\n        type='text'\n        value={text}\n        onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\n          setText(e.target.value)\n        }\n        onKeyDown={handleKeyDown}\n        onKeyUp={handleKeyUp}\n        data-testid='input'\n      />\n      <p data-testid='key-event'>{keyEvent}</p>\n    </div>\n  );\n}\n\nexport default KeyEvent;\n")),(0,a.kt)("p",null,"\u4f7f\u7528 firEvent \u4f86\u6e2c\u8a66"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'describe("KeyEventsComponent", () => {\n  it("test with fireEvent", async () => {\n    render(<KeyEvent />);\n    const inputElement = screen.getByTestId("input");\n    const keyEventElement = screen.getByTestId("key-event");\n\n    // \u4f7f\u7528 fireEvent.change \u8f38\u5165\u6587\u5b57\n    fireEvent.change(inputElement, { target: { value: "Hello" } });\n\n    // \u4f7f\u7528 fireEvent.keyDown \u6a21\u64ec\u4f7f\u7528\u8005\u6309\u4e0b o\n    fireEvent.keyDown(inputElement, { key: "o" });\n\n    // \u4f7f\u7528 fireEvent.keyUp \u6a21\u64ec\u4f7f\u7528\u8005\u653e\u958b o\n    fireEvent.keyUp(inputElement, { key: "o" });\n\n    expect(inputElement).toHaveValue("Hello");\n    expect(keyEventElement.textContent).toContain("Key Down: o");\n    expect(keyEventElement.textContent).toContain("Key Up: o");\n  });\n});\n')),(0,a.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u9700\u8981\u628a change \u4e8b\u4ef6\u8ddf keyDown\u3001keyUp \u4e8b\u4ef6\u5206\u958b\u5beb\uff0c\u5beb\u8d77\u4f86\u6bd4\u8f03\u9ebb\u7169\u5916\uff0c\u4e5f\u4e0d\u7b26\u5408\u5be6\u969b\u7684\u4f7f\u7528\u8005\u8f38\u5165\u3002"),(0,a.kt)("p",null,"\u5982\u679c\u4f7f\u7528 userEvent \u4f86\u6e2c\u8a66"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},'import { render, screen } from "@testing-library/react";\nimport userEvent from "@testing-library/user-event";\nimport KeyEvent from "./KeyEvent";\n\nconst user = userEvent.setup();\n\ndescribe("KeyEventsComponent", () => {\n  it("should simulate key events with userEvent.type", async () => {\n    render(<KeyEvent />);\n    const inputElement = screen.getByTestId("input");\n    const keyEventElement = screen.getByTestId("key-event");\n\n    // \u4f7f\u7528 user.type \u8f38\u5165\u6587\u5b57\n    await user.type(inputElement, "Hello");\n\n    // \u5224\u65b7 input \u7684\u503c\u662f\u5426\u70ba Hello\n    expect(inputElement).toHaveValue("Hello");\n\n    // \u5224\u65b7\u662f\u5426\u6709\u986f\u793a KeyDown\u3001KeyUp \u7684\u6587\u5b57\n    expect(keyEventElement.textContent).toContain("Key Down: o");\n    expect(keyEventElement.textContent).toContain("Key Up: o");\n  });\n});\n')),(0,a.kt)("p",null,"\u53ea\u9700\u8981\u4e00\u500b user.type \u5c31\u53ef\u4ee5\u5305\u542b\u6240\u6709\u7684\u4e8b\u4ef6\uff0c\u4e5f\u66f4\u8cbc\u8fd1\u4f7f\u7528\u8005\u7684\u64cd\u4f5c\u3002"),(0,a.kt)("p",null,"\u9664\u6b64\u4e4b\u5916\uff0cuserEvent \u9084\u6709\u63d0\u4f9b\u5f88\u591a\u5be6\u7528\u7684\u65b9\u6cd5\u50cf\u662f\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"dblClick\uff1a\u9ede\u64ca\u5169\u6b21")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"tripleClick\uff1a\u9ede\u64ca\u4e09\u6b21")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"type\uff1ainput \u8f38\u5165")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"upload\uff1a\u4e0a\u50b3")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"hover/unhover\uff1a\u6307\u6a19\u79fb\u9032\u79fb\u51fa")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},"copy/paste\uff1a\u8907\u88fd/\u8cbc\u4e0a"))),(0,a.kt)("p",null,"\u8a73\u7d30\u7684\u53ef\u4ee5\u53c3\u8003 ",(0,a.kt)("a",{parentName:"p",href:"https://testing-library.com/docs/user-event/intro/"},"User Interactions")),(0,a.kt)("p",null,"\u4eca\u5929\u5c31\u4ecb\u7d39\u5230\u9019\u908a\uff5e\u4e0b\u4e00\u7bc7\u7d42\u65bc\u8981\u9032\u5165 AI \u7684\u90e8\u5206\u4e86\uff01"))}m.isMDXComponent=!0}}]);