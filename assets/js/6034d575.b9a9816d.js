"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8542],{1902:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>d,default:()=>a,frontMatter:()=>i,metadata:()=>l,toc:()=>t});var r=s(5893),c=s(1151);const i={title:"\u3010Node\u3011\u5728\u4e0d\u540c\u5c08\u6848\u81ea\u52d5\u5207\u63db Node \u7248\u672c",sidebar_label:"\u5728\u4e0d\u540c\u5c08\u6848\u81ea\u52d5\u5207\u63db Node \u7248\u672c",tags:["node","nvm"]},d=void 0,l={id:"node/auto-switch-node-version",title:"\u3010Node\u3011\u5728\u4e0d\u540c\u5c08\u6848\u81ea\u52d5\u5207\u63db Node \u7248\u672c",description:"\u5728\u9032\u884c\u4e0d\u540c\u5c08\u6848\u7684\u6642\u5019\uff0c\u7e3d\u662f\u9700\u8981\u624b\u52d5\u5207\u63db\u5230\u4e0d\u540c\u7684 Node \u7248\u672c\uff0c\u5f88\u5e38\u5fd8\u8a18\u5207\u63db\u5c31\u6703 run \u5931\u6557\uff0c\u8b93\u6211\u975e\u5e38\u56f0\u64fe\u3002\u8a18\u9304\u4e00\u4e0b\u89e3\u6c7a\u7684\u65b9\u6cd5\uff5e",source:"@site/docs/node/auto-switch-node-version.mdx",sourceDirName:"node",slug:"/node/auto-switch-node-version",permalink:"/node/auto-switch-node-version",draft:!1,unlisted:!1,tags:[{inline:!1,label:"Node.js",permalink:"/tags/node"},{inline:!1,label:"NVM",permalink:"/tags/nvm"}],version:"current",lastUpdatedAt:1718173908e3,frontMatter:{title:"\u3010Node\u3011\u5728\u4e0d\u540c\u5c08\u6848\u81ea\u52d5\u5207\u63db Node \u7248\u672c",sidebar_label:"\u5728\u4e0d\u540c\u5c08\u6848\u81ea\u52d5\u5207\u63db Node \u7248\u672c",tags:["node","nvm"]},sidebar:"tutorialSidebar",previous:{title:"Node",permalink:"/category/node"},next:{title:"\u5728 Netlify \u90e8\u7f72 Node.js project",permalink:"/node/deploy-netlify"}},o={},t=[{value:"\u5148\u884c\u6e96\u5099",id:"\u5148\u884c\u6e96\u5099",level:2},{value:"\u6b65\u9a5f",id:"\u6b65\u9a5f",level:2},{value:"1. \u5efa\u7acb <code>.nvmrc</code> \u6a94\u6848",id:"1-\u5efa\u7acb-nvmrc-\u6a94\u6848",level:3},{value:"2. \u52a0\u5165 script",id:"2-\u52a0\u5165-script",level:3},{value:"\u6df1\u5165\u4e86\u89e3",id:"\u6df1\u5165\u4e86\u89e3",level:2}];function h(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,c.a)(),...n.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.p,{children:"\u5728\u9032\u884c\u4e0d\u540c\u5c08\u6848\u7684\u6642\u5019\uff0c\u7e3d\u662f\u9700\u8981\u624b\u52d5\u5207\u63db\u5230\u4e0d\u540c\u7684 Node \u7248\u672c\uff0c\u5f88\u5e38\u5fd8\u8a18\u5207\u63db\u5c31\u6703 run \u5931\u6557\uff0c\u8b93\u6211\u975e\u5e38\u56f0\u64fe\u3002\u8a18\u9304\u4e00\u4e0b\u89e3\u6c7a\u7684\u65b9\u6cd5\uff5e"}),"\n",(0,r.jsx)(e.h2,{id:"\u5148\u884c\u6e96\u5099",children:"\u5148\u884c\u6e96\u5099"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:"\u5b89\u88dd nvm"}),"\n",(0,r.jsx)(e.li,{children:"\u5b89\u88dd bash \u6216 zsh"}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u6b65\u9a5f",children:"\u6b65\u9a5f"}),"\n",(0,r.jsxs)(e.p,{children:["\u5b98\u65b9\u63d0\u4f9b\u7684\u65b9\u6cd5\u662f\u5728\u8cc7\u6599\u593e\u5e95\u4e0b\u65b0\u589e ",(0,r.jsx)(e.code,{children:".nvmrc"})," \u6a94\uff0c\u7136\u5f8c\u5728 bash \u6216 zsh \u88e1\u52a0\u4e0a\u4e00\u4e9b script\uff0c\u9019\u6a23\u6bcf\u4e00\u6b21\u5207\u63db\u8cc7\u6599\u593e\u6642\uff0c\u5c31\u6703\u81ea\u52d5\u53bb\u6293 ",(0,r.jsx)(e.code,{children:".nvmrc"})," \u88e1\u7684\u7248\u672c\u865f\uff0c\u7136\u5f8c\u547c\u53eb ",(0,r.jsx)(e.code,{children:"nvm use <Version>"})," \u53bb\u505a\u5207\u63db\u3002"]}),"\n",(0,r.jsxs)(e.h3,{id:"1-\u5efa\u7acb-nvmrc-\u6a94\u6848",children:["1. \u5efa\u7acb ",(0,r.jsx)(e.code,{children:".nvmrc"})," \u6a94\u6848"]}),"\n",(0,r.jsxs)(e.p,{children:["\u5728\u5c08\u6848\u7684\u6839\u76ee\u9304\u5e95\u4e0b\u65b0\u589e ",(0,r.jsx)(e.code,{children:".nvmrc"})," \u6a94\uff0c\u5728\u88e1\u9762\u8f38\u5165\u7248\u672c\u865f\uff0c\u53ef\u4ee5\u76f4\u63a5\u6253\u6578\u5b57\u6216\u662f\u6253 ",(0,r.jsx)(e.code,{children:"v\u7248\u672c"}),"\u3002"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'touch .nvmrc\necho "18" > .nvmrc\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u6216\u662f\u60f3\u8981\u6700\u65b0\u7684\u7248\u672c\u53ef\u4ee5\u6253"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'echo "lts/*" > .nvmrc # \u9577\u671f\u7a69\u5b9a node.js \u7248\u672c\uff08LTS\uff09\n\necho "node" > .nvmrc # \u6700\u65b0\u7684 node.js \u7248\u672c\n'})}),"\n",(0,r.jsx)(e.h3,{id:"2-\u52a0\u5165-script",children:"2. \u52a0\u5165 script"}),"\n",(0,r.jsx)(e.p,{children:"\u9019\u908a\u4ee5 zsh \u70ba\u4f8b\uff0c\u5148\u6253\u958b .zshrc \u6a94"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:"code ~/.zshrc # \u6bcf\u500b\u4eba\u653e\u7684\u5730\u65b9\u53ef\u80fd\u4e0d\u4e00\u6a23\n"})}),"\n",(0,r.jsx)(e.p,{children:"\u5728\u6700\u5f8c\u9762\u52a0\u4e0a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'# place this after nvm initialization!\nautoload -U add-zsh-hook\n\nload-nvmrc() {\n  local nvmrc_path\n  nvmrc_path="$(nvm_find_nvmrc)"\n\n  if [ -n "$nvmrc_path" ]; then\n    local nvmrc_node_version\n    nvmrc_node_version=$(nvm version "$(cat "${nvmrc_path}")")\n\n    if [ "$nvmrc_node_version" = "N/A" ]; then\n      nvm install\n    elif [ "$nvmrc_node_version" != "$(nvm version)" ]; then\n      nvm use\n    fi\n  elif [ -n "$(PWD=$OLDPWD nvm_find_nvmrc)" ] && [ "$(nvm version)" != "$(nvm version default)" ]; then\n    echo "Reverting to nvm default version"\n    nvm use default\n  fi\n}\n\nadd-zsh-hook chpwd load-nvmrc\nload-nvmrc\n'})}),"\n",(0,r.jsx)(e.p,{children:"\u5176\u4ed6 command shell \u7684 script \u53ef\u4ee5\u53c3\u8003\u5b98\u7db2\uff1a"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/nvm-sh/nvm#zsh",children:"zsh"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/nvm-sh/nvm#bash",children:"bash"})}),"\n",(0,r.jsx)(e.li,{children:(0,r.jsx)(e.a,{href:"https://github.com/nvm-sh/nvm#fish",children:"fish"})}),"\n"]}),"\n",(0,r.jsx)(e.h2,{id:"\u6df1\u5165\u4e86\u89e3",children:"\u6df1\u5165\u4e86\u89e3"}),"\n",(0,r.jsx)(e.p,{children:"\u6211\u5011\u53ef\u4ee5\u4f86\u7c21\u55ae\u5206\u6790\u4e00\u4e0b\u4ed6\u7684 script \u908f\u8f2f\uff1a"}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'if [ -n "$nvmrc_path" ]; then\n  local nvmrc_node_version\n  nvmrc_node_version=$(nvm version "$(cat "${nvmrc_path}")")\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u5982\u679c ",(0,r.jsx)(e.code,{children:".nvmrc"})," \u7684\u6a94\u6848\u5b58\u5728\u7684\u8a71\uff0c\u628a\u6a94\u6848\u5167\u5bb9\u4e1f\u5230\u8b8a\u6578 ",(0,r.jsx)(e.code,{children:"nvmrc_node_version"}),"\u3002"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'    if [ "$nvmrc_node_version" = "N/A" ]; then\n      nvm install\n    elif [ "$nvmrc_node_version" != "$(nvm version)" ]; then\n      nvm use\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u5982\u679c\u8f38\u5165\u7684\u7248\u672c\u865f\u6c92\u6709\u4e0b\u8f09\u7684\u8a71\uff0c\u57f7\u884c ",(0,r.jsx)(e.code,{children:"nvm install"})," \u4e0b\u8f09\u6307\u5b9a\u7248\u672c\u3002\n\u5982\u679c\u8f38\u5165\u7248\u672c\u865f\u8ddf\u7576\u524d\u7248\u672c\u4e0d\u540c\u7684\u8a71\uff0c\u4f7f\u7528 ",(0,r.jsx)(e.code,{children:"nvm use"})," \u4f86\u5207\u63db\u7248\u672c\u3002"]}),"\n",(0,r.jsx)(e.hr,{}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-bash",children:'elif [ -n "$(PWD=$OLDPWD nvm_find_nvmrc)" ] && [ "$(nvm version)" != "$(nvm version default)" ]; then\n  echo "Reverting to nvm default version"\n  nvm use default\nfi\n'})}),"\n",(0,r.jsxs)(e.p,{children:["\u5982\u679c ",(0,r.jsx)(e.code,{children:".nvmrc"})," \u6a94\u6848\u4e0d\u5b58\u5728\uff0c\u4e14\u7576\u524d\u7248\u672c\u8207\u9810\u8a2d\u4e0d\u540c\u7684\u8a71\uff0c",(0,r.jsx)(e.code,{children:"nvm use default"})," \u56de\u5230\u9810\u8a2d\u7248\u672c\u3002"]})]})}function a(n={}){const{wrapper:e}={...(0,c.a)(),...n.components};return e?(0,r.jsx)(e,{...n,children:(0,r.jsx)(h,{...n})}):h(n)}},1151:(n,e,s)=>{s.d(e,{Z:()=>l,a:()=>d});var r=s(7294);const c={},i=r.createContext(c);function d(n){const e=r.useContext(i);return r.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(c):n.components||c:d(n.components),r.createElement(i.Provider,{value:e},n.children)}}}]);