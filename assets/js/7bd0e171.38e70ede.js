"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9288],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>f});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},s=Object.keys(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var o=a.createContext({}),p=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return a.createElement(o.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,s=e.originalType,o=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),m=p(n),d=r,f=m["".concat(o,".").concat(d)]||m[d]||u[d]||s;return n?a.createElement(f,l(l({ref:t},c),{},{components:n})):a.createElement(f,l({ref:t},c))}));function f(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var s=n.length,l=new Array(s);l[0]=d;var i={};for(var o in t)hasOwnProperty.call(t,o)&&(i[o]=t[o]);i.originalType=e,i[m]="string"==typeof e?e:r,l[1]=i;for(var p=2;p<s;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5397:(e,t,n)=>{n.d(t,{E:()=>r});var a=n(7294);const r=e=>{let{src:t,width:n="100%",center:r=!1,style:s={}}=e;const l={width:`min(100%,${n})`,display:r?"block":"inline-block",margin:r?"0 auto":"0"};return a.createElement(a.Fragment,null,a.createElement("img",{src:t,style:{...l}}),a.createElement("br",null),a.createElement("br",null))}},8287:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>c,default:()=>k,frontMatter:()=>p,metadata:()=>m,toc:()=>d});var a=n(7462),r=(n(7294),n(3905)),s=n(5397);const l=n.p+"assets/images/day27-1-166dbe149018767ac61d35924f98a1ce.jpg",i=n.p+"assets/images/day27-2-46e4f7fb38065f5cdc288f1712efbf92.jpg",o=n.p+"assets/images/day27-3-4c4f4babd773bb81c9f535952472d034.jpg",p={title:"[Day 27] \u5acc Jest \u592a\u6162\uff1f\u4f86\u770b\u770b SWC \u8ddf Vitest \u5427\uff01",tags:["ITHome 2023"]},c=void 0,m={unversionedId:"ITHome2023/day27",id:"ITHome2023/day27",title:"[Day 27] \u5acc Jest \u592a\u6162\uff1f\u4f86\u770b\u770b SWC \u8ddf Vitest \u5427\uff01",description:"\u5728\u6211\u5011\u524d\u9762\u5728\u5be6\u4f5c\u6e2c\u8a66\u7684\u6642\u5019\uff0c\u4e0d\u77e5\u9053\u5927\u5bb6\u6709\u6c92\u6709\u89ba\u5f97 Jest \u8dd1\u6e2c\u8a66\u597d\u50cf\u6709\u9ede\u6162\u6b38\uff5e\u96d6\u7136\u516c\u8a8d Jest \u8dd1\u6e2c\u8a66\u7684\u901f\u5ea6\u6bd4 Mocha \u8ddf Karma \u9084\u8981\u5feb\uff0c\u4f46\u662f\u5728\u8dd1 React \u6e2c\u8a66\u7684\u6642\u5019\uff0c\u9084\u662f\u6703\u89ba\u5f97\u6709\u9ede\u6162\uff0c\u5c24\u5176\u662f\u5728\u4f60\u7684\u5c08\u6848\u8d8a\u5927\u7684\u6642\u5019\uff0c\u6e2c\u8a66\u7684\u6642\u9593\u5c31\u6703\u8d8a\u9577\uff0c\u90a3\u6709\u6c92\u6709\u4ec0\u9ebc\u65b9\u6cd5\u53ef\u4ee5\u8b93\u6e2c\u8a66\u7684\u901f\u5ea6\u8b8a\u5feb\u4e00\u9ede\u5462\uff1f",source:"@site/docs/ITHome2023/day27.mdx",sourceDirName:"ITHome2023",slug:"/ITHome2023/day27",permalink:"/Jim-Docusaurus/ITHome2023/day27",draft:!1,tags:[{label:"ITHome 2023",permalink:"/Jim-Docusaurus/tags/it-home-2023"}],version:"current",lastUpdatedAt:1699970253,formattedLastUpdatedAt:"2023\u5e7411\u670814\u65e5",frontMatter:{title:"[Day 27] \u5acc Jest \u592a\u6162\uff1f\u4f86\u770b\u770b SWC \u8ddf Vitest \u5427\uff01",tags:["ITHome 2023"]},sidebar:"tutorialSidebar",previous:{title:"[Day 26] Copilot Chat \u6e2c\u8a66\u5fc3\u5f97",permalink:"/Jim-Docusaurus/ITHome2023/day26"},next:{title:"[Day 28] \u6e2c\u8a66\u5b88\u5247\uff1a\u5982\u4f55\u8b93\u6e2c\u8a66\u66f4\u6709\u898f\u7bc4",permalink:"/Jim-Docusaurus/ITHome2023/day28"}},u={},d=[{value:"SWC",id:"swc",level:2},{value:"Vitest",id:"vitest",level:2}],f={toc:d};function k(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},f,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"\u5728\u6211\u5011\u524d\u9762\u5728\u5be6\u4f5c\u6e2c\u8a66\u7684\u6642\u5019\uff0c\u4e0d\u77e5\u9053\u5927\u5bb6\u6709\u6c92\u6709\u89ba\u5f97 Jest \u8dd1\u6e2c\u8a66\u597d\u50cf\u6709\u9ede\u6162\u6b38\uff5e\u96d6\u7136\u516c\u8a8d Jest \u8dd1\u6e2c\u8a66\u7684\u901f\u5ea6\u6bd4 Mocha \u8ddf Karma \u9084\u8981\u5feb\uff0c\u4f46\u662f\u5728\u8dd1 React \u6e2c\u8a66\u7684\u6642\u5019\uff0c\u9084\u662f\u6703\u89ba\u5f97\u6709\u9ede\u6162\uff0c\u5c24\u5176\u662f\u5728\u4f60\u7684\u5c08\u6848\u8d8a\u5927\u7684\u6642\u5019\uff0c\u6e2c\u8a66\u7684\u6642\u9593\u5c31\u6703\u8d8a\u9577\uff0c\u90a3\u6709\u6c92\u6709\u4ec0\u9ebc\u65b9\u6cd5\u53ef\u4ee5\u8b93\u6e2c\u8a66\u7684\u901f\u5ea6\u8b8a\u5feb\u4e00\u9ede\u5462\uff1f"),(0,r.kt)("h2",{id:"swc"},"SWC"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"https://swc.rs/"},"SWC")," \u662f\u4e00\u500b\u57fa\u65bc Rust \u7684\u6253\u5305\u7de8\u8b6f\u5de5\u5177\uff0c\u53ef\u4ee5\u7528\u4f86\u53d6\u4ee3 Babel\uff0c\u4e26\u4e14\u53ef\u4ee5\u66f4\u5feb\u901f\u7684\u7de8\u8b6f\u7a0b\u5f0f\u78bc\uff0c\u800c SWC \u4e5f\u6709\u63d0\u4f9b ",(0,r.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/@swc/jest"},"@swc/jest")," \u9019\u500b\u5957\u4ef6\uff0c\u53ef\u4ee5\u8b93\u6211\u5011\u5728 Jest \u4e2d\u4f7f\u7528 SWC \u4f86\u53d6\u4ee3 Babel\u3002"),(0,r.kt)("p",null,"\u5b89\u88dd\u5957\u4ef6\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm i -D jest @swc/core @swc/jest\n")),(0,r.kt)("p",null,"\u63a5\u8457\u5728 Jest \u7684\u8a2d\u5b9a\u6a94\u4e2d\u628a\u539f\u672c\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"babel-jest")," \u66ff\u63db\u6210 ",(0,r.kt)("inlineCode",{parentName:"p"},"@swc/jest"),"\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "transform": {\n    "^.+\\\\.(js|jsx|ts|tsx)$": "@swc/jest"\n  }\n}\n')),(0,r.kt)("p",null,"\u5982\u679c\u662f\u4f7f\u7528 React \u9084\u9700\u8981\u52a0\u4e0a ",(0,r.kt)("inlineCode",{parentName:"p"},"react")," \u7684\u8a2d\u5b9a\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "transform": {\n    "^.+\\\\.(js|jsx|ts|tsx)$": [\n      "@swc/jest",\n      {\n        "jsc": {\n          "transform": {\n            "react": {\n              "runtime": "automatic"\n            }\n          }\n        }\n      }\n    ]\n  }\n}\n')),(0,r.kt)("p",null,"\u8b93\u6211\u5011\u4f86\u5be6\u969b\u8dd1\u6e2c\u8a66\u770b\u770b\u5feb\u4e86\u591a\u5c11\uff0c\u5148\u4f86\u770b\u770b\u539f\u672c\u7684\u6e2c\u8a66\u901f\u5ea6\uff1a"),(0,r.kt)(s.E,{src:l,mdxType:"Img"}),(0,r.kt)("p",null,"\u800c\u4f7f\u7528 SWC \u4e4b\u5f8c\u7684\u6e2c\u8a66\u901f\u5ea6\uff1a"),(0,r.kt)(s.E,{src:i,mdxType:"Img"}),(0,r.kt)("p",null,"\u5e73\u5747\u6e2c\u8a66\u4e0b\u4f86\u5927\u6982\u5feb\u4e86 1 \u79d2\u5de6\u53f3\uff0cSWC \u7684\u5b98\u7db2\u8072\u7a31\u5728\u55ae\u57f7\u884c\u7dd2\u4e0a\u6bd4 Babel \u5feb 20 \u500d\uff0c\u800c\u5728\u56db\u6838\u5fc3\u4e0a\u6bd4 Babel \u5feb\u4e0a 70 \u500d\uff0c\u4e0d\u904e\u4e0d\u78ba\u5b9a\u662f\u4e0d\u662f\u5728\u6e2c\u8a66\u4e0a\u662f\u5426\u4e5f\u662f\u9019\u6a23\uff0c\u7562\u7adf SWC \u4e5f\u53ea\u662f\u7bc0\u7701\u4e86\u7de8\u8b6f\u7684\u6642\u9593\uff0c\u5728\u8dd1\u6e2c\u8a66\u4e0a\u770b\u8d77\u4f86\u9084\u662f\u4f7f\u7528 Jest\uff0c\u4e0d\u904e\u5be6\u6e2c\u4e0b\u4f86\u7684\u78ba\u662f\u6709\u63d0\u5347\u8dd1\u6e2c\u8a66\u7684\u901f\u5ea6\u7684\uff01"),(0,r.kt)("h2",{id:"vitest"},"Vitest"),(0,r.kt)("p",null,"Vitest \u5982\u540c Vite \u4e00\u6a23\u662f\u4f7f\u7528 esbuild \u4f86\u9032\u884c\u6253\u5305\u7de8\u8b6f\uff0c\u5982\u679c\u6709\u7528\u904e Vite \u5c31\u77e5\u9053\u4ed6\u6709\u591a\u5feb\uff0c\u800c Vitest \u642d\u914d Vite \u53ef\u4ee5\u66f4\u65b9\u4fbf\u4f86\u9032\u884c\u8a2d\u7f6e\u3002"),(0,r.kt)("p",null,"\u5b89\u88dd\u5957\u4ef6\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"npm i -D vitest\n")),(0,r.kt)("p",null,"\u5728 package.json \u4e2d\u628a\u6e2c\u8a66\u6846\u67b6 ",(0,r.kt)("inlineCode",{parentName:"p"},"jest")," \u6539\u6210 ",(0,r.kt)("inlineCode",{parentName:"p"},"vitest"),"\uff0c\u518d\u628a\u539f\u672c Jest \u7684\u8a2d\u5b9a\u90fd\u62ff\u6389\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "scripts": {\n    "test": "vitest"\n  }\n}\n')),(0,r.kt)("p",null,"\u63a5\u8457\u5982\u679c\u4f7f\u7528 Vite \u7684\u8a71\uff0c\u8981\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"vite.config.js")," \u4e2d\u52a0\u4e0a\u7b2c\u4e00\u884c\u7684\u8a2d\u5b9a\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'/// <reference types="vitest" />\nimport { defineConfig } from "vite";\n\nexport default defineConfig({\n  test: {\n    // ...\n  },\n});\n')),(0,r.kt)("p",null,"\u7136\u5f8c\u539f\u672c\u7684 ",(0,r.kt)("inlineCode",{parentName:"p"},"setupTests.ts")," \u5c31\u53ef\u4ee5\u52a0\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"vite.config.js")," \u4e2d\u7684 test \u88e1\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'/// <reference types="vitest" />\nimport { defineConfig } from "vite";\n\nexport default defineConfig({\n  // \u6e2c\u8a66\u8a2d\u5b9a\n  test: {\n    globals: true,\n    environment: "jsdom",\n    setupFiles: ["./setupTests.ts"],\n  },\n});\n')),(0,r.kt)("p",null,"\u518d\u4f86\u5982\u679c\u6709\u4f7f\u7528 @testing-library/jest-dom \u7684\u8a71\uff0c\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"setupTests.ts")," \u5f15\u5165\u6642\u8981\u6539\u6210\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-ts"},'import "@testing-library/jest-dom/vitest";\n')),(0,r.kt)("p",null,"\u4f7f\u7528 TypeScript \u7684\u8a71\uff0c\u9700\u8981\u5728 ",(0,r.kt)("inlineCode",{parentName:"p"},"tsconfig.json")," \u4e2d\u52a0\u5165\uff1a"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "compilerOptions": {\n    "types": ["vitest/globals", "@testing-library/jest-dom/vitest"]\n  }\n}\n')),(0,r.kt)("p",null,"\u63a5\u8457\u5728\u6839\u64da\u5b98\u7db2 ",(0,r.kt)("a",{parentName:"p",href:"https://vitest.dev/guide/migration.html"},"Migration Guide")," \u7684\u6307\u793a\uff0c\u628a\u4e00\u4e9b jest \u7684\u8a9e\u6cd5\u6539\u6210 vitest \u7684\u8a9e\u6cd5\uff0c\u5c31\u5927\u529f\u544a\u6210\u4e86\uff01"),(0,r.kt)("p",null,"\u8b93\u6211\u5011\u5be6\u969b\u8dd1\u4e00\u6b21 Vitest \u7684\u6e2c\u8a66\uff1a"),(0,r.kt)(s.E,{src:o,mdxType:"Img"}),(0,r.kt)("p",null,"\u53ef\u4ee5\u770b\u5230\u53c8\u6bd4 SWC \u5feb\u4e86\u4e00\u79d2\u591a\uff0c\u4e5f\u5c31\u662f\u8aaa\u6bd4 Jest \u5feb\u4e86\u5169\u79d2\u591a\uff01\u662f\u4e0d\u662f\u7b49\u4e0d\u53ca\u628a Jest \u63db\u6389\u5566\uff0c\u800c\u4e14\u7576\u5c08\u6848\u8d8a\u5927\u8d8a\u80fd\u660e\u986f\u770b\u51fa\u4ed6\u5011\u7684\u5dee\u7570\u3002"),(0,r.kt)("p",null,"\u4e0d\u904e Vitest \u7562\u7adf\u9084\u662f\u6bd4\u8f03\u65b0\u7684\u5de5\u5177\uff0c\u793e\u7fa4\u4e0a\u7576\u7136\u662f\u6bd4\u4e0d\u904e\u6b77\u53f2\u60a0\u4e45\u7684 Jest\uff0c\u800c\u4e14\u6709\u4e9b\u8a9e\u6cd5\u9084\u4e0d\u5b8c\u5168\u652f\u63f4 Jest\uff0c\u4f46\u662f\u6211\u975e\u5e38\u770b\u597d Vitest \u7684\u767c\u5c55\uff0c\u901f\u5ea6\u5feb\u7528\u8d77\u4f86\u5c31\u662f\u8212\u670d\u554a\uff5e"),(0,r.kt)("hr",null),(0,r.kt)("p",null,"\u9019\u4e00\u7bc7\u8a66\u8457\u628a Jest \u63db\u6210 SWC \u8ddf Vitest \u4f86\u8dd1\u6e2c\u8a66\uff0c\u53ef\u4ee5\u770b\u5230\u901f\u5ea6\u4e0a\u7684\u78ba\u6709\u63d0\u5347\uff0c\u800c\u4e14\u5be6\u969b\u628a Jest \u66ff\u63db\u6389\u4e26\u4e0d\u6703\u8017\u8cbb\u5f88\u5927\u7684\u529f\u592b\uff0c\u6240\u4ee5\u5982\u679c\u4f60\u89ba\u5f97 Jest \u8dd1\u6e2c\u8a66\u592a\u6162\u7684\u8a71\uff0c\u53ef\u4ee5\u8003\u616e\u4f7f\u7528 SWC \u6216\u662f Vitest \u4f86\u53d6\u4ee3 Jest\uff01"),(0,r.kt)("p",null,"\u66ff\u63db\u7684\u904e\u7a0b\u53ef\u4ee5\u53c3\u8003\uff1a"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/Jim876633/ithome-2023/commit/9b51fe2f9f72a22ed590d0151dd1d162d73c95b7"},"SWC")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://github.com/Jim876633/ithome-2023/commit/3eb26270d53a87eb21f149923983aa65e120599b"},"Vitest"))))}k.isMDXComponent=!0}}]);