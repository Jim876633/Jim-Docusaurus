"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["2532"],{817:function(e,t,n){n.d(t,{Z:()=>c});var s=n("6019"),i=n("7294");let r={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892.1 737.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344zm174 132H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zM625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1z"}}]},name:"sound",theme:"filled"};var l=n("4632");let c=i.forwardRef(function(e,t){return i.createElement(l.Z,(0,s.Z)({},e,{ref:t,icon:r}))})},1241:function(e,t,n){n.r(t),n.d(t,{default:()=>g,frontMatter:()=>o,metadata:()=>s,assets:()=>h,toc:()=>j,contentTitle:()=>p});var s=JSON.parse('{"id":"test/vite-react-vitest","title":"\u3010Unit Test\u3011\u4F7F\u7528 Vite + Vitest \u9032\u884C React \u6E2C\u8A66","description":"React + Vitest","source":"@site/docs/test/vite-react-vitest.mdx","sourceDirName":"test","slug":"/test/vite-react-vitest","permalink":"/test/vite-react-vitest","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"React","permalink":"/tags/react"},{"inline":false,"label":"Vite","permalink":"/tags/vite"},{"inline":false,"label":"Vitest","permalink":"/tags/vitest"},{"inline":false,"label":"Test","permalink":"/tags/test"}],"version":"current","lastUpdatedAt":1718173908000,"frontMatter":{"title":"\u3010Unit Test\u3011\u4F7F\u7528 Vite + Vitest \u9032\u884C React \u6E2C\u8A66","sidebar_label":"\u4F7F\u7528 Vite + Vitest \u9032\u884C React \u6E2C\u8A66","tags":["react","vite","vitest","test"]},"sidebar":"tutorialSidebar","previous":{"title":"\u6E2C\u8A66\u5206\u985E\u53CA\u524D\u7AEF\u6E2C\u8A66\u5DE5\u5177\u4ECB\u7D39","permalink":"/test/intro"},"next":{"title":"Other","permalink":"/category/other"}}'),i=n("5893"),r=n("65"),l=n("8239");let c=n.p+"assets/images/vite-react-vitest-1-8c8d857f714e35572d06e1678d9919e9.png",a=n.p+"assets/images/vite-react-vitest-2-cf534225d1d55b79221e300e45b9c3ec.png";var d=n("9984");let o={title:"\u3010Unit Test\u3011\u4F7F\u7528 Vite + Vitest \u9032\u884C React \u6E2C\u8A66",sidebar_label:"\u4F7F\u7528 Vite + Vitest \u9032\u884C React \u6E2C\u8A66",tags:["react","vite","vitest","test"]},p=void 0,h={},j=[{value:"React + Vitest",id:"react--vitest",level:2},{value:"JavaScript",id:"javascript",level:3},{value:"TypeScript",id:"typescript",level:3},{value:"React testing library",id:"react-testing-library",level:2},{value:"JavaScript",id:"javascript-1",level:3},{value:"TypeScript",id:"typescript-1",level:3},{value:"\u53C3\u8003\u8CC7\u6599",id:"\u53C3\u8003\u8CC7\u6599",level:2}];function u(e){let t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"react--vitest",children:"React + Vitest"}),"\n",(0,i.jsxs)(t.p,{children:["\u9996\u5148\u5148\u4E0B\u8F09 Vite ",(0,i.jsx)(d.Z,{text:"vite",lang:"fr-CA"})," + React \u7684\u5C08\u6848"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"npm create vite@latest\n"})}),"\n",(0,i.jsx)(t.p,{children:"\u9019\u908A\u6703\u6709\u5169\u500B\u554F\u7B54\u7684\u9078\u9805\uFF0C\u6211\u9019\u908A\u9078\u64C7 React + TypeScript + SWC"}),"\n",(0,i.jsx)(l.Ei,{src:c,width:"400px"}),"\n",(0,i.jsx)(t.admonition,{type:"info",children:(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.a,{href:"https://swc.rs/",children:"SWC"})," \u662F\u4E00\u500B\u7528 Rust \u958B\u767C\u7684 JavaScript / TypeScript \u7DE8\u8B6F\u5668\uFF0C\u6253\u5305\u901F\u5EA6\u6BD4 Babel \u9084\u5FEB\uFF0C\u73FE\u5728 Next.js \u53CA Vite \u90FD\u6709\u652F\u63F4 SWC"]})}),"\n",(0,i.jsxs)(t.p,{children:["\u518D\u4F86\u5B89\u88DD ",(0,i.jsx)(t.a,{href:"https://vitest.dev/",children:"Vitest"})," ",(0,i.jsx)(d.Z,{text:"vitest",lang:"fr-CA"})]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"npm i -D vitest\n"})}),"\n",(0,i.jsxs)(t.p,{children:["\u5728 ",(0,i.jsx)(t.em,{children:"package.json"})," \u52A0\u5165 test script"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",metastring:"title='package.json'",children:'{\n  "scripts": {\n    "test": "vitest"\n  }\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["\u63A5\u8457\u5728 ",(0,i.jsx)(t.em,{children:"vite.config.ts"})," \u4E2D\u52A0\u5165 reference \u8DDF test \u7684\u8A2D\u5B9A\uFF0C\u8A2D\u5B9A globals \u70BA true\uFF0C\u9019\u6A23\u5C31\u53EF\u4EE5\u5728\u5168\u57DF\u4F7F\u7528 ",(0,i.jsx)(t.code,{children:"describe"}),"\u3001",(0,i.jsx)(t.code,{children:"it"}),"\u3001",(0,i.jsx)(t.code,{children:"expect"})," \u7B49\u65B9\u6CD5\u3002"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:"{1,7-9} title='vite.config.ts'",children:'/// <reference types="vitest" />\nimport { defineConfig } from "vite";\nimport react from "@vitejs/plugin-react-swc";\n\nexport default defineConfig({\n  plugins: [react()],\n  test: {\n    globals: true,\n  },\n});\n'})}),"\n",(0,i.jsx)(t.h3,{id:"javascript",children:"JavaScript"}),"\n",(0,i.jsx)(l.Ei,{src:a,width:"500px"}),"\n",(0,i.jsxs)(t.p,{children:["\u8A2D\u7F6E\u5B8C\u5F8C\u5982\u679C\u4F7F\u7528 ",(0,i.jsx)(t.strong,{children:"JavaScript"})," \u53EF\u80FD\u6703\u767C\u73FE\u6703\u5831 eslint \u7684\u932F\uFF0C\u5982\u4E0A\u5716\uFF0C\u4F46\u662F\u8DD1\u6E2C\u8A66\u662F\u6C92\u554F\u984C\u7684\uFF0C\u9019\u662F\u56E0\u70BA eslint \u6C92\u6709\u52A0\u5165 vitest \u7684 config\uFF0C\u6240\u4EE5\u6703\u5831\u932F\uFF0C\u9700\u8981\u4E0B\u8F09 ",(0,i.jsx)(t.a,{href:"https://www.npmjs.com/package/eslint-plugin-vitest",children:"eslint-plugin-vitest"})," \u4F86\u89E3\u6C7A\u3002"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"npm i -D eslint-plugin-vitest\n"})}),"\n",(0,i.jsxs)(t.p,{children:["\u7136\u5F8C\u5728 eslint \u7684\u8A2D\u5B9A\u6A94\u4E2D\u8A2D\u5B9A env \u53CA\u52A0\u5165 ",(0,i.jsx)(t.code,{children:"plugin:vitest/globals"}),"\u3002"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:"{2,8} title='.eslintrc.cjs'",children:'module.exports = {\n  env: { browser: true, es2021: true, "vitest/env": true },\n  extends: [\n    "eslint:recommended",\n    "plugin:react/recommended",\n    "plugin:react/jsx-runtime",\n    "plugin:react-hooks/recommended",\n    "plugin:vitest/recommended",\n  ],\n};\n'})}),"\n",(0,i.jsx)(t.h3,{id:"typescript",children:"TypeScript"}),"\n",(0,i.jsxs)(t.p,{children:["\u5982\u679C\u4F7F\u7528 ",(0,i.jsx)(t.strong,{children:"TypeScript"})," \u7684\u8A71\uFF0C\u5247\u9700\u8981\u5728 ",(0,i.jsx)(t.em,{children:"tsconfig.json"})," \u4E2D\u52A0\u5165 types\u3002"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",metastring:"{3} title='tsconfig.json'",children:'{\n  "compilerOptions": {\n    "types": ["vitest/globals"]\n  }\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"react-testing-library",children:"React testing library"}),"\n",(0,i.jsxs)(t.p,{children:["\u4F7F\u7528 React \u9032\u884C\u6E2C\u8A66\u8DDF Jest \u4E00\u6A23\u52A0\u5165\u4E09\u500B\u57FA\u672C\u7684 ",(0,i.jsx)(t.strong,{children:"testing-library"})," \u4EE5\u53CA\u6E2C\u8A66\u74B0\u5883 ",(0,i.jsx)(t.strong,{children:"jsdom"}),"\u3002"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"npm i -D @testing-library/react @testing-library/jest-dom @testing-library/user-event jsdom\n"})}),"\n",(0,i.jsx)(t.h3,{id:"javascript-1",children:"JavaScript"}),"\n",(0,i.jsxs)(t.p,{children:["\u5EFA\u7ACB\u4E00\u500B ",(0,i.jsx)(t.em,{children:"./tests/setup.js"})," \u6A94\u6848\u628A ",(0,i.jsx)(t.em,{children:"@testing-library/jest-dom"})," \u5957\u4EF6\u5F15\u5165\uFF0C\u5C31\u53EF\u4EE5\u5728\u5168\u57DF\u4E2D\u4F7F\u7528 jest-dom \u7684\u64F4\u5145\u8A9E\u6CD5\u3002"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:"title='./tests/setup.js'",children:'import "@testing-library/jest-dom";\n'})}),"\n",(0,i.jsxs)(t.p,{children:["\u63A5\u8457\u5728 ",(0,i.jsx)(t.em,{children:"vite.config.js"})," \u52A0\u5165\u74B0\u5883\u53CA ",(0,i.jsx)(t.code,{children:"setupFile"})," \u8DEF\u5F91"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:"{9-10} title='vite.config.js'",children:'/// <reference types="vitest" />\nimport { defineConfig } from "vite";\nimport react from "@vitejs/plugin-react-swc";\n\nexport default defineConfig({\n  plugins: [react()],\n  test: {\n    globals: true,\n    environment: "jsdom",\n    setupFiles: "./tests/setup.js",\n  },\n});\n'})}),"\n",(0,i.jsx)(t.h3,{id:"typescript-1",children:"TypeScript"}),"\n",(0,i.jsxs)(t.p,{children:["\u5728 ",(0,i.jsx)(t.strong,{children:"TypeScript"})," \u56E0\u70BA\u6700\u8FD1 ",(0,i.jsx)(t.em,{children:"@testing-library/jest-dom"})," \u6709\u9032\u884C",(0,i.jsx)(t.a,{href:"https://github.com/testing-library/jest-dom/releases/tag/v6.0.0",children:"\u66F4\u7248"}),"\uFF0C\u628A type \u578B\u5225\u62C9\u51FA\u53BB\u4E86\uFF0C\u6240\u4EE5 ",(0,i.jsx)(t.em,{children:"jest-dom"})," \u5F15\u5165\u7684\u65B9\u5F0F\u8981\u6539\u6210"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:"title='./tests/setup.ts'",children:'import "@testing-library/jest-dom/vitest";\n'})}),"\n",(0,i.jsxs)(t.p,{children:["\u7136\u5F8C\u5728 ",(0,i.jsx)(t.em,{children:"tsconfig.json"})," \u628A ",(0,i.jsx)(t.em,{children:"@testing-library/jest-dom/vitest"})," \u52A0\u5165 types"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",metastring:"title='tsconfig.json'",children:'{\n  "compilerOptions": {\n    "types": ["vitest/globals", "@testing-library/jest-dom/vitest"]\n  }\n}\n'})}),"\n",(0,i.jsx)(t.h2,{id:"\u53C3\u8003\u8CC7\u6599",children:"\u53C3\u8003\u8CC7\u6599"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://www.robinwieruch.de/vitest-react-testing-library/",children:"Vitest with React Testing Library"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://pjchender.dev/npm/note-vite-vitest/",children:"note-vite-vitest"})}),"\n"]})]})}function g(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},9984:function(e,t,n){n.d(t,{Z:function(){return c}});var s=n(5893),i=n(817),r=n(4634),l=n(7294);let c=e=>{let{text:t,lang:n="en-US"}=e;return(0,s.jsx)(r.Z,{children:()=>{let[e,r]=(0,l.useState)(!1),[c,a]=(0,l.useState)(!1);if(!(0,l.useMemo)(()=>"speechSynthesis"in window&&"SpeechSynthesisUtterance"in window,[window]))return null;let d=(0,l.useMemo)(()=>new SpeechSynthesisUtterance(t),[t]),o=async()=>{let t=.8;e&&(t=.5),d.rate=t,d.lang=n,window.speechSynthesis.speak(d),a(!0),r(!e)};return d.onend=()=>{a(!1)},(0,s.jsx)("button",{className:"sounds_btn",onClick:o,disabled:c,children:(0,s.jsx)(i.Z,{})})}})}},8239:function(e,t,n){n.d(t,{Ei:function(){return l},gO:function(){return c},nI:function(){return a}});var s=n(5893),i=n(4634),r=n(1195);n(7294);let l=e=>{let{src:t,width:n="100%",center:i=!1,style:r={}}=e,l={width:`min(100%,${n})`,display:i?"block":"inline-block",margin:i?"0 auto":"0",borderRadius:"5px",...r};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:t,style:{...l}}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})},c=e=>{let{children:t,width:n="100%",center:l=!1,style:c={}}=e;return(0,s.jsx)(i.Z,{children:()=>{let{sm:e}=(0,r.Z)(),i={width:`min(100%,${n})`,margin:l?"0 auto":"0",display:"flex",flexDirection:e?"column":"row",gap:"10px",alignItems:"center",...c};return(0,s.jsx)("div",{style:{...i},children:t})}})},a=e=>{let{style:t,width:n="100%",src:i}=e,r={width:`min(100%,${n})`,flex:1,...t};return(0,s.jsx)("div",{style:{...r},children:(0,s.jsx)(l,{src:i})})}},1195:function(e,t,n){n.d(t,{Z:function(){return i}});var s=n(7294);let i=()=>{let[e,t]=(0,s.useState)({width:window.innerWidth,height:window.innerHeight}),[n,i]=(0,s.useState)(!1);return(0,s.useLayoutEffect)(()=>{let e=()=>{let{innerWidth:e,innerHeight:n}=window;t({width:e,height:n}),i(e<=635)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),{sm:n,windowSize:e}}},65:function(e,t,n){n.d(t,{Z:function(){return c},a:function(){return l}});var s=n(7294);let i={},r=s.createContext(i);function l(e){let t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);