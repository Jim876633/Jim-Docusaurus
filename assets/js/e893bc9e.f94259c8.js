"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["9818"],{3468:function(e,n,t){t.r(n),t.d(n,{metadata:()=>s,contentTitle:()=>p,default:()=>m,assets:()=>u,toc:()=>y,frontMatter:()=>h});var s=JSON.parse('{"id":"ithome2023/day23","title":"[Day 23] E2E \u6E2C\u8A66\u5957\u4EF6 Cypress \u4ECB\u7D39","description":"\u55AE\u5143\u6E2C\u8A66\u7684\u6E2C\u8A66\u529F\u80FD\u90FD\u4ECB\u7D39\u4E86\u5DEE\u4E0D\u591A\u4E86\uFF0C\u5176\u5BE6\u5230\u5F8C\u4F86\u53EF\u4EE5\u767C\u73FE\uFF0C\u57FA\u672C\u4E0A\u55AE\u5143\u6E2C\u8A66\u80FD\u6E2C\u7684\u90FD\u5927\u540C\u5C0F\u7570\uFF0C\u5C31\u662F\u4E00\u4E9B\u5BEB\u6CD5\u8DDF\u8A9E\u6CD5\u7684\u4E0D\u540C\u800C\u5DF2\uFF0C\u4ECB\u7D39\u5B8C\u4E86\u55AE\u5143\u6E2C\u8A66\uFF0C\u6211\u5011\u4F86\u770B\u770B\u8981\u600E\u9EBC\u64B0\u5BEB\u7AEF\u5C0D\u7AEF (End-to-end) \u7684\u6E2C\u8A66\u5427\uFF01","source":"@site/docs/ithome2023/day23.mdx","sourceDirName":"ithome2023","slug":"/ithome2023/day23","permalink":"/ithome2023/day23","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"IT Home 2023","permalink":"/tags/ithome-2023","description":"IT Home \u9435\u4EBA\u8CFD 2023 \u5E74\u7CFB\u5217\u6587\u7AE0"}],"version":"current","lastUpdatedAt":1718173908000,"frontMatter":{"title":"[Day 23] E2E \u6E2C\u8A66\u5957\u4EF6 Cypress \u4ECB\u7D39","tags":["ithome2023"]},"sidebar":"tutorialSidebar","previous":{"title":" [Day 22] React + Jest Redux Toolkit Query \u6E2C\u8A66 (AI)","permalink":"/ithome2023/day22"},"next":{"title":"[Day 24] React + Cypress \u6E2C\u8A66","permalink":"/ithome2023/day24"}}'),i=t("5893"),r=t("65"),c=t("9366");let l=t.p+"assets/images/day23-1-2cc7ff156c8ad10b353a23c1dfd67b9d.jpg";var o=t("9915"),a=t("7413"),d=t("1167");let h={title:"[Day 23] E2E \u6E2C\u8A66\u5957\u4EF6 Cypress \u4ECB\u7D39",tags:["ithome2023"]},p=void 0,u={},y=[{value:"Cypress",id:"cypress",level:2},{value:"\u5B89\u88DD Cypress",id:"\u5B89\u88DD-cypress",level:2}];function x(e){let n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"\u55AE\u5143\u6E2C\u8A66\u7684\u6E2C\u8A66\u529F\u80FD\u90FD\u4ECB\u7D39\u4E86\u5DEE\u4E0D\u591A\u4E86\uFF0C\u5176\u5BE6\u5230\u5F8C\u4F86\u53EF\u4EE5\u767C\u73FE\uFF0C\u57FA\u672C\u4E0A\u55AE\u5143\u6E2C\u8A66\u80FD\u6E2C\u7684\u90FD\u5927\u540C\u5C0F\u7570\uFF0C\u5C31\u662F\u4E00\u4E9B\u5BEB\u6CD5\u8DDF\u8A9E\u6CD5\u7684\u4E0D\u540C\u800C\u5DF2\uFF0C\u4ECB\u7D39\u5B8C\u4E86\u55AE\u5143\u6E2C\u8A66\uFF0C\u6211\u5011\u4F86\u770B\u770B\u8981\u600E\u9EBC\u64B0\u5BEB\u7AEF\u5C0D\u7AEF (End-to-end) \u7684\u6E2C\u8A66\u5427\uFF01"}),"\n",(0,i.jsx)(n.h2,{id:"cypress",children:"Cypress"}),"\n",(0,i.jsxs)(n.p,{children:["\u9019\u908A\u6211\u4EE5 React \u6BD4\u8F03\u5E38\u4F7F\u7528\u7684 E2E \u6E2C\u8A66\u5957\u4EF6 ",(0,i.jsx)(n.a,{href:"https://www.cypress.io/",children:"Cypress"})," \u4F86\u4ECB\u7D39\uFF0CCypress \u63D0\u4F9B\u4E86\u7C21\u55AE\u7684\u4ECB\u9762\uFF0C\u8B93\u6211\u5011\u53EF\u4EE5\u5FEB\u901F\u7684\u5BEB\u51FA E2E \u6E2C\u8A66\uFF0C\u800C\u4E14 Testing Library \u4E5F\u6709\u63D0\u4F9B ",(0,i.jsx)(n.a,{href:"https://testing-library.com/docs/cypress-testing-library/intro/",children:"Cypress Testing Library"})," \u8B93\u6211\u5011\u53EF\u4EE5\u4F7F\u7528 Testing Library \u7684\u8A9E\u6CD5\u4F86\u5BEB E2E \u6E2C\u8A66\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u5B89\u88DD-cypress",children:"\u5B89\u88DD Cypress"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install cypress --save-dev\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u57F7\u884C\u7684\u6642\u5019\u53EA\u8981\u4E0B"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx cypress open\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u7B2C\u4E00\u6B21\u4F7F\u7528\u6642\u6703\u986F\u793A\u5169\u500B\u9078\u9805\u8B93\u4F60\u9078\uFF0C\u4E00\u500B\u662F ",(0,i.jsx)(n.strong,{children:"E2E Testing"})," \u53E6\u4E00\u500B\u662F ",(0,i.jsx)(n.strong,{children:"Component Testing"}),"\uFF0C\u5DEE\u5225\u5728\u65BC E2E Testing \u6E2C\u8A66\u7684\u662F\u6574\u500B\u61C9\u7528\u7A0B\u5F0F\uFF0C\u800C Component Testing \u6E2C\u8A66\u7684\u662F\u55AE\u4E00\u5143\u4EF6\uFF0C\u9019\u908A\u6211\u5011\u5148\u9078\u64C7 E2E Testing\u3002"]}),"\n",(0,i.jsx)(c.Ei,{src:l}),"\n",(0,i.jsx)(n.p,{children:"\u63A5\u8457\u4ED6\u6703\u81EA\u52D5\u5E6B\u4F60\u589E\u52A0\u56DB\u500B\u6A94\u6848"}),"\n",(0,i.jsx)(c.Ei,{src:o.Z}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"cypress.config.ts\uFF1Acypress \u7684\u8A2D\u5B9A\u6A94"}),"\n",(0,i.jsx)(n.li,{children:"cypress/support/e2e.ts\uFF1A\u5728\u6BCF\u500B\u6E2C\u8A66\u6A94\u6848\u57F7\u884C\u524D\u6703\u5148\u57F7\u884C\u7684\u6A94\u6848"}),"\n",(0,i.jsx)(n.li,{children:"cypress/support/commands.ts\uFF1A\u81EA\u5B9A\u7FA9\u7684\u57F7\u884C\u6307\u4EE4"}),"\n",(0,i.jsx)(n.li,{children:"cypress/fixtures/example.json\uFF1A\u81EA\u5B9A\u7FA9\u7684\u5047(\u56FA\u5B9A)\u8CC7\u6599"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u518D\u4F86\u53EF\u4EE5\u9078\u64C7\u4F7F\u7528\u54EA\u500B\u700F\u89BD\u5668\u505A\u6E2C\u8A66\uFF0C\u9019\u908A\u6211\u5011\u9078\u64C7 Chrome\u3002"}),"\n",(0,i.jsx)(c.Ei,{src:a.Z}),"\n",(0,i.jsx)(n.p,{children:"\u9078\u64C7\u5B8C\u5F8C\u5C31\u53EF\u4EE5\u958B\u59CB\u5BEB\u6E2C\u8A66\u4E86\uFF0C\u4ED6\u6703\u81EA\u52D5\u5E6B\u4F60\u958B\u555F\u4E00\u500B\u700F\u89BD\u5668\uFF0C\u4E26\u4E14\u5728\u5DE6\u908A\u986F\u793A\u6240\u6709\u7684\u6E2C\u8A66\u6A94\u6848\uFF0C\u9EDE\u64CA\u5F8C\u5C31\u53EF\u4EE5\u958B\u59CB\u5BEB\u6E2C\u8A66\u4E86\u3002"}),"\n",(0,i.jsx)(n.p,{children:"\u9019\u908A\u4EE5\u5B98\u65B9\u63D0\u4F9B\u7684\u7BC4\u4F8B\u4F86\u770B\u770B Cypress \u7684\u6E2C\u8A66\u6D41\u7A0B"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'/// <reference types="cypress" />\n\ndescribe("example to-do app", () => {\n  beforeEach(() => {\n    cy.visit("https://example.cypress.io/todo");\n  });\n\n  it("displays two todo items by default", () => {\n    cy.get(".todo-list li").should("have.length", 2);\n    cy.get(".todo-list li").first().should("have.text", "Pay electric bill");\n    cy.get(".todo-list li").last().should("have.text", "Walk the dog");\n  });\n\n  it("can add new todo items", () => {\n    const newItem = "Feed the cat";\n    cy.get("[data-test=new-todo]").type(`${newItem}{enter}`);\n    cy.get(".todo-list li")\n      .should("have.length", 3)\n      .last()\n      .should("have.text", newItem);\n  });\n\n  it("can check off an item as completed", () => {\n    cy.contains("Pay electric bill")\n      .parent()\n      .find("input[type=checkbox]")\n      .check();\n    cy.contains("Pay electric bill")\n      .parents("li")\n      .should("have.class", "completed");\n  });\n\n  context("with a checked task", () => {\n    beforeEach(() => {\n      cy.contains("Pay electric bill")\n        .parent()\n        .find("input[type=checkbox]")\n        .check();\n    });\n\n    it("can filter for uncompleted tasks", () => {\n      cy.contains("Active").click();\n      cy.get(".todo-list li")\n        .should("have.length", 1)\n        .first()\n        .should("have.text", "Walk the dog");\n      cy.contains("Pay electric bill").should("not.exist");\n    });\n\n    it("can filter for completed tasks", () => {\n      cy.contains("Completed").click();\n\n      cy.get(".todo-list li")\n        .should("have.length", 1)\n        .first()\n        .should("have.text", "Pay electric bill");\n\n      cy.contains("Walk the dog").should("not.exist");\n    });\n\n    it("can delete all completed tasks", () => {\n      cy.contains("Clear completed").click();\n      cy.get(".todo-list li")\n        .should("have.length", 1)\n        .should("not.have.text", "Pay electric bill");\n      cy.contains("Clear completed").should("not.exist");\n    });\n  });\n});\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u9019\u662F\u4E00\u6BB5\u6E2C\u8A66 To-do List \u662F\u5426\u904B\u4F5C\u6B63\u5E38\u7684\u6E2C\u8A66\u78BC\uFF0C\u53EF\u4EE5\u770B\u5230\u5BEB\u8D77\u4F86\u5176\u5BE6\u8DDF Jest \u5F88\u50CF\uFF0C\u53EA\u4E0D\u6703 Cypress \u4F7F\u7528\u4E86\u66F4\u591A\u5728\u6E2C\u8A66 UI \u756B\u9762\u7684\u8A9E\u6CD5\uFF0C\u50CF\u662F ",(0,i.jsx)(n.code,{children:"cy.get()"}),"\u3001",(0,i.jsx)(n.code,{children:"cy.contains()"}),"\u3001",(0,i.jsx)(n.code,{children:"cy.parent()"}),"\u3001",(0,i.jsx)(n.code,{children:"cy.find()"})," \u7B49\u7B49\uFF0C\u800C\u4E14\u6BD4\u8D77 Testing Library \u5728\u9078\u64C7\u5143\u7D20\u7684\u8A9E\u6CD5\u4E0A\u66F4\u7C21\u55AE\uFF0C\u662F\u4F7F\u7528 CSS Selector \u4F86\u9078\u64C7\u5143\u7D20\uFF0C\u800C\u4E0D\u662F\u50CF Testing Library \u90A3\u6A23\u4F7F\u7528 ",(0,i.jsx)(n.code,{children:"getByRole"}),"\u3001",(0,i.jsx)(n.code,{children:"getByLabelText"})," \u7B49\u7B49\uFF0C\u9019\u6A23\u7684\u597D\u8655\u662F\u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528\u700F\u89BD\u5668\u7684\u958B\u767C\u8005\u5DE5\u5177\u4F86\u9078\u64C7\u5143\u7D20\uFF0C\u800C\u4E14\u4E5F\u4E0D\u7528\u64D4\u5FC3\u5143\u7D20\u7684\u5C64\u7D1A\u95DC\u4FC2\uFF0C\u4F46\u7F3A\u9EDE\u5C31\u662F\u5982\u679C\u5143\u7D20\u7684\u5C64\u7D1A\u95DC\u4FC2\u6539\u8B8A\u4E86\uFF0C\u5C31\u9700\u8981\u91CD\u65B0\u4FEE\u6539\u6E2C\u8A66\u78BC\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u5BE6\u969B\u8DD1\u8D77\u4F86\u7684\u756B\u9762\u5982\u4E0B"}),"\n",(0,i.jsx)(c.Ei,{src:d.Z}),"\n",(0,i.jsx)(n.p,{children:"\u4E0B\u4E00\u7BC7\u4F86\u628A\u4E4B\u524D\u5BEB\u7684\u7A0B\u5F0F\u78BC\u8A66\u8457\u7528 Cypress \u4F86\u6E2C\u8A66\u770B\u770B\u5427\uFF01"})]})}function m(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(x,{...e})}):x(e)}},9915:function(e,n,t){t.d(n,{Z:function(){return s}});let s=t.p+"assets/images/day23-2-f01798723de3fd7d80ac5ce661557122.jpg"},7413:function(e,n,t){t.d(n,{Z:function(){return s}});let s=t.p+"assets/images/day23-3-d7339f3e0c64819526934adb3e481db9.jpg"},1167:function(e,n,t){t.d(n,{Z:function(){return s}});let s=t.p+"assets/images/day23-4-7b95ae4e5d0459f90cabe0d82b712ce3.gif"},144:function(e,n,t){t.d(n,{Z:function(){return r}});var s=t(5893);t(7294);var i=t(7227);function r(e){let{children:n,fallback:t}=e;return(0,i.Z)()?(0,s.jsx)(s.Fragment,{children:n?.()}):t??null}},9366:function(e,n,t){t.d(n,{Ei:function(){return c},gO:function(){return l},nI:function(){return o}});var s=t(5893),i=t(144),r=t(1094);t(7294);let c=e=>{let{src:n,width:t="100%",center:i=!1,style:r={}}=e,c={width:`min(100%,${t})`,display:i?"block":"inline-block",margin:i?"0 auto":"0",borderRadius:"5px",...r};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:n,style:{...c}}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})},l=e=>{let{children:n,width:t="100%",center:c=!1,style:l={}}=e;return(0,s.jsx)(i.Z,{children:()=>{let{sm:e}=(0,r.Z)(),i={width:`min(100%,${t})`,margin:c?"0 auto":"0",display:"flex",flexDirection:e?"column":"row",gap:"10px",alignItems:"center",...l};return(0,s.jsx)("div",{style:{...i},children:n})}})},o=e=>{let{style:n,width:t="100%",src:i}=e,r={width:`min(100%,${t})`,flex:1,...n};return(0,s.jsx)("div",{style:{...r},children:(0,s.jsx)(c,{src:i})})}},1094:function(e,n,t){t.d(n,{Z:function(){return r}});var s=t(7294);let i=635,r=()=>{let[e,n]=(0,s.useState)({width:window.innerWidth,height:window.innerHeight}),[t,r]=(0,s.useState)(!1);return(0,s.useLayoutEffect)(()=>{let e=()=>{let{innerWidth:e,innerHeight:t}=window;n({width:e,height:t}),r(e<=i)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),{sm:t,windowSize:e}}},65:function(e,n,t){t.d(n,{Z:function(){return l},a:function(){return c}});var s=t(7294);let i={},r=s.createContext(i);function c(e){let n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);