"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3209],{2308:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>j,contentTitle:()=>g,default:()=>m,frontMatter:()=>p,metadata:()=>x,toc:()=>u});var i=t(5893),o=t(1151),s=t(676),r=t(5397);const l=t.p+"assets/images/notion-linebot-1-3267c626080f588bc8d77a32923d92b1.jpg",a=t.p+"assets/images/notion-linebot-2-9e590706c8da55ba86124572b9fdc489.jpg",c=t.p+"assets/images/notion-linebot-3-66256a419d01cd68acb7d1bff515650f.jpg",d=t.p+"assets/images/notion-linebot-4-31e2580d265aca79622c456d7ff07c79.jpg",h=t.p+"assets/images/notion-linebot-5-9247f0c4889b4fdd4722a68075022cc8.jpg",p={title:"\u3010Other\u3011\u5efa\u7acb Line bot \u4e32\u63a5 Notion API",sidebar_label:"\u5efa\u7acb Line bot \u4e32\u63a5 Notion API",tags:["line"]},g=void 0,x={id:"other/notion-linebot",title:"\u3010Other\u3011\u5efa\u7acb Line bot \u4e32\u63a5 Notion API",description:"\u6703\u9700\u8981\u4e32\u63a5 Line Bot \u8ddf Notion API\uff0c\u662f\u56e0\u70ba\u6211\u5e38\u5e38\u5728 FB \u6216 IG \u7b49\u793e\u7fa4\u8edf\u9ad4\u770b\u5230\u4e00\u4e9b\u4e0d\u932f\u7684\u6587\u7ae0\u6216\u5f71\u7247\uff0c\u5c31\u6703\u5206\u4eab\u5230 Line \u7684\u7fa4\u7d44\uff0c\u7136\u5f8c\u6709\u7a7a\u7684\u6642\u5019\u5c31\u6703\u628a\u5b83\u6574\u7406\u6210 Notion \u7684 DataBase \u4f86\u8a18\u9304\u54ea\u4e9b\u6709\u770b\u904e\u54ea\u4e9b\u9084\u6c92\uff0c\u4f46\u662f\u9019\u6a23\u7684\u6d41\u7a0b\u5be6\u5728\u662f\u592a\u9ebb\u7169\u4e86\uff0c\u800c\u4e14\u6709\u6642\u5019\u9084\u8981\u53bb\u5c0d\u54ea\u4e9b\u5df2\u7d93\u8907\u88fd\u904e\u4e86\uff0c\u6240\u4ee5\u5c31\u60f3\u8aaa\u770b\u80fd\u4e0d\u80fd\u7528 Line Bot + Notion API \u4f86\u5e6b\u6211\u505a\u9019\u4ef6\u4e8b\u60c5\u3002",source:"@site/docs/other/notion-linebot.mdx",sourceDirName:"other",slug:"/other/notion-linebot",permalink:"/other/notion-linebot",draft:!1,unlisted:!1,tags:[{inline:!1,label:"Line",permalink:"/tags/line",description:"Line bot / Line Notify \u4e32\u63a5\u76f8\u95dc\u6587\u7ae0"}],version:"current",lastUpdatedAt:1718173908e3,frontMatter:{title:"\u3010Other\u3011\u5efa\u7acb Line bot \u4e32\u63a5 Notion API",sidebar_label:"\u5efa\u7acb Line bot \u4e32\u63a5 Notion API",tags:["line"]},sidebar:"tutorialSidebar",previous:{title:"\u65b0\u5b57\u9ad4 Monaspace\uff01",permalink:"/other/monaspace"},next:{title:"\u5982\u4f55\u5728\u624b\u6a5f\u6216\u5176\u4ed6\u88dd\u7f6e\u986f\u793a\u4f60\u7684 localhost \u7db2\u9801",permalink:"/other/show-local-on-mobile"}},j={},u=[{value:"\u5efa\u7acb Line Bot",id:"\u5efa\u7acb-line-bot",level:2},{value:"\u5efa\u7acb Notion integrations",id:"\u5efa\u7acb-notion-integrations",level:2},{value:"\u5efa\u7acb Server",id:"\u5efa\u7acb-server",level:2},{value:"\u88dc\u5145",id:"\u88dc\u5145",level:2}];function b(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["\u6703\u9700\u8981\u4e32\u63a5 Line Bot \u8ddf Notion API\uff0c\u662f\u56e0\u70ba\u6211\u5e38\u5e38\u5728 FB \u6216 IG \u7b49\u793e\u7fa4\u8edf\u9ad4\u770b\u5230\u4e00\u4e9b\u4e0d\u932f\u7684\u6587\u7ae0\u6216\u5f71\u7247\uff0c\u5c31\u6703\u5206\u4eab\u5230 Line \u7684\u7fa4\u7d44\uff0c\u7136\u5f8c\u6709\u7a7a\u7684\u6642\u5019\u5c31\u6703\u628a\u5b83\u6574\u7406\u6210 Notion \u7684 DataBase \u4f86\u8a18\u9304\u54ea\u4e9b\u6709\u770b\u904e\u54ea\u4e9b\u9084\u6c92\uff0c\u4f46\u662f\u9019\u6a23\u7684\u6d41\u7a0b\u5be6\u5728\u662f\u592a\u9ebb\u7169\u4e86\uff0c\u800c\u4e14\u6709\u6642\u5019\u9084\u8981\u53bb\u5c0d\u54ea\u4e9b\u5df2\u7d93\u8907\u88fd\u904e\u4e86\uff0c\u6240\u4ee5\u5c31\u60f3\u8aaa\u770b\u80fd\u4e0d\u80fd\u7528 ",(0,i.jsx)(s.Z,{color:"green",children:"Line Bot"})," + ",(0,i.jsx)(s.Z,{color:"blue",children:"Notion API"})," \u4f86\u5e6b\u6211\u505a\u9019\u4ef6\u4e8b\u60c5\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u5efa\u7acb-line-bot",children:"\u5efa\u7acb Line Bot"}),"\n",(0,i.jsxs)(n.p,{children:["\u5efa\u7acb Line \u901a\u77e5\u7684\u4ecb\u7d39\u53ef\u4ee5\u53c3\u8003\u6211\u4e4b\u524d\u5beb\u7684\u6587\u7ae0 ",(0,i.jsx)(n.a,{href:"/other/line-notify",children:"\u5982\u4f55\u4e32\u63a5 Line \u901a\u77e5"}),"\uff0c\u56e0\u70ba\u9700\u8981\u53bb\u76e3\u807d Line \u7fa4\u7d44\u7684\u8a0a\u606f\uff0c\u6240\u4ee5\u6211\u9078\u64c7\u7684\u662f\u5efa\u7acb Line Bot\uff0c\u800c\u4e0d\u662f Line Notify\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u5efa\u7acb-notion-integrations",children:"\u5efa\u7acb Notion integrations"}),"\n",(0,i.jsxs)(n.p,{children:["\u8981\u5728 Notion \u4e32\u63a5 API \u9700\u8981\u5148\u5efa\u7acb ",(0,i.jsx)(n.a,{href:"https://developers.notion.com/docs/create-a-notion-integration",children:"Integrations"}),"\uff0c\u624d\u80fd\u6307\u5b9a\u7279\u5b9a\u7684 Workspace \u4f86\u8ddf Notion API \u4e92\u52d5\uff0c\u5b98\u65b9\u6587\u4ef6\u7684\u8aaa\u660e\u5beb\u7684\u5f88\u6e05\u695a\uff0c\u9019\u908a\u5c31\u5927\u6982\u8aaa\u660e\u4e00\u4e0b\u5efa\u7f6e\u7684\u6d41\u7a0b\u3002"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u5148\u767b\u5165 ",(0,i.jsx)(n.a,{href:"https://www.notion.so/my-integrations",children:"My Integrations"}),"\uff0c\u7136\u5f8c\u6309\u4e0b New integration \u6309\u9215"]}),"\n"]}),"\n",(0,i.jsx)(r.Ei,{src:l}),"\n",(0,i.jsx)(n.p,{children:"\u70ba\u4f60\u7684 Integrations \u53d6\u4e00\u500b\u540d\u5b57\uff0c\u9019\u500b\u540d\u5b57\u6703 Workspace \u9078\u53d6 Integrations \u6642\u986f\u793a\u3002"}),"\n",(0,i.jsx)(r.Ei,{src:a}),"\n",(0,i.jsx)(n.p,{children:"\u5efa\u5b8c\u5f8c\u6703\u5f97\u5230\u4e00\u500b Secrets Token\uff0c\u9019\u500b Token \u6703\u7528\u5728 Notion API \u7684\u9a57\u8b49\u4e2d\uff0c\u53ef\u4ee5\u5148\u628a\u5b83\u8907\u88fd\u8d77\u4f86\u3002"}),"\n",(0,i.jsx)(r.Ei,{src:c}),"\n",(0,i.jsxs)(n.p,{children:["\u518d\u4f86\u5c31\u662f\u628a Integrations \u52a0\u5165\u5230 Notion \u88e1\uff0c\u9032\u5165\u5230\u60f3\u8981\u5b58\u53d6\u7684 Notion Workspace\uff0c\u9ede\u64ca\u53f3\u4e0a\u89d2\u7684 \u300c...\u300d \u5716\u793a\uff0c\u7136\u5f8c\u5728 ",(0,i.jsx)(n.strong,{children:"Add connections"})," \u4e2d\u5c31\u53ef\u4ee5\u770b\u5230\u525b\u525b\u5efa\u7acb\u7684 Integrations\uff0c\u9ede\u64ca\u5f8c\u5c31\u9023\u7d50\u5b8c\u6210\u4e86\u3002"]}),"\n",(0,i.jsx)(r.Ei,{src:d,width:"500px"}),"\n",(0,i.jsx)(r.Ei,{src:h,width:"500px"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"\u5982\u679c\u6c92\u6709\u5f15\u5165 Notion Integrations \u7684\u8a71\uff0c\u767c API \u56de\u50b3\u7684 results \u6703\u662f\u7a7a\u5b57\u4e32"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5efa\u7acb-server",children:"\u5efa\u7acb Server"}),"\n",(0,i.jsxs)(n.p,{children:["\u4f7f\u7528 Node \u7684\u8a71\uff0cLine \u5b98\u65b9\u6709\u63d0\u4f9b ",(0,i.jsx)(n.a,{href:"https://github.com/line/line-bot-sdk-nodejs",children:"@line/bot-sdk"}),"\uff0cNotion \u5b98\u65b9\u6709\u63d0\u4f9b ",(0,i.jsx)(n.a,{href:"https://github.com/makenotion/notion-sdk-js",children:"notion-sdk-js"}),"\uff0c\u8b93\u6211\u5011\u66f4\u65b9\u4fbf\u7684\u64cd\u4f5c\u9019\u4e9b API\uff0c\u9019\u908a\u4f7f\u7528 ",(0,i.jsx)(n.a,{href:"https://expressjs.com/",children:"Express"})," \u4f86\u5efa\u7acb Server\uff0c\u4e26\u7528 ",(0,i.jsx)(n.a,{href:"https://www.netlify.com/",children:"Netify"})," \u4f86\u9032\u884c\u90e8\u7f72\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install express notion-sdk-js @line/bot-sdk\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528 Netlify \u6e2c\u8a66\u9700\u8981\u5b89\u88dd"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install -D netlify-cli\n# \u4f7f\u7528 Express \u9700\u984d\u5916\u5b89\u88dd\nnpm install serverless-http\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u8a73\u7d30\u7684\u7a0b\u5f0f\u78bc\u53ef\u4ee5\u53c3\u8003 ",(0,i.jsx)(n.a,{href:"https://github.com/Jim876633/line-bot-write-notion/blob/main/api/server.js",children:"line-bot-write-notion"})]}),"\n",(0,i.jsx)(n.h2,{id:"\u88dc\u5145",children:"\u88dc\u5145"}),"\n",(0,i.jsx)(n.p,{children:"\u5728\u5efa\u7acb Webhook \u63a5\u6536 Line Bot \u8a0a\u606f\u6642\uff0c\u7a81\u7136\u60f3\u5230\u5982\u679c\u6709\u4eba\u76f4\u63a5\u4f7f\u7528\u9019\u500b API \u767c\u8a0a\u606f\u7684\u8a71\uff0c\u4e0d\u5c31\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u5beb\u5165\u6211\u7684 Notion \u4e86\u55ce\uff1f"}),"\n",(0,i.jsxs)(n.p,{children:["\u5f8c\u4f86\u627e\u5230 Line \u5b98\u65b9\u6587\u4ef6\u4e2d ",(0,i.jsx)(n.a,{href:"https://developers.line.biz/en/reference/messaging-api/#signature-validation",children:"Signature validation"})," \uff0c\u624d\u767c\u73fe Line Bot \u6709\u63d0\u4f9b",(0,i.jsx)(n.strong,{children:"\u7c3d\u7ae0"}),"\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u7528\u4f86\u9a57\u8b49\u8a0a\u606f\u662f\u5426\u662f\u5f9e Line Bot \u767c\u51fa\u7684\uff0c\u9019\u6a23\u5c31\u53ef\u4ee5\u907f\u514d\u6709\u4eba\u76f4\u63a5\u4f7f\u7528\u9019\u500b API \u4e86\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:'const crypto = require("crypto");\n\nconst signature = crypto\n  .createHmac("SHA256", config.channelSecret)\n  .update(JSON.stringify(req.body))\n  .digest("base64");\n\nif (signature === req.headers["x-line-signature"]) {\n  // \u9a57\u8b49\u6210\u529f\n  // ...do something\n}\n'})}),"\n",(0,i.jsxs)(n.p,{children:["\u7c3d\u7ae0\u7684\u539f\u7406\u5c31\u662f Line Bot \u767c Webhook \u6703\u5728 Header \u5e36\u4e00\u500b ",(0,i.jsx)(n.code,{children:"X-Line-Signature"})," \u7684\u6b04\u4f4d\uff0c\u88e1\u9762\u7684\u503c\u5c31\u662f\u7c3d\u7ae0\uff0c\u800c\u7c3d\u7ae0\u7684\u503c\u662f\u7531 Channel Secret \u8ddf Request Body \u7528 HMAC-SHA256 \u7522\u751f\u7684\uff0c\u6240\u4ee5\u6211\u5011\u53ea\u8981\u628a Channel Secret \u8ddf Request Body \u7528 HMAC-SHA256 \u7522\u751f\u7c3d\u7ae0\uff0c\u7136\u5f8c\u8ddf ",(0,i.jsx)(n.code,{children:"X-Line-Signature"})," \u7684\u503c\u6bd4\u5c0d\u662f\u4e0d\u662f\u4e00\u6a23\u7684\uff0c\u5c31\u53ef\u4ee5\u9a57\u8b49\u8a0a\u606f\u662f\u5426\u662f\u5f9e Line Bot \u767c\u51fa\u7684\u4e86\uff01"]})]})}function m(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(b,{...e})}):b(e)}},1262:(e,n,t)=>{t.d(n,{Z:()=>s});t(7294);var i=t(2389),o=t(5893);function s(e){let{children:n,fallback:t}=e;return(0,i.Z)()?(0,o.jsx)(o.Fragment,{children:n?.()}):t??null}},676:(e,n,t)=>{t.d(n,{Z:()=>o});var i=t(5893);const o=e=>{let{children:n,color:t,block:o,bold:s,style:r}=e,l="";switch(t){case"yellow":default:l="highlight-yellow";break;case"blue":l="highlight-blue";break;case"green":l="highlight-green";break;case"red":l="highlight-red"}const a={fontWeight:s?"bold":"normal",...r};return o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:`${l} highlight`,style:{...a},children:n}),(0,i.jsx)("p",{})]}):(0,i.jsx)("span",{className:`${l} highlight`,style:{...a},children:n})}},5397:(e,n,t)=>{t.d(n,{Ei:()=>r,gO:()=>l,nI:()=>a});var i=t(1262),o=t(5795),s=(t(7294),t(5893));const r=e=>{let{src:n,width:t="100%",center:i=!1,style:o={}}=e;const r={width:`min(100%,${t})`,display:i?"block":"inline-block",margin:i?"0 auto":"0",borderRadius:"5px",...o};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:n,style:{...r}}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})},l=e=>{let{children:n,width:t="100%",center:r=!1,style:l={}}=e;return(0,s.jsx)(i.Z,{children:()=>{const{sm:e}=(0,o.Z)(),i={width:`min(100%,${t})`,margin:r?"0 auto":"0",display:"flex",flexDirection:e?"column":"row",gap:"10px",alignItems:"center",...l};return(0,s.jsx)("div",{style:{...i},children:n})}})},a=e=>{let{style:n,width:t="100%",src:i}=e;const o={width:`min(100%,${t})`,flex:1,...n};return(0,s.jsx)("div",{style:{...o},children:(0,s.jsx)(r,{src:i})})}},5795:(e,n,t)=>{t.d(n,{Z:()=>s});var i=t(7294);const o=635,s=()=>{const[e,n]=(0,i.useState)({width:window.innerWidth,height:window.innerHeight}),[t,s]=(0,i.useState)(!1);return(0,i.useLayoutEffect)((()=>{const e=()=>{const{innerWidth:e,innerHeight:t}=window,i=e<=o;n({width:e,height:t}),s(i)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),{sm:t,windowSize:e}}},1151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>r});var i=t(7294);const o={},s=i.createContext(o);function r(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);