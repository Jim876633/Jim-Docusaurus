"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5768],{7335:(e,t,n)=>{n.d(t,{A:()=>o});var s=n(8168),r=n(6540);const a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892.1 737.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344zm174 132H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zM625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1z"}}]},name:"sound",theme:"filled"};var c=n(6653),i=function(e,t){return r.createElement(c.A,(0,s.A)({},e,{ref:t,icon:a}))};const o=r.forwardRef(i)},9736:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>d,default:()=>p,frontMatter:()=>l,metadata:()=>u,toc:()=>m});var s=n(4848),r=n(8453),a=n(2904);const c=n.p+"assets/images/npm-trend-6291972ec58caca41840e30ee2b5d563.jpg";var i=n(9180),o=n(7970);const l={title:"\u3010React\u3011Zustand - Side Project \u72c0\u614b\u7ba1\u7406\u597d\u5e6b\u624b\uff01",sidebar_label:"Zustand",sidebar_position:2,tags:["react","zustand"]},d=void 0,u={id:"react/zustand",title:"\u3010React\u3011Zustand - Side Project \u72c0\u614b\u7ba1\u7406\u597d\u5e6b\u624b\uff01",description:"Zustand  \u662f\u4e00\u500b\u8f15\u91cf\u7d1a\u7684\u72c0\u614b\u7ba1\u7406\u5957\u4ef6\uff0c\u662f\u5fb7\u8a9e state \u7684\u610f\u601d\uff0c\u539f\u59cb\u78bc\u6c92\u6709\u5f88\u591a\u884c\uff0c\u537b\u975e\u5e38\u7684\u597d\u7528\u3002\u4e0d\u50cf Redux \u90a3\u6a23\u9700\u8981\u8a2d\u5b9a\u5f88\u591a\u6771\u897f\uff0c\u53ea\u8981\u4e00\u500b\u7c21\u55ae\u7684 hook \u5c31\u53ef\u4ee5\u4f7f\u7528\uff0c\u5f88\u9069\u5408\u5728\u505a Side Project \u7684\u6642\u5019\u4f7f\u7528\u3002",source:"@site/docs/react/zustand.mdx",sourceDirName:"react",slug:"/react/zustand",permalink:"/react/zustand",draft:!1,unlisted:!1,tags:[{inline:!1,label:"React",permalink:"/tags/react"},{inline:!1,label:"Zustand",permalink:"/tags/zustand"}],version:"current",lastUpdatedAt:1718173908e3,sidebarPosition:2,frontMatter:{title:"\u3010React\u3011Zustand - Side Project \u72c0\u614b\u7ba1\u7406\u597d\u5e6b\u624b\uff01",sidebar_label:"Zustand",sidebar_position:2,tags:["react","zustand"]},sidebar:"tutorialSidebar",previous:{title:"React router (v6)",permalink:"/react/router"},next:{title:"Zustand \u539f\u59cb\u78bc\u89e3\u6790",permalink:"/react/zustand-source-code"}},h={},m=[{value:"\u5b89\u88dd",id:"\u5b89\u88dd",level:2},{value:"\u4f7f\u7528\u65b9\u6cd5",id:"\u4f7f\u7528\u65b9\u6cd5",level:2},{value:"Set State",id:"set-state",level:2},{value:"\u5408\u4f75\u591a\u500b store",id:"\u5408\u4f75\u591a\u500b-store",level:2}];function x(e){const t={admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["Zustand ",(0,s.jsx)(o.A,{text:"zustand",lang:"de-AT"})," \u662f\u4e00\u500b\u8f15\u91cf\u7d1a\u7684\u72c0\u614b\u7ba1\u7406\u5957\u4ef6\uff0c\u662f\u5fb7\u8a9e state \u7684\u610f\u601d\uff0c\u539f\u59cb\u78bc\u6c92\u6709\u5f88\u591a\u884c\uff0c\u537b\u975e\u5e38\u7684\u597d\u7528\u3002\u4e0d\u50cf Redux \u90a3\u6a23\u9700\u8981\u8a2d\u5b9a\u5f88\u591a\u6771\u897f\uff0c\u53ea\u8981\u4e00\u500b\u7c21\u55ae\u7684 hook \u5c31\u53ef\u4ee5\u4f7f\u7528\uff0c\u5f88\u9069\u5408\u5728\u505a Side Project \u7684\u6642\u5019\u4f7f\u7528\u3002"]}),"\n",(0,s.jsx)(a.E9,{src:c}),"\n",(0,s.jsx)(t.p,{children:"\u4ee5\u5e38\u898b\u7684 React \u72c0\u614b\u7ba1\u7406\u7684\u5957\u4ef6\u4f86\u6bd4\u8f03\uff0c\u53ef\u4ee5\u770b\u5230 react-redux \u4f9d\u820a\u662f\u6700\u591a\u4eba\u4f7f\u7528\u7684\uff0c\u4e0d\u904e zustand \u6bcf\u9031\u4e5f\u6709\u5c07\u8fd1 300 \u842c\u7684\u4e0b\u8f09\u91cf\uff0c\u4f7f\u7528\u4eba\u6578\u4e5f\u662f\u5f88\u591a\u7684\u3002"}),"\n",(0,s.jsx)(t.h2,{id:"\u5b89\u88dd",children:"\u5b89\u88dd"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"npm install zustand\n"})}),"\n",(0,s.jsx)(t.h2,{id:"\u4f7f\u7528\u65b9\u6cd5",children:"\u4f7f\u7528\u65b9\u6cd5"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["\u5148\u7528 ",(0,s.jsx)(t.code,{children:"create"})," \u4f86\u5efa\u7acb\u4e00\u500b store"]}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",children:'import create from "zustand";\n\nconst useCountStore = create((set) => ({\n  count: 0,\n  increment: () => set((state) => ({ count: state.count + 1 })),\n  decrement: () => set((state) => ({ count: state.count - 1 })),\n}));\n'})}),"\n",(0,s.jsxs)(t.ol,{start:"2",children:["\n",(0,s.jsx)(t.li,{children:"\u5728 component \u4e2d\u4f7f\u7528"}),"\n"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-tsx",children:"function Counter() {\n  const { count, increment, decrement } = useCountStore();\n\n  return (\n    <div>\n      <button onClick={decrement}>-</button>\n      <h1>{count}</h1>\n      <button onClick={increment}>+</button>\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(i.A,{url:"https://codesandbox.io/embed/7d26zr?fontsize=14&hidenavigation=1&theme=dark",title:"zustand-basic",codebasePath:"/src/store.js"}),"\n",(0,s.jsxs)(t.p,{children:["\u57fa\u672c\u4e0a\u5c31\u662f\u9019\u6a23\uff0c\u662f\u4e0d\u662f\u975e\u5e38\u65b9\u4fbf\u4f7f\u7528\uff01\u4e00\u500b ",(0,s.jsx)(t.code,{children:"create"})," \u5c31\u53ef\u4ee5\u5efa\u7acb\u4e00\u500b store\uff0c\u7136\u5f8c\u5728 component \u4e2d\u4f7f\u7528 hook \u5c31\u53ef\u4ee5\u53d6\u5f97 store \u7684\u8cc7\u6599\u548c\u65b9\u6cd5\u3002"]}),"\n",(0,s.jsx)(t.p,{children:"\u4e0b\u9762\u4f86\u8a73\u7d30\u7684\u4ecb\u7d39\u4e00\u4e0b zustand \u7684\u4f7f\u7528\u65b9\u6cd5\u53ca\u5e38\u7528\u7684\u529f\u80fd\u3002"}),"\n",(0,s.jsx)(t.h2,{id:"set-state",children:"Set State"}),"\n",(0,s.jsxs)(t.p,{children:["\u5728 zustand \u4e2d\uff0c\u8981\u6539\u8b8a state \u7684\u503c\uff0c\u53ef\u4ee5\u5728 ",(0,s.jsx)(t.code,{children:"create"})," \u4e2d\u4f7f\u7528 ",(0,s.jsx)(t.code,{children:"set"})," \u65b9\u6cd5\uff0c\u9019\u500b\u65b9\u6cd5\u6703\u63a5\u6536\u4e00\u500b callback function\uff0c\u6703\u6536\u5230\u76ee\u524d\u7684 state\uff0c\u518d\u56de\u50b3\u4e00\u500b\u65b0\u7684 state\u3002"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",metastring:"{5-6}",children:'import create from "zustand";\n\nconst useCountStore = create((set) => ({\n  count: 0,\n  increment: () => set((state) => ({ count: state.count + 1 })),\n  decrement: () => set((state) => ({ count: state.count - 1 })),\n}));\n'})}),"\n",(0,s.jsx)(t.p,{children:"\u4f60\u53ef\u80fd\u6703\u6ce8\u610f\u5230\u4ed6\u662f\u4f7f\u7528 mutable \u7684\u65b9\u5f0f\u4f86\u6539\u8b8a state\uff0c\u56e0\u70ba zustand \u8ddf redux \u4e00\u6a23\u90fd\u6703\u81ea\u52d5\u5e6b\u4f60\u8655\u7406 immutable \u7684\u554f\u984c\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u6539\u8b8a state \u7684\u503c\u3002"}),"\n",(0,s.jsxs)(t.admonition,{type:"warning",children:[(0,s.jsx)(t.p,{children:"\u96d6\u7136 zustand \u53ef\u4ee5\u76f4\u63a5\u6539\u8b8a state\uff0c\u4f46\u662f\u53ea\u9650\u65bc\u7b2c\u4e00\u5c64\u7684\u503c\uff0c\u5982\u679c\u662f\u5de2\u72c0\u7684\u7269\u4ef6\u6216\u9663\u5217\uff0c\u9084\u662f\u8981\u4f7f\u7528 immutable \u7684\u65b9\u5f0f\u4f86\u6539\u8b8a\u3002"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",metastring:"{7}",children:'import create from "zustand";\n\nconst useCountStore = create((set) => ({\n  count: { value: 0 },\n  increment: () =>\n    set((state) => ({\n      count: { ...state.count, vlaue: state.count.value + 1 },\n    })),\n}));\n'})})]}),"\n",(0,s.jsx)(t.h2,{id:"\u5408\u4f75\u591a\u500b-store",children:"\u5408\u4f75\u591a\u500b store"}),"\n",(0,s.jsx)(t.p,{children:"\u7576\u5c08\u6848\u8d8a\u4f86\u8d8a\u5927\uff0cstore \u6703\u8d8a\u5efa\u8d8a\u591a\uff0c\u70ba\u4e86\u65b9\u4fbf\u7ba1\u7406\uff0c\u53ef\u4ee5\u5c07\u591a\u500b\u7368\u7acb\u7684 store slice \u5408\u4f75\u6210\u4e00\u500b\u3002"}),"\n",(0,s.jsxs)(t.p,{children:["\u5047\u8a2d\u6709\u5169\u500b store slice\uff0c\u4e5f\u5c31\u662f ",(0,s.jsx)(t.code,{children:"create"})," \u88e1\u9762\u7684 function\u3002"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:"export const createSlice1 = (set) => ({\n  value1: 0,\n  increment1: () => set((state) => ({ value1: state.value1 + 1 })),\n});\n"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:"export const createSlice2 = (set) => ({\n  value2: 0,\n  increment2: () => set((state) => ({ value2: state.value2 + 1 })),\n});\n"})}),"\n",(0,s.jsxs)(t.p,{children:["\u7528 ",(0,s.jsx)(t.code,{children:"create"})," \u628a\u5169\u500b function \u5408\u4f75\u6210\u4e00\u500b\u3002"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:'import create from "zustand";\nimport { createSlice1 } from "./slice1";\nimport { createSlice2 } from "./slice2";\n\nexport const useStore = create((set) => ({\n  ...createSlice1(set),\n  ...createSlice2(set),\n}));\n'})}),"\n",(0,s.jsxs)(t.p,{children:["\u9019\u6a23\u5c31\u53ef\u4ee5\u5728 component \u4e2d\u4f7f\u7528 ",(0,s.jsx)(t.code,{children:"useStore"})," \u4f86\u53d6\u5f97\u5169\u500b store slice \u7684\u8cc7\u6599\u548c\u65b9\u6cd5\u3002"]}),"\n",(0,s.jsx)(i.A,{url:"https://codesandbox.io/embed/hwyqlf?fontsize=14&hidenavigation=1&theme=dark",title:"zustand-combine-store",codebasePath:"/src/store/index.js"})]})}function p(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(x,{...e})}):x(e)}},9180:(e,t,n)=>{n.d(t,{A:()=>r});n(6540);var s=n(4848);function r(e){let{url:t,height:n="400px",initialPath:r="%2F",title:a,codebasePath:c}=e;const i=c.replace(/\//g,"%2F");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("iframe",{src:`${t}&module=${i}&initialpath=${r}`,style:{width:"100%",height:n,border:0,borderRadius:"4px",overflow:"hidden"},title:a,allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})}},7970:(e,t,n)=>{n.d(t,{A:()=>i});var s=n(7335),r=n(8478),a=n(6540),c=n(4848);const i=e=>{let{text:t,lang:n="en-US"}=e;return(0,c.jsx)(r.A,{children:()=>{const[e,r]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1);if(!(0,a.useMemo)((()=>"speechSynthesis"in window&&"SpeechSynthesisUtterance"in window),[window]))return null;const l=(0,a.useMemo)((()=>new SpeechSynthesisUtterance(t)),[t]);return l.onend=()=>{o(!1)},(0,c.jsx)("button",{className:"sounds_btn",onClick:async()=>{let t=.8;e&&(t=.5),l.rate=t,l.lang=n,window.speechSynthesis.speak(l),o(!0),r(!e)},disabled:i,children:(0,c.jsx)(s.A,{})})}})}},2904:(e,t,n)=>{n.d(t,{E9:()=>c,eB:()=>i,h4:()=>o});var s=n(8478),r=n(2057),a=(n(6540),n(4848));const c=e=>{let{src:t,width:n="100%",center:s=!1,style:r={}}=e;const c={width:`min(100%,${n})`,display:s?"block":"inline-block",margin:s?"0 auto":"0",borderRadius:"5px",...r};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:t,style:{...c}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]})},i=e=>{let{children:t,width:n="100%",center:c=!1,style:i={}}=e;return(0,a.jsx)(s.A,{children:()=>{const{sm:e}=(0,r.A)(),s={width:`min(100%,${n})`,margin:c?"0 auto":"0",display:"flex",flexDirection:e?"column":"row",gap:"10px",alignItems:"center",...i};return(0,a.jsx)("div",{style:{...s},children:t})}})},o=e=>{let{style:t,width:n="100%",src:s}=e;const r={width:`min(100%,${n})`,flex:1,...t};return(0,a.jsx)("div",{style:{...r},children:(0,a.jsx)(c,{src:s})})}},2057:(e,t,n)=>{n.d(t,{A:()=>a});var s=n(6540);const r=635,a=()=>{const[e,t]=(0,s.useState)({width:window.innerWidth,height:window.innerHeight}),[n,a]=(0,s.useState)(!1);return(0,s.useLayoutEffect)((()=>{const e=()=>{const{innerWidth:e,innerHeight:n}=window,s=e<=r;t({width:e,height:n}),a(s)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]),{sm:n,windowSize:e}}},8453:(e,t,n)=>{n.d(t,{R:()=>c,x:()=>i});var s=n(6540);const r={},a=s.createContext(r);function c(e){const t=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);