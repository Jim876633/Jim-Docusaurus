"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["2814"],{7530:function(e,n,t){t.r(n),t.d(n,{default:()=>b,frontMatter:()=>p,metadata:()=>i,assets:()=>x,toc:()=>j,contentTitle:()=>g});var i=JSON.parse('{"id":"other/notion-linebot","title":"\u3010Other\u3011\u5EFA\u7ACB Line bot \u4E32\u63A5 Notion API","description":"\u6703\u9700\u8981\u4E32\u63A5 Line Bot \u8DDF Notion API\uFF0C\u662F\u56E0\u70BA\u6211\u5E38\u5E38\u5728 FB \u6216 IG \u7B49\u793E\u7FA4\u8EDF\u9AD4\u770B\u5230\u4E00\u4E9B\u4E0D\u932F\u7684\u6587\u7AE0\u6216\u5F71\u7247\uFF0C\u5C31\u6703\u5206\u4EAB\u5230 Line \u7684\u7FA4\u7D44\uFF0C\u7136\u5F8C\u6709\u7A7A\u7684\u6642\u5019\u5C31\u6703\u628A\u5B83\u6574\u7406\u6210 Notion \u7684 DataBase \u4F86\u8A18\u9304\u54EA\u4E9B\u6709\u770B\u904E\u54EA\u4E9B\u9084\u6C92\uFF0C\u4F46\u662F\u9019\u6A23\u7684\u6D41\u7A0B\u5BE6\u5728\u662F\u592A\u9EBB\u7169\u4E86\uFF0C\u800C\u4E14\u6709\u6642\u5019\u9084\u8981\u53BB\u5C0D\u54EA\u4E9B\u5DF2\u7D93\u8907\u88FD\u904E\u4E86\uFF0C\u6240\u4EE5\u5C31\u60F3\u8AAA\u770B\u80FD\u4E0D\u80FD\u7528 Line Bot + Notion API \u4F86\u5E6B\u6211\u505A\u9019\u4EF6\u4E8B\u60C5\u3002","source":"@site/docs/other/notion-linebot.mdx","sourceDirName":"other","slug":"/other/notion-linebot","permalink":"/other/notion-linebot","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"Line","permalink":"/tags/line","description":"Line bot / Line Notify \u4E32\u63A5\u76F8\u95DC\u6587\u7AE0"}],"version":"current","lastUpdatedAt":1718173908000,"frontMatter":{"title":"\u3010Other\u3011\u5EFA\u7ACB Line bot \u4E32\u63A5 Notion API","sidebar_label":"\u5EFA\u7ACB Line bot \u4E32\u63A5 Notion API","tags":["line"]},"sidebar":"tutorialSidebar","previous":{"title":"\u65B0\u5B57\u9AD4 Monaspace\uFF01","permalink":"/other/monaspace"},"next":{"title":"\u5982\u4F55\u5728\u624B\u6A5F\u6216\u5176\u4ED6\u88DD\u7F6E\u986F\u793A\u4F60\u7684 localhost \u7DB2\u9801","permalink":"/other/show-local-on-mobile"}}'),o=t("5893"),r=t("65"),s=t("7620"),l=t("8239");let a=t.p+"assets/images/notion-linebot-1-3267c626080f588bc8d77a32923d92b1.jpg",c=t.p+"assets/images/notion-linebot-2-9e590706c8da55ba86124572b9fdc489.jpg",d=t.p+"assets/images/notion-linebot-3-66256a419d01cd68acb7d1bff515650f.jpg",h=t.p+"assets/images/notion-linebot-4-31e2580d265aca79622c456d7ff07c79.jpg",u=t.p+"assets/images/notion-linebot-5-9247f0c4889b4fdd4722a68075022cc8.jpg",p={title:"\u3010Other\u3011\u5EFA\u7ACB Line bot \u4E32\u63A5 Notion API",sidebar_label:"\u5EFA\u7ACB Line bot \u4E32\u63A5 Notion API",tags:["line"]},g=void 0,x={},j=[{value:"\u5EFA\u7ACB Line Bot",id:"\u5EFA\u7ACB-line-bot",level:2},{value:"\u5EFA\u7ACB Notion integrations",id:"\u5EFA\u7ACB-notion-integrations",level:2},{value:"\u5EFA\u7ACB Server",id:"\u5EFA\u7ACB-server",level:2},{value:"\u88DC\u5145",id:"\u88DC\u5145",level:2}];function f(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["\u6703\u9700\u8981\u4E32\u63A5 Line Bot \u8DDF Notion API\uFF0C\u662F\u56E0\u70BA\u6211\u5E38\u5E38\u5728 FB \u6216 IG \u7B49\u793E\u7FA4\u8EDF\u9AD4\u770B\u5230\u4E00\u4E9B\u4E0D\u932F\u7684\u6587\u7AE0\u6216\u5F71\u7247\uFF0C\u5C31\u6703\u5206\u4EAB\u5230 Line \u7684\u7FA4\u7D44\uFF0C\u7136\u5F8C\u6709\u7A7A\u7684\u6642\u5019\u5C31\u6703\u628A\u5B83\u6574\u7406\u6210 Notion \u7684 DataBase \u4F86\u8A18\u9304\u54EA\u4E9B\u6709\u770B\u904E\u54EA\u4E9B\u9084\u6C92\uFF0C\u4F46\u662F\u9019\u6A23\u7684\u6D41\u7A0B\u5BE6\u5728\u662F\u592A\u9EBB\u7169\u4E86\uFF0C\u800C\u4E14\u6709\u6642\u5019\u9084\u8981\u53BB\u5C0D\u54EA\u4E9B\u5DF2\u7D93\u8907\u88FD\u904E\u4E86\uFF0C\u6240\u4EE5\u5C31\u60F3\u8AAA\u770B\u80FD\u4E0D\u80FD\u7528 ",(0,o.jsx)(s.Z,{color:"green",children:"Line Bot"})," + ",(0,o.jsx)(s.Z,{color:"blue",children:"Notion API"})," \u4F86\u5E6B\u6211\u505A\u9019\u4EF6\u4E8B\u60C5\u3002"]}),"\n",(0,o.jsx)(n.h2,{id:"\u5EFA\u7ACB-line-bot",children:"\u5EFA\u7ACB Line Bot"}),"\n",(0,o.jsxs)(n.p,{children:["\u5EFA\u7ACB Line \u901A\u77E5\u7684\u4ECB\u7D39\u53EF\u4EE5\u53C3\u8003\u6211\u4E4B\u524D\u5BEB\u7684\u6587\u7AE0 ",(0,o.jsx)(n.a,{href:"/other/line-notify",children:"\u5982\u4F55\u4E32\u63A5 Line \u901A\u77E5"}),"\uFF0C\u56E0\u70BA\u9700\u8981\u53BB\u76E3\u807D Line \u7FA4\u7D44\u7684\u8A0A\u606F\uFF0C\u6240\u4EE5\u6211\u9078\u64C7\u7684\u662F\u5EFA\u7ACB Line Bot\uFF0C\u800C\u4E0D\u662F Line Notify\u3002"]}),"\n",(0,o.jsx)(n.h2,{id:"\u5EFA\u7ACB-notion-integrations",children:"\u5EFA\u7ACB Notion integrations"}),"\n",(0,o.jsxs)(n.p,{children:["\u8981\u5728 Notion \u4E32\u63A5 API \u9700\u8981\u5148\u5EFA\u7ACB ",(0,o.jsx)(n.a,{href:"https://developers.notion.com/docs/create-a-notion-integration",children:"Integrations"}),"\uFF0C\u624D\u80FD\u6307\u5B9A\u7279\u5B9A\u7684 Workspace \u4F86\u8DDF Notion API \u4E92\u52D5\uFF0C\u5B98\u65B9\u6587\u4EF6\u7684\u8AAA\u660E\u5BEB\u7684\u5F88\u6E05\u695A\uFF0C\u9019\u908A\u5C31\u5927\u6982\u8AAA\u660E\u4E00\u4E0B\u5EFA\u7F6E\u7684\u6D41\u7A0B\u3002"]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\u5148\u767B\u5165 ",(0,o.jsx)(n.a,{href:"https://www.notion.so/my-integrations",children:"My Integrations"}),"\uFF0C\u7136\u5F8C\u6309\u4E0B New integration \u6309\u9215"]}),"\n"]}),"\n",(0,o.jsx)(l.Ei,{src:a}),"\n",(0,o.jsx)(n.p,{children:"\u70BA\u4F60\u7684 Integrations \u53D6\u4E00\u500B\u540D\u5B57\uFF0C\u9019\u500B\u540D\u5B57\u6703 Workspace \u9078\u53D6 Integrations \u6642\u986F\u793A\u3002"}),"\n",(0,o.jsx)(l.Ei,{src:c}),"\n",(0,o.jsx)(n.p,{children:"\u5EFA\u5B8C\u5F8C\u6703\u5F97\u5230\u4E00\u500B Secrets Token\uFF0C\u9019\u500B Token \u6703\u7528\u5728 Notion API \u7684\u9A57\u8B49\u4E2D\uFF0C\u53EF\u4EE5\u5148\u628A\u5B83\u8907\u88FD\u8D77\u4F86\u3002"}),"\n",(0,o.jsx)(l.Ei,{src:d}),"\n",(0,o.jsxs)(n.p,{children:["\u518D\u4F86\u5C31\u662F\u628A Integrations \u52A0\u5165\u5230 Notion \u88E1\uFF0C\u9032\u5165\u5230\u60F3\u8981\u5B58\u53D6\u7684 Notion Workspace\uFF0C\u9EDE\u64CA\u53F3\u4E0A\u89D2\u7684 \u300C...\u300D \u5716\u793A\uFF0C\u7136\u5F8C\u5728 ",(0,o.jsx)(n.strong,{children:"Add connections"})," \u4E2D\u5C31\u53EF\u4EE5\u770B\u5230\u525B\u525B\u5EFA\u7ACB\u7684 Integrations\uFF0C\u9EDE\u64CA\u5F8C\u5C31\u9023\u7D50\u5B8C\u6210\u4E86\u3002"]}),"\n",(0,o.jsx)(l.Ei,{src:h,width:"500px"}),"\n",(0,o.jsx)(l.Ei,{src:u,width:"500px"}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsx)(n.p,{children:"\u5982\u679C\u6C92\u6709\u5F15\u5165 Notion Integrations \u7684\u8A71\uFF0C\u767C API \u56DE\u50B3\u7684 results \u6703\u662F\u7A7A\u5B57\u4E32"})}),"\n",(0,o.jsx)(n.h2,{id:"\u5EFA\u7ACB-server",children:"\u5EFA\u7ACB Server"}),"\n",(0,o.jsxs)(n.p,{children:["\u4F7F\u7528 Node \u7684\u8A71\uFF0CLine \u5B98\u65B9\u6709\u63D0\u4F9B ",(0,o.jsx)(n.a,{href:"https://github.com/line/line-bot-sdk-nodejs",children:"@line/bot-sdk"}),"\uFF0CNotion \u5B98\u65B9\u6709\u63D0\u4F9B ",(0,o.jsx)(n.a,{href:"https://github.com/makenotion/notion-sdk-js",children:"notion-sdk-js"}),"\uFF0C\u8B93\u6211\u5011\u66F4\u65B9\u4FBF\u7684\u64CD\u4F5C\u9019\u4E9B API\uFF0C\u9019\u908A\u4F7F\u7528 ",(0,o.jsx)(n.a,{href:"https://expressjs.com/",children:"Express"})," \u4F86\u5EFA\u7ACB Server\uFF0C\u4E26\u7528 ",(0,o.jsx)(n.a,{href:"https://www.netlify.com/",children:"Netify"})," \u4F86\u9032\u884C\u90E8\u7F72\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm install express notion-sdk-js @line/bot-sdk\n"})}),"\n",(0,o.jsx)(n.p,{children:"\u4F7F\u7528 Netlify \u6E2C\u8A66\u9700\u8981\u5B89\u88DD"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm install -D netlify-cli\n# \u4F7F\u7528 Express \u9700\u984D\u5916\u5B89\u88DD\nnpm install serverless-http\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\u8A73\u7D30\u7684\u7A0B\u5F0F\u78BC\u53EF\u4EE5\u53C3\u8003 ",(0,o.jsx)(n.a,{href:"https://github.com/Jim876633/line-bot-write-notion/blob/main/api/server.js",children:"line-bot-write-notion"})]}),"\n",(0,o.jsx)(n.h2,{id:"\u88DC\u5145",children:"\u88DC\u5145"}),"\n",(0,o.jsx)(n.p,{children:"\u5728\u5EFA\u7ACB Webhook \u63A5\u6536 Line Bot \u8A0A\u606F\u6642\uFF0C\u7A81\u7136\u60F3\u5230\u5982\u679C\u6709\u4EBA\u76F4\u63A5\u4F7F\u7528\u9019\u500B API \u767C\u8A0A\u606F\u7684\u8A71\uFF0C\u4E0D\u5C31\u4EFB\u4F55\u4EBA\u90FD\u53EF\u4EE5\u5BEB\u5165\u6211\u7684 Notion \u4E86\u55CE\uFF1F"}),"\n",(0,o.jsxs)(n.p,{children:["\u5F8C\u4F86\u627E\u5230 Line \u5B98\u65B9\u6587\u4EF6\u4E2D ",(0,o.jsx)(n.a,{href:"https://developers.line.biz/en/reference/messaging-api/#signature-validation",children:"Signature validation"})," \uFF0C\u624D\u767C\u73FE Line Bot \u6709\u63D0\u4F9B",(0,o.jsx)(n.strong,{children:"\u7C3D\u7AE0"}),"\u7684\u529F\u80FD\uFF0C\u53EF\u4EE5\u7528\u4F86\u9A57\u8B49\u8A0A\u606F\u662F\u5426\u662F\u5F9E Line Bot \u767C\u51FA\u7684\uFF0C\u9019\u6A23\u5C31\u53EF\u4EE5\u907F\u514D\u6709\u4EBA\u76F4\u63A5\u4F7F\u7528\u9019\u500B API \u4E86\u3002"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:'const crypto = require("crypto");\n\nconst signature = crypto\n  .createHmac("SHA256", config.channelSecret)\n  .update(JSON.stringify(req.body))\n  .digest("base64");\n\nif (signature === req.headers["x-line-signature"]) {\n  // \u9A57\u8B49\u6210\u529F\n  // ...do something\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["\u7C3D\u7AE0\u7684\u539F\u7406\u5C31\u662F Line Bot \u767C Webhook \u6703\u5728 Header \u5E36\u4E00\u500B ",(0,o.jsx)(n.code,{children:"X-Line-Signature"})," \u7684\u6B04\u4F4D\uFF0C\u88E1\u9762\u7684\u503C\u5C31\u662F\u7C3D\u7AE0\uFF0C\u800C\u7C3D\u7AE0\u7684\u503C\u662F\u7531 Channel Secret \u8DDF Request Body \u7528 HMAC-SHA256 \u7522\u751F\u7684\uFF0C\u6240\u4EE5\u6211\u5011\u53EA\u8981\u628A Channel Secret \u8DDF Request Body \u7528 HMAC-SHA256 \u7522\u751F\u7C3D\u7AE0\uFF0C\u7136\u5F8C\u8DDF ",(0,o.jsx)(n.code,{children:"X-Line-Signature"})," \u7684\u503C\u6BD4\u5C0D\u662F\u4E0D\u662F\u4E00\u6A23\u7684\uFF0C\u5C31\u53EF\u4EE5\u9A57\u8B49\u8A0A\u606F\u662F\u5426\u662F\u5F9E Line Bot \u767C\u51FA\u7684\u4E86\uFF01"]})]})}function b(e={}){let{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(f,{...e})}):f(e)}},4634:function(e,n,t){t.d(n,{Z:function(){return r}});var i=t(5893);t(7294);var o=t(6735);function r(e){let{children:n,fallback:t}=e;return(0,o.Z)()?(0,i.jsx)(i.Fragment,{children:n?.()}):t??null}},7620:function(e,n,t){t.d(n,{Z:function(){return o}});var i=t(5893);let o=e=>{let{children:n,color:t,block:o,bold:r,style:s}=e,l="";switch(t){case"yellow":default:l="highlight-yellow";break;case"blue":l="highlight-blue";break;case"green":l="highlight-green";break;case"red":l="highlight-red"}let a={fontWeight:r?"bold":"normal",...s};return o?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:`${l} highlight`,style:{...a},children:n}),(0,i.jsx)("p",{})]}):(0,i.jsx)("span",{className:`${l} highlight`,style:{...a},children:n})}},8239:function(e,n,t){t.d(n,{Ei:function(){return s},gO:function(){return l},nI:function(){return a}});var i=t(5893),o=t(4634),r=t(1195);t(7294);let s=e=>{let{src:n,width:t="100%",center:o=!1,style:r={}}=e,s={width:`min(100%,${t})`,display:o?"block":"inline-block",margin:o?"0 auto":"0",borderRadius:"5px",...r};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("img",{src:n,style:{...s}}),(0,i.jsx)("br",{}),(0,i.jsx)("br",{})]})},l=e=>{let{children:n,width:t="100%",center:s=!1,style:l={}}=e;return(0,i.jsx)(o.Z,{children:()=>{let{sm:e}=(0,r.Z)(),o={width:`min(100%,${t})`,margin:s?"0 auto":"0",display:"flex",flexDirection:e?"column":"row",gap:"10px",alignItems:"center",...l};return(0,i.jsx)("div",{style:{...o},children:n})}})},a=e=>{let{style:n,width:t="100%",src:o}=e,r={width:`min(100%,${t})`,flex:1,...n};return(0,i.jsx)("div",{style:{...r},children:(0,i.jsx)(s,{src:o})})}},1195:function(e,n,t){t.d(n,{Z:function(){return o}});var i=t(7294);let o=()=>{let[e,n]=(0,i.useState)({width:window.innerWidth,height:window.innerHeight}),[t,o]=(0,i.useState)(!1);return(0,i.useLayoutEffect)(()=>{let e=()=>{let{innerWidth:e,innerHeight:t}=window;n({width:e,height:t}),o(e<=635)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),{sm:t,windowSize:e}}},65:function(e,n,t){t.d(n,{Z:function(){return l},a:function(){return s}});var i=t(7294);let o={},r=i.createContext(o);function s(e){let n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);