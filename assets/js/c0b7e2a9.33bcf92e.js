"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["3628"],{817:function(e,t,n){n.d(t,{Z:()=>i});var s=n("6019"),r=n("7294");let a={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M892.1 737.8l-110.3-63.7a15.9 15.9 0 00-21.7 5.9l-19.9 34.5c-4.4 7.6-1.8 17.4 5.8 21.8L856.3 800a15.9 15.9 0 0021.7-5.9l19.9-34.5c4.4-7.6 1.7-17.4-5.8-21.8zM760 344a15.9 15.9 0 0021.7 5.9L892 286.2c7.6-4.4 10.2-14.2 5.8-21.8L878 230a15.9 15.9 0 00-21.7-5.9L746 287.8a15.99 15.99 0 00-5.8 21.8L760 344zm174 132H806c-8.8 0-16 7.2-16 16v40c0 8.8 7.2 16 16 16h128c8.8 0 16-7.2 16-16v-40c0-8.8-7.2-16-16-16zM625.9 115c-5.9 0-11.9 1.6-17.4 5.3L254 352H90c-8.8 0-16 7.2-16 16v288c0 8.8 7.2 16 16 16h164l354.5 231.7c5.5 3.6 11.6 5.3 17.4 5.3 16.7 0 32.1-13.3 32.1-32.1V147.1c0-18.8-15.4-32.1-32.1-32.1z"}}]},name:"sound",theme:"filled"};var c=n("4632");let i=r.forwardRef(function(e,t){return r.createElement(c.Z,(0,s.Z)({},e,{ref:t,icon:a}))})},6663:function(e,t,n){n.r(t),n.d(t,{metadata:()=>s,contentTitle:()=>u,default:()=>p,assets:()=>h,toc:()=>m,frontMatter:()=>d});var s=JSON.parse('{"id":"react/zustand","title":"\u3010React\u3011Zustand - Side Project \u72C0\u614B\u7BA1\u7406\u597D\u5E6B\u624B\uFF01","description":"Zustand  \u662F\u4E00\u500B\u8F15\u91CF\u7D1A\u7684\u72C0\u614B\u7BA1\u7406\u5957\u4EF6\uFF0C\u662F\u5FB7\u8A9E state \u7684\u610F\u601D\uFF0C\u539F\u59CB\u78BC\u6C92\u6709\u5F88\u591A\u884C\uFF0C\u537B\u975E\u5E38\u7684\u597D\u7528\u3002\u4E0D\u50CF Redux \u90A3\u6A23\u9700\u8981\u8A2D\u5B9A\u5F88\u591A\u6771\u897F\uFF0C\u53EA\u8981\u4E00\u500B\u7C21\u55AE\u7684 hook \u5C31\u53EF\u4EE5\u4F7F\u7528\uFF0C\u5F88\u9069\u5408\u5728\u505A Side Project \u7684\u6642\u5019\u4F7F\u7528\u3002","source":"@site/docs/react/zustand.mdx","sourceDirName":"react","slug":"/react/zustand","permalink":"/react/zustand","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"React","permalink":"/tags/react"},{"inline":false,"label":"Zustand","permalink":"/tags/zustand"}],"version":"current","lastUpdatedAt":1718173908000,"sidebarPosition":2,"frontMatter":{"title":"\u3010React\u3011Zustand - Side Project \u72C0\u614B\u7BA1\u7406\u597D\u5E6B\u624B\uFF01","sidebar_label":"Zustand","sidebar_position":2,"tags":["react","zustand"]},"sidebar":"tutorialSidebar","previous":{"title":"React router (v6)","permalink":"/react/router"},"next":{"title":"Zustand \u539F\u59CB\u78BC\u89E3\u6790","permalink":"/react/zustand-source-code"}}'),r=n("5893"),a=n("65"),c=n("9366");let i=n.p+"assets/images/npm-trend-6291972ec58caca41840e30ee2b5d563.jpg";var o=n("8208"),l=n("7126");let d={title:"\u3010React\u3011Zustand - Side Project \u72C0\u614B\u7BA1\u7406\u597D\u5E6B\u624B\uFF01",sidebar_label:"Zustand",sidebar_position:2,tags:["react","zustand"]},u=void 0,h={},m=[{value:"\u5B89\u88DD",id:"\u5B89\u88DD",level:2},{value:"\u4F7F\u7528\u65B9\u6CD5",id:"\u4F7F\u7528\u65B9\u6CD5",level:2},{value:"Set State",id:"set-state",level:2},{value:"\u5408\u4F75\u591A\u500B store",id:"\u5408\u4F75\u591A\u500B-store",level:2}];function x(e){let t={admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:["Zustand ",(0,r.jsx)(l.Z,{text:"zustand",lang:"de-AT"})," \u662F\u4E00\u500B\u8F15\u91CF\u7D1A\u7684\u72C0\u614B\u7BA1\u7406\u5957\u4EF6\uFF0C\u662F\u5FB7\u8A9E state \u7684\u610F\u601D\uFF0C\u539F\u59CB\u78BC\u6C92\u6709\u5F88\u591A\u884C\uFF0C\u537B\u975E\u5E38\u7684\u597D\u7528\u3002\u4E0D\u50CF Redux \u90A3\u6A23\u9700\u8981\u8A2D\u5B9A\u5F88\u591A\u6771\u897F\uFF0C\u53EA\u8981\u4E00\u500B\u7C21\u55AE\u7684 hook \u5C31\u53EF\u4EE5\u4F7F\u7528\uFF0C\u5F88\u9069\u5408\u5728\u505A Side Project \u7684\u6642\u5019\u4F7F\u7528\u3002"]}),"\n",(0,r.jsx)(c.Ei,{src:i}),"\n",(0,r.jsx)(t.p,{children:"\u4EE5\u5E38\u898B\u7684 React \u72C0\u614B\u7BA1\u7406\u7684\u5957\u4EF6\u4F86\u6BD4\u8F03\uFF0C\u53EF\u4EE5\u770B\u5230 react-redux \u4F9D\u820A\u662F\u6700\u591A\u4EBA\u4F7F\u7528\u7684\uFF0C\u4E0D\u904E zustand \u6BCF\u9031\u4E5F\u6709\u5C07\u8FD1 300 \u842C\u7684\u4E0B\u8F09\u91CF\uFF0C\u4F7F\u7528\u4EBA\u6578\u4E5F\u662F\u5F88\u591A\u7684\u3002"}),"\n",(0,r.jsx)(t.h2,{id:"\u5B89\u88DD",children:"\u5B89\u88DD"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-bash",children:"npm install zustand\n"})}),"\n",(0,r.jsx)(t.h2,{id:"\u4F7F\u7528\u65B9\u6CD5",children:"\u4F7F\u7528\u65B9\u6CD5"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:["\u5148\u7528 ",(0,r.jsx)(t.code,{children:"create"})," \u4F86\u5EFA\u7ACB\u4E00\u500B store"]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:'import create from "zustand";\n\nconst useCountStore = create((set) => ({\n  count: 0,\n  increment: () => set((state) => ({ count: state.count + 1 })),\n  decrement: () => set((state) => ({ count: state.count - 1 })),\n}));\n'})}),"\n",(0,r.jsxs)(t.ol,{start:"2",children:["\n",(0,r.jsx)(t.li,{children:"\u5728 component \u4E2D\u4F7F\u7528"}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-tsx",children:"function Counter() {\n  const { count, increment, decrement } = useCountStore();\n\n  return (\n    <div>\n      <button onClick={decrement}>-</button>\n      <h1>{count}</h1>\n      <button onClick={increment}>+</button>\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsx)(o.Z,{url:"https://codesandbox.io/embed/7d26zr?fontsize=14&hidenavigation=1&theme=dark",title:"zustand-basic",codebasePath:"/src/store.js"}),"\n",(0,r.jsxs)(t.p,{children:["\u57FA\u672C\u4E0A\u5C31\u662F\u9019\u6A23\uFF0C\u662F\u4E0D\u662F\u975E\u5E38\u65B9\u4FBF\u4F7F\u7528\uFF01\u4E00\u500B ",(0,r.jsx)(t.code,{children:"create"})," \u5C31\u53EF\u4EE5\u5EFA\u7ACB\u4E00\u500B store\uFF0C\u7136\u5F8C\u5728 component \u4E2D\u4F7F\u7528 hook \u5C31\u53EF\u4EE5\u53D6\u5F97 store \u7684\u8CC7\u6599\u548C\u65B9\u6CD5\u3002"]}),"\n",(0,r.jsx)(t.p,{children:"\u4E0B\u9762\u4F86\u8A73\u7D30\u7684\u4ECB\u7D39\u4E00\u4E0B zustand \u7684\u4F7F\u7528\u65B9\u6CD5\u53CA\u5E38\u7528\u7684\u529F\u80FD\u3002"}),"\n",(0,r.jsx)(t.h2,{id:"set-state",children:"Set State"}),"\n",(0,r.jsxs)(t.p,{children:["\u5728 zustand \u4E2D\uFF0C\u8981\u6539\u8B8A state \u7684\u503C\uFF0C\u53EF\u4EE5\u5728 ",(0,r.jsx)(t.code,{children:"create"})," \u4E2D\u4F7F\u7528 ",(0,r.jsx)(t.code,{children:"set"})," \u65B9\u6CD5\uFF0C\u9019\u500B\u65B9\u6CD5\u6703\u63A5\u6536\u4E00\u500B callback function\uFF0C\u6703\u6536\u5230\u76EE\u524D\u7684 state\uFF0C\u518D\u56DE\u50B3\u4E00\u500B\u65B0\u7684 state\u3002"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-jsx",metastring:"{5-6}",children:'import create from "zustand";\n\nconst useCountStore = create((set) => ({\n  count: 0,\n  increment: () => set((state) => ({ count: state.count + 1 })),\n  decrement: () => set((state) => ({ count: state.count - 1 })),\n}));\n'})}),"\n",(0,r.jsx)(t.p,{children:"\u4F60\u53EF\u80FD\u6703\u6CE8\u610F\u5230\u4ED6\u662F\u4F7F\u7528 mutable \u7684\u65B9\u5F0F\u4F86\u6539\u8B8A state\uFF0C\u56E0\u70BA zustand \u8DDF redux \u4E00\u6A23\u90FD\u6703\u81EA\u52D5\u5E6B\u4F60\u8655\u7406 immutable \u7684\u554F\u984C\uFF0C\u6240\u4EE5\u53EF\u4EE5\u76F4\u63A5\u6539\u8B8A state \u7684\u503C\u3002"}),"\n",(0,r.jsxs)(t.admonition,{type:"warning",children:[(0,r.jsx)(t.p,{children:"\u96D6\u7136 zustand \u53EF\u4EE5\u76F4\u63A5\u6539\u8B8A state\uFF0C\u4F46\u662F\u53EA\u9650\u65BC\u7B2C\u4E00\u5C64\u7684\u503C\uFF0C\u5982\u679C\u662F\u5DE2\u72C0\u7684\u7269\u4EF6\u6216\u9663\u5217\uFF0C\u9084\u662F\u8981\u4F7F\u7528 immutable \u7684\u65B9\u5F0F\u4F86\u6539\u8B8A\u3002"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-jsx",metastring:"{7}",children:'import create from "zustand";\n\nconst useCountStore = create((set) => ({\n  count: { value: 0 },\n  increment: () =>\n    set((state) => ({\n      count: { ...state.count, vlaue: state.count.value + 1 },\n    })),\n}));\n'})})]}),"\n",(0,r.jsx)(t.h2,{id:"\u5408\u4F75\u591A\u500B-store",children:"\u5408\u4F75\u591A\u500B store"}),"\n",(0,r.jsx)(t.p,{children:"\u7576\u5C08\u6848\u8D8A\u4F86\u8D8A\u5927\uFF0Cstore \u6703\u8D8A\u5EFA\u8D8A\u591A\uFF0C\u70BA\u4E86\u65B9\u4FBF\u7BA1\u7406\uFF0C\u53EF\u4EE5\u5C07\u591A\u500B\u7368\u7ACB\u7684 store slice \u5408\u4F75\u6210\u4E00\u500B\u3002"}),"\n",(0,r.jsxs)(t.p,{children:["\u5047\u8A2D\u6709\u5169\u500B store slice\uFF0C\u4E5F\u5C31\u662F ",(0,r.jsx)(t.code,{children:"create"})," \u88E1\u9762\u7684 function\u3002"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-jsx",children:"export const createSlice1 = (set) => ({\n  value1: 0,\n  increment1: () => set((state) => ({ value1: state.value1 + 1 })),\n});\n"})}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-jsx",children:"export const createSlice2 = (set) => ({\n  value2: 0,\n  increment2: () => set((state) => ({ value2: state.value2 + 1 })),\n});\n"})}),"\n",(0,r.jsxs)(t.p,{children:["\u7528 ",(0,r.jsx)(t.code,{children:"create"})," \u628A\u5169\u500B function \u5408\u4F75\u6210\u4E00\u500B\u3002"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-jsx",children:'import create from "zustand";\nimport { createSlice1 } from "./slice1";\nimport { createSlice2 } from "./slice2";\n\nexport const useStore = create((set) => ({\n  ...createSlice1(set),\n  ...createSlice2(set),\n}));\n'})}),"\n",(0,r.jsxs)(t.p,{children:["\u9019\u6A23\u5C31\u53EF\u4EE5\u5728 component \u4E2D\u4F7F\u7528 ",(0,r.jsx)(t.code,{children:"useStore"})," \u4F86\u53D6\u5F97\u5169\u500B store slice \u7684\u8CC7\u6599\u548C\u65B9\u6CD5\u3002"]}),"\n",(0,r.jsx)(o.Z,{url:"https://codesandbox.io/embed/hwyqlf?fontsize=14&hidenavigation=1&theme=dark",title:"zustand-combine-store",codebasePath:"/src/store/index.js"})]})}function p(e={}){let{wrapper:t}={...(0,a.a)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(x,{...e})}):x(e)}},8208:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(5893);function r(e){let{url:t,height:n="400px",initialPath:r="%2F",title:a,codebasePath:c}=e,i=c.replace(/\//g,"%2F");return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("iframe",{src:`${t}&module=${i}&initialpath=${r}`,style:{width:"100%",height:n,border:0,borderRadius:"4px",overflow:"hidden"},title:a,allow:"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking",sandbox:"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})}n(7294)},7126:function(e,t,n){n.d(t,{Z:function(){return i}});var s=n(5893),r=n(817),a=n(144),c=n(7294);let i=e=>{let{text:t,lang:n="en-US"}=e;return(0,s.jsx)(a.Z,{children:()=>{let[e,a]=(0,c.useState)(!1),[i,o]=(0,c.useState)(!1);if(!(0,c.useMemo)(()=>"speechSynthesis"in window&&"SpeechSynthesisUtterance"in window,[window]))return null;let l=(0,c.useMemo)(()=>new SpeechSynthesisUtterance(t),[t]),d=async()=>{let t=.8;e&&(t=.5),l.rate=t,l.lang=n,window.speechSynthesis.speak(l),o(!0),a(!e)};return l.onend=()=>{o(!1)},(0,s.jsx)("button",{className:"sounds_btn",onClick:d,disabled:i,children:(0,s.jsx)(r.Z,{})})}})}},9366:function(e,t,n){n.d(t,{Ei:function(){return c},gO:function(){return i},nI:function(){return o}});var s=n(5893),r=n(144),a=n(1094);n(7294);let c=e=>{let{src:t,width:n="100%",center:r=!1,style:a={}}=e,c={width:`min(100%,${n})`,display:r?"block":"inline-block",margin:r?"0 auto":"0",borderRadius:"5px",...a};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:t,style:{...c}}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})},i=e=>{let{children:t,width:n="100%",center:c=!1,style:i={}}=e;return(0,s.jsx)(r.Z,{children:()=>{let{sm:e}=(0,a.Z)(),r={width:`min(100%,${n})`,margin:c?"0 auto":"0",display:"flex",flexDirection:e?"column":"row",gap:"10px",alignItems:"center",...i};return(0,s.jsx)("div",{style:{...r},children:t})}})},o=e=>{let{style:t,width:n="100%",src:r}=e,a={width:`min(100%,${n})`,flex:1,...t};return(0,s.jsx)("div",{style:{...a},children:(0,s.jsx)(c,{src:r})})}},1094:function(e,t,n){n.d(t,{Z:function(){return a}});var s=n(7294);let r=635,a=()=>{let[e,t]=(0,s.useState)({width:window.innerWidth,height:window.innerHeight}),[n,a]=(0,s.useState)(!1);return(0,s.useLayoutEffect)(()=>{let e=()=>{let{innerWidth:e,innerHeight:n}=window;t({width:e,height:n}),a(e<=r)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),{sm:n,windowSize:e}}},65:function(e,t,n){n.d(t,{Z:function(){return i},a:function(){return c}});var s=n(7294);let r={},a=s.createContext(r);function c(e){let t=s.useContext(a);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(a.Provider,{value:t},e.children)}}}]);