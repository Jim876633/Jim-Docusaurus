"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["7372"],{5985:function(e,n,s){s.r(n),s.d(n,{default:()=>u,frontMatter:()=>o,metadata:()=>l,assets:()=>m,toc:()=>p,contentTitle:()=>d});var l=JSON.parse('{"id":"npm/npm-publish","title":"\u3010Npm\u3011\u4F7F\u7528 semantic-release \u81EA\u52D5\u767C\u5E03 npm \u5957\u4EF6","description":"\u767C\u4F48\u53CA\u66F4\u65B0 npm \u5957\u4EF6\uFF0C\u6703\u9700\u8981\u5E7E\u500B\u6B65\u9A5F\uFF1A","source":"@site/docs/npm/npm-publish.mdx","sourceDirName":"npm","slug":"/npm/npm-publish","permalink":"/npm/npm-publish","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"NPM","permalink":"/tags/npm"},{"inline":false,"label":"CI/CD","permalink":"/tags/cicd"}],"version":"current","lastUpdatedAt":1718173908000,"frontMatter":{"title":"\u3010Npm\u3011\u4F7F\u7528 semantic-release \u81EA\u52D5\u767C\u5E03 npm \u5957\u4EF6","sidebar_label":"\u4F7F\u7528 semantic-release \u81EA\u52D5\u767C\u5E03 npm \u5957\u4EF6","tags":["npm","cicd"]},"sidebar":"tutorialSidebar","previous":{"title":"npm \u548C npx \u7684\u5DEE\u5225\uFF1F","permalink":"/npm/npm-npx"},"next":{"title":"package.json \u8DDF package-lock.json \u7684\u5DEE\u5225","permalink":"/npm/package"}}'),i=s("5893"),a=s("65"),r=s("7620"),t=s("8239");let c=s.p+"assets/images/npm-publish-1-4995ce9afbaabae52dc982915941c674.jpg",h=s.p+"assets/images/npm-publish-2-f60ec805f25c7252c6533db3c801b787.jpg",o={title:"\u3010Npm\u3011\u4F7F\u7528 semantic-release \u81EA\u52D5\u767C\u5E03 npm \u5957\u4EF6",sidebar_label:"\u4F7F\u7528 semantic-release \u81EA\u52D5\u767C\u5E03 npm \u5957\u4EF6",tags:["npm","cicd"]},d="\u4F7F\u7528 semantic-release \u81EA\u52D5\u767C\u5E03 npm \u5957\u4EF6",m={},p=[{value:"\u624B\u52D5\u767C\u5E03",id:"\u624B\u52D5\u767C\u5E03",level:2},{value:"\u4FEE\u6539\u7248\u672C\u865F",id:"\u4FEE\u6539\u7248\u672C\u865F",level:3},{value:"\u767C\u4F48\u5957\u4EF6\u5230 npm",id:"\u767C\u4F48\u5957\u4EF6\u5230-npm",level:3},{value:"\u5C07\u6700\u65B0\u7684 commit \u52A0\u4E0A tag",id:"\u5C07\u6700\u65B0\u7684-commit-\u52A0\u4E0A-tag",level:3},{value:"\u66F4\u65B0 changelog",id:"\u66F4\u65B0-changelog",level:3},{value:"\u66F4\u65B0 release note",id:"\u66F4\u65B0-release-note",level:3},{value:"semantic-release \u767C\u5E03",id:"semantic-release-\u767C\u5E03",level:2},{value:"\u5B89\u88DD\u5957\u4EF6",id:"\u5B89\u88DD\u5957\u4EF6",level:3},{value:"\u8A2D\u5B9A .releaserc.json",id:"\u8A2D\u5B9A-releasercjson",level:3},{value:"\u8A2D\u5B9A npm configuration",id:"\u8A2D\u5B9A-npm-configuration",level:3},{value:"\u57F7\u884C semantic-release",id:"\u57F7\u884C-semantic-release",level:3},{value:"\u8A2D\u5B9A CI/CD",id:"\u8A2D\u5B9A-cicd",level:2},{value:"\u53C3\u8003\u8CC7\u6599",id:"\u53C3\u8003\u8CC7\u6599",level:2}];function g(e){let n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"\u4F7F\u7528-semantic-release-\u81EA\u52D5\u767C\u5E03-npm-\u5957\u4EF6",children:"\u4F7F\u7528 semantic-release \u81EA\u52D5\u767C\u5E03 npm \u5957\u4EF6"})}),"\n",(0,i.jsx)(n.p,{children:"\u767C\u4F48\u53CA\u66F4\u65B0 npm \u5957\u4EF6\uFF0C\u6703\u9700\u8981\u5E7E\u500B\u6B65\u9A5F\uFF1A"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u4FEE\u6539 ",(0,i.jsx)(n.code,{children:"package.json"})," \u53CA ",(0,i.jsx)(n.code,{children:"package-lock.json"})," \u7684\u7248\u672C\u865F"]}),"\n",(0,i.jsxs)(n.li,{children:["\u57F7\u884C ",(0,i.jsx)(n.code,{children:"npm publish"})," \u4F86\u767C\u4F48\u5957\u4EF6"]}),"\n",(0,i.jsx)(n.li,{children:"\u5C07\u65B0\u7248\u672C\u7684 commit \u62BC\u4E0A tag"}),"\n",(0,i.jsxs)(n.li,{children:["\u66F4\u65B0 ",(0,i.jsx)(n.code,{children:"CHANGELOG.md"})," \u4F86\u8A18\u9304\u7248\u672C\u66F4\u65B0\u7684\u5167\u5BB9"]}),"\n",(0,i.jsx)(n.li,{children:"\u66F4\u65B0 release note \u4F86\u544A\u77E5\u4F7F\u7528\u8005\u6709\u65B0\u7248\u672C\u7684\u5957\u4EF6"}),"\n"]}),"\n","\n",(0,i.jsx)(n.h2,{id:"\u624B\u52D5\u767C\u5E03",children:"\u624B\u52D5\u767C\u5E03"}),"\n",(0,i.jsx)(n.p,{children:"\u5148\u4F86\u770B\u770B\u5982\u679C\u662F\u624B\u52D5\u767C\u5E03\u7684\u8A71\uFF0C\u6703\u9700\u8981\u505A\u54EA\u4E9B\u4E8B\u60C5\u3002"}),"\n",(0,i.jsx)(n.h3,{id:"\u4FEE\u6539\u7248\u672C\u865F",children:"\u4FEE\u6539\u7248\u672C\u865F"}),"\n",(0,i.jsxs)(n.p,{children:["\u9664\u4E86\u624B\u52D5\u4FEE\u6539 ",(0,i.jsx)(n.code,{children:"package.json"})," \u53CA ",(0,i.jsx)(n.code,{children:"package-lock.json"})," \u7684\u7248\u672C\u865F\u4E4B\u5916\uFF0C\u4E5F\u53EF\u4EE5\u4F7F\u7528 ",(0,i.jsx)(n.code,{children:"npm version"})," \u4F86\u66F4\u65B0\u7248\u672C\u865F\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm version <\u7248\u672C\u865F>\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u9019\u6A23\u6703\u81EA\u52D5\u66F4\u65B0\u5169\u500B\u6A94\u6848\u7684\u7248\u672C\u865F\uFF0C\u4E26\u4E14\u7522\u751F\u4E00\u500B commit \u53CA tag\u3002"}),"\n",(0,i.jsx)(t.Ei,{src:c}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679C\u4E0D\u60F3\u624B\u52D5\u6253\u6578\u5B57\uFF0C\u53EF\u4EE5\u4F7F\u7528 major, minor, patch \u4F86\u66F4\u65B0\u7248\u672C\u865F\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm version major # \u4E3B\u8981\u7248\u672C\u865F 1.0.0 -> 2.0.0\nnpm version minor # \u6B21\u8981\u7248\u672C\u865F 1.0.0 -> 1.1.0\nnpm version patch # \u4FEE\u8A02\u7248\u672C\u865F 1.0.0 -> 1.0.1\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"\u5C0F\u77E5\u8B58",type:"info",children:(0,i.jsxs)(n.p,{children:["\u5982\u679C ",(0,i.jsx)(n.code,{children:"package.json"})," \u8DDF ",(0,i.jsx)(n.code,{children:"package-lock.json"})," \u7684\u7248\u672C\u865F\u4E0D\u4E00\u81F4\uFF0C\u5728 npm install \u7684\u6642\u5019\u6703\u5F37\u5236\u66F4\u65B0 ",(0,i.jsx)(n.code,{children:"package-lock.json"})," \u7684\u7248\u672C\u865F\u8DDF ",(0,i.jsx)(n.code,{children:"package.json"})," \u4E00\u81F4\u3002"]})}),"\n",(0,i.jsx)(n.h3,{id:"\u767C\u4F48\u5957\u4EF6\u5230-npm",children:"\u767C\u4F48\u5957\u4EF6\u5230 npm"}),"\n",(0,i.jsx)(n.p,{children:"\u9996\u5148\u8981\u5148\u767B\u5165 npm"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm login\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u7136\u5F8C\u57F7\u884C ",(0,i.jsx)(n.code,{children:"npm publish"})," \u4F86\u767C\u4F48\u5957\u4EF6\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm publish\n"})}),"\n",(0,i.jsx)(n.h3,{id:"\u5C07\u6700\u65B0\u7684-commit-\u52A0\u4E0A-tag",children:"\u5C07\u6700\u65B0\u7684 commit \u52A0\u4E0A tag"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git tag v1.0.0\ngit push origin v1.0.0\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4E0B Tag \u7684\u65B9\u6CD5\u53EF\u4EE5\u53C3\u8003 ",(0,i.jsx)(n.a,{href:"https:/jimhuang.dev/git/tag",children:"git tag"})]}),"\n",(0,i.jsx)(n.h3,{id:"\u66F4\u65B0-changelog",children:"\u66F4\u65B0 changelog"}),"\n",(0,i.jsxs)(n.p,{children:["\u66F4\u65B0 ",(0,i.jsx)(n.code,{children:"CHANGELOG.md"})," \u4F86\u8A18\u9304\u7248\u672C\u66F4\u65B0\u7684\u5167\u5BB9"]}),"\n",(0,i.jsxs)(n.p,{children:["changelog \u7684\u898F\u7BC4\u53CA\u4ECB\u7D39\u53EF\u4EE5\u53C3\u8003",(0,i.jsx)(n.a,{href:"https://keepachangelog.com/zh-TW/1.1.0/",children:"\u5982\u4F55\u7DAD\u8B77\u66F4\u65B0\u65E5\u8A8C"})]}),"\n",(0,i.jsx)(n.h3,{id:"\u66F4\u65B0-release-note",children:"\u66F4\u65B0 release note"}),"\n",(0,i.jsx)(n.p,{children:"\u5728 github \u4E0A release note \u901A\u5E38\u6703\u9078\u64C7\u4E00\u500B tag \u4F86\u767C\u5E03\uFF0C\u4E26\u4E14\u5728 release note \u4E0A\u5BEB\u4E0A\u7248\u672C\u66F4\u65B0\u7684\u5167\u5BB9\u3002"}),"\n",(0,i.jsxs)(n.admonition,{title:"changelog \u53CA release note \u7684\u5DEE\u7570",type:"info",children:[(0,i.jsx)(n.p,{children:"changelog \u4E3B\u8981\u662F\u7D66\u958B\u767C\u8005\u770B\u7684\uFF0C\u5167\u5BB9\u6703\u6BD4\u8F03\u8A73\u7D30\uFF0C\u4E14\u8F03\u591A\u6280\u8853\u7D30\u7BC0\uFF0C\u800C release note \u662F\u7D66\u4F7F\u7528\u8005\u770B\u7684\uFF0C\u6982\u8FF0\u7248\u672C\u66F4\u65B0\u7684\u5167\u5BB9\u3002"}),(0,i.jsx)(n.p,{children:"\u4E0D\u904E\u5927\u90E8\u5206\u5957\u4EF6\u7684 changelog \u8DDF release note \u90FD\u6C92\u6709\u5340\u5206\u7684\u90A3\u9EBC\u6E05\u695A\uFF0C\u6709\u6642\u5019\u9084\u6703\u770B\u5230 release note \u76F4\u63A5\u5C31\u653E changelog \u7684\u9023\u7D50\u3002"})]}),"\n",(0,i.jsx)(n.h2,{id:"semantic-release-\u767C\u5E03",children:"semantic-release \u767C\u5E03"}),"\n",(0,i.jsxs)(n.p,{children:["\u770B\u5B8C\u4E86\u624B\u52D5\u767C\u5E03\u7684\u6B65\u9A5F\uFF0C\u5176\u5BE6\u8AAA\u591A\u4E5F\u4E0D\u591A\uFF0C\u4E0D\u904E\u5982\u679C\u6BCF\u6B21\u767C\u4F48\u65B0\u7248\u672C\u90FD\u8981\u624B\u52D5\u505A\u9019\u4E9B\u4E8B\u60C5\uFF0C\u9084\u662F\u6703\u89BA\u5F97\u6709\u9EDE\u9EBB\u7169\u3002\u800C\u4E14\u6709\u6642\u5019\u4E5F\u5BB9\u6613\u5FD8\u8A18\u66F4\u65B0\u7248\u672C\u865F\uFF0C\u6216\u8005\u7248\u672C\u865F\u7684\u66F4\u65B0\u4E0D\u7B26\u5408 ",(0,i.jsx)(n.a,{href:"https://semver.org/",children:"SemVer"})," \u7684\u898F\u7BC4\u7B49\u7B49\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u800C semantic-release \u5C31\u53EF\u4EE5\u4E00\u6B21\u89E3\u6C7A\u9019\u4E9B\u554F\u984C\uFF01\u57FA\u672C\u4E0A\u4F60\u8A2D\u5B9A\u597D\u4E4B\u5F8C\uFF0C\u53EA\u9700\u8981\u628A\u6B64\u6B21\u66F4\u65B0\u7684 branch merge \u5230 main branch\uFF0C\u7136\u5F8C push \u5230\u9060\u7AEF\uFF0Csemantic-release \u5C31\u53EF\u4EE5\u4E00\u6B21\u628A\u4E0A\u9762\u6240\u6709\u7684\u6B65\u9A5F\u90FD\u5E6B\u4F60\u505A\u5B8C\uFF01\u662F\u4E0D\u662F\u5F88\u5FC3\u52D5\u554A\uFF01\u8B93\u6211\u5011\u4F86\u770B\u770B\u600E\u9EBC\u8A2D\u5B9A\u5427\uFF01"}),"\n",(0,i.jsx)(n.h3,{id:"\u5B89\u88DD\u5957\u4EF6",children:"\u5B89\u88DD\u5957\u4EF6"}),"\n",(0,i.jsxs)(n.p,{children:["\u9996\u5148\u5148\u8DDF\u8457",(0,i.jsx)(n.a,{href:"https://semantic-release.gitbook.io/semantic-release/usage/installation#installation",children:"\u5B98\u7DB2"}),"\u5B89\u88DD semantic-release"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install -D semantic-release\n"})}),"\n",(0,i.jsx)(n.p,{children:"semantic-release \u5E95\u4E0B\u6709\u5F88\u591A\u7684 plugin \u4F86\u5206\u5225\u8655\u7406\u4E0A\u9762\u4E0D\u540C\u7684\u6B65\u9A5F\uFF0C\u5728\u4F60\u5B89\u88DD semantic-release \u6642\uFF0C\u6703\u81EA\u52D5\u5E6B\u4F60\u5B89\u88DD\u4E00\u4E9B\u9810\u8A2D\u7684 plugin\uFF1A"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/semantic-release/commit-analyzer",children:"@semantic-release/commit-analyzer"}),"\uFF1A\u5206\u6790 commit message \u4F86\u6C7A\u5B9A\u7248\u672C\u865F\u53CA\u767C\u4F48\u7684\u985E\u578B"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/semantic-release/release-notes-generator",children:"@semantic-release/release-notes-generator"}),"\uFF1A\u6839\u64DA commit message \u4F86\u7522\u751F release note \u7684\u5167\u5BB9\u50B3\u7D66\u5176\u4ED6 plugin"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/semantic-release/npm",children:"@semantic-release/npm"}),"\uFF1A\u767C\u4F48 npm \u5957\u4EF6"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/semantic-release/github",children:"@semantic-release/github"}),"\uFF1A\u66F4\u65B0 release note \u5230 github"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"\u9664\u4E86\u9810\u8A2D plugin \u5916\uFF0C\u5982\u679C\u9700\u8981\u58D3 tag \u53CA\u5EFA\u7ACB changelog\uFF0C\u9084\u9700\u8981\u984D\u5916\u5B89\u88DD\uFF1A"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install @semantic-release/changelog @semantic-release/git -D\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/semantic-release/changelog",children:"@semantic-release/changelog"}),"\uFF1A\u6839\u64DA release note \u4F86\u5EFA\u7ACB/\u66F4\u65B0 changelog"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/semantic-release/git",children:"@semantic-release/git"}),"\uFF1A\u628A\u65B0\u7248\u672C\u7684 commit \u58D3\u4E0A tag\uFF0C\u4E26\u4E14 push \u5230\u9060\u7AEF"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsx)(n.p,{children:"\u7528 semantic-release \u5EFA\u7ACB\u7684 changelog \u6703\u8DDF release note \u4E00\u6A23\u3002"})}),"\n",(0,i.jsx)(n.h3,{id:"\u8A2D\u5B9A-releasercjson",children:"\u8A2D\u5B9A .releaserc.json"}),"\n",(0,i.jsx)(n.p,{children:"\u53EF\u4EE5\u8A2D\u5B9A .releaserc.json \u4F86\u5BA2\u88FD\u5316 semantic-release \u7684\u8A2D\u5B9A\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "branches": ["main"],\n  "plugins": [\n    [\n      "@semantic-release/commit-analyzer",\n      {\n        "preset": "angular",\n        "releaseRules": [{ "type": "chore", "release": "patch" }]\n      }\n    ],\n    "@semantic-release/release-notes-generator",\n    "@semantic-release/changelog",\n    "@semantic-release/npm",\n    "@semantic-release/github",\n    "@semantic-release/git"\n  ]\n}\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"branches\uFF1A\u8A2D\u5B9A\u8981\u89F8\u767C semantic-release \u7684 branch"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["\u5728 plugin \u88E1\u7684 ",(0,i.jsx)(n.em,{children:"commit-analyzer"})," \u53EF\u4EE5\u8A2D\u5B9A commit message \u7684\u5206\u6790\u683C\u5F0F\uFF0C\u9810\u8A2D\u4F7F\u7528\u7684\u662F Angular \u63D0\u51FA\u7684 ",(0,i.jsx)(n.a,{href:"https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines",children:"commit \u898F\u7BC4"}),"\uFF0C\u4E5F\u53EF\u4EE5\u81EA\u5DF1\u5BA2\u88FD\u5316\u3002\u9664\u4E86 angluar \u5916\uFF0C\u9084\u6709\u5176\u4ED6\u7684 preset \u53EF\u4EE5\u9078\u64C7\uFF0C\u4F8B\u5982 eslint, atom, ember \u7B49\u7B49\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u4E0B\u9762\u662F\u5957\u4EF6\u5167\u7684\u8A2D\u5B9A\u6A94\uFF0C\u53EF\u4EE5\u770B\u5230\u9810\u8A2D\u7684 releaseRules\u3002"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",metastring:'title="@semantic-release/commit-analyzer/lib/default-release-rules.js"',children:'export default [\n  { breaking: true, release: "major" },\n  { revert: true, release: "patch" },\n  // Angular\n  { type: "feat", release: "minor" },\n  { type: "fix", release: "patch" },\n  { type: "perf", release: "patch" },\n  // Atom\n  { emoji: ":racehorse:", release: "patch" },\n  { emoji: ":bug:", release: "patch" },\n  { emoji: ":penguin:", release: "patch" },\n  { emoji: ":apple:", release: "patch" },\n  { emoji: ":checkered_flag:", release: "patch" },\n  // Ember\n  { tag: "BUGFIX", release: "patch" },\n  { tag: "FEATURE", release: "minor" },\n  { tag: "SECURITY", release: "patch" },\n  // ESLint\n  { tag: "Breaking", release: "major" },\n  { tag: "Fix", release: "patch" },\n  { tag: "Update", release: "minor" },\n  { tag: "New", release: "minor" },\n  // Express\n  { component: "perf", release: "patch" },\n  { component: "deps", release: "patch" },\n  // JSHint\n  { type: "FEAT", release: "minor" },\n  { type: "FIX", release: "patch" },\n];\n'})}),"\n",(0,i.jsxs)(n.p,{children:["angular \u9810\u8A2D\u7684\u53EA\u6709 ",(0,i.jsx)(n.code,{children:"feat"}),"\u3001",(0,i.jsx)(n.code,{children:"fix"}),"\u3001",(0,i.jsx)(n.code,{children:"perf"})," \u6703\u88AB\u8996\u70BA release \u7684 commit\uFF0C\u5982\u679C\u6709\u5176\u4ED6\u7684 commit type \u4E5F\u60F3\u8981\u88AB\u8996\u70BA release \u7684\u8A71\uFF0C\u5C31\u53EF\u4EE5\u900F\u904E releaseRules \u4F86\u984D\u5916\u7684\u8A2D\u5B9A\u3002"]}),"\n",(0,i.jsx)(n.admonition,{title:"\u6CE8\u610F\u4E8B\u9805",type:"warning",children:(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\u96D6\u7136 plugin \u6709\u9810\u8A2D 4 \u500B plugin\uFF0C\u4F46\u662F\u53EA\u8981\u6709\u65B0\u589E ",(0,i.jsx)(n.code,{children:".releaserc.json"})," \u88E1\u9762\u7684 plugin\uFF0C\u5C31\u9700\u8981\u628A\u6240\u6709\u7684 plugin \u90FD\u52A0\u4E0A\u53BB\uFF0C\u56E0\u70BA\u65B0\u589E\u7684 plugin \u6B04\u4F4D\u6703\u8986\u84CB\u6389\u9810\u8A2D\u7684 plugin\u3002"]}),"\n",(0,i.jsx)(n.li,{children:"plugin \u7684\u9806\u5E8F\u4E5F\u5F88\u91CD\u8981\uFF0C\u56E0\u70BA semantic-release \u6703\u4F9D\u7167 plugin \u7684\u9806\u5E8F\u4F86\u57F7\u884C\u7684\uFF0C\u9806\u5E8F\u6703\u662F\ncommit-analyzer -> release-notes-generator -> changelog -> npm/ github / git\u3002"}),"\n"]})}),"\n",(0,i.jsx)(n.h3,{id:"\u8A2D\u5B9A-npm-configuration",children:"\u8A2D\u5B9A npm configuration"}),"\n",(0,i.jsxs)(n.p,{children:["\u5982\u679C\u6709 ",(0,i.jsx)(n.code,{children:".npmrc"})," \u6703\u76F4\u63A5\u8B80\u53D6\u88E1\u9762\u7684\u8A2D\u5B9A\uFF0C\u6216\u662F\u53EF\u4EE5\u76F4\u63A5\u5728 ",(0,i.jsx)(n.code,{children:"package.json"})," \u88E1\u9762\u8A2D\u5B9A"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "publishConfig": {\n    "registry": "https://registry.npmjs.org/",\n    "tag": "latest"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"\u57F7\u884C-semantic-release",children:"\u57F7\u884C semantic-release"}),"\n",(0,i.jsx)(n.p,{children:"\u53EF\u4EE5\u5728 script \u88E1\u9762\u52A0\u4E0A semantic-release \u7684\u6307\u4EE4"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "scripts": {\n    "release": "semantic-release"\n  }\n}\n'})}),"\n",(0,i.jsx)(n.p,{children:"\u6216\u662F\u76F4\u63A5\u7528 npx \u57F7\u884C"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npx semantic-release\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u5982\u679C\u4F60\u76F4\u63A5\u5728\u672C\u5730\u7AEF\u57F7\u884C semantic-release\uFF0C\u6703\u767C\u73FE\u6709\u4E9B\u6B65\u9A5F\u88AB skip \u6389\uFF0C\u56E0\u70BA semantic-release \u5F88\u591A\u6B65\u9A5F\u90FD\u662F\u4F9D\u8CF4\u65BC CI/CD \u53CA\u74B0\u5883\u8B8A\u6578\u4F86\u57F7\u884C\uFF0C\u4F8B\u5982\u66F4\u65B0 release note \u5230 github\uFF0C\u6216\u662F\u767C\u4F48 npm \u5957\u4EF6\u7B49\u7B49\uFF0C\u6240\u4EE5\u5EFA\u8B70\u8981\u5728 CI/CD \u4E0A\u57F7\u884C release\u3002"}),"\n",(0,i.jsx)(n.h2,{id:"\u8A2D\u5B9A-cicd",children:"\u8A2D\u5B9A CI/CD"}),"\n",(0,i.jsxs)(n.p,{children:["\u5B98\u7DB2\u6709\u63D0\u4F9B\u5404\u5F0F\u7684 ",(0,i.jsx)(n.a,{href:"https://semantic-release.gitbook.io/semantic-release/recipes/ci-configurations",children:"CI configurations"})," \u8A2D\u5B9A\u65B9\u6CD5\uFF0C\u9019\u908A\u4EE5 ",(0,i.jsx)(n.strong,{children:"Github Action"})," \u70BA\u4F8B\u3002"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",metastring:'{33-35} title=".github/workflows/release.yml"',children:"name: Release\non:\n  push:\n    branches:\n      - main\n\npermissions:\n  contents: read # for checkout\n\njobs:\n  release:\n    name: Release\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write # to be able to publish a GitHub release\n      issues: write # to be able to comment on released issues\n      pull-requests: write # to be able to comment on released pull requests\n      id-token: write # to enable use of OIDC for npm provenance\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v3\n        with:\n          fetch-depth: 0\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: 20\n          cache: npm\n      - name: Install dependencies\n        run: npm install\n      - name: Release\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}\n        run: npx semantic-release\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"\u6CE8\u610F\u4E8B\u9805",type:"warning",children:(0,i.jsx)(n.p,{children:"permissions \u4E00\u5B9A\u8981\u8A2D\u5B9A\uFF0C\u624D\u80FD\u5728 Github \u4E0A\u53BB\u767C\u4F48 release note \u53CA\u66F4\u65B0 changelog \u7B49\u5BEB\u5165\u6B0A\u9650\u3002"})}),"\n",(0,i.jsx)(n.p,{children:"\u9019\u908A\u6703\u9700\u8981\u5169\u500B\u74B0\u5883\u8B8A\u6578\uFF1A"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(r.Z,{children:"GITHUB_TOKEN"}),"\uFF1A\u7528\u4F86\u66F4\u65B0 release note \u53CA CHANGELOG.md \u5230\ngithub"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(r.Z,{children:"NPM_TOKEN"}),"\uFF1A\u7528\u4F86\u767C\u4F48 npm \u5957\u4EF6"]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["GITHUB_TOKEN \u53EF\u4EE5\u76F4\u63A5\u4F7F\u7528 ",(0,i.jsx)(n.code,{children:"secrets.GITHUB_TOKEN"}),"\uFF0CGithub \u6703\u81EA\u52D5\u7522\u751F Token\uFF0C\u4E0D\u9700\u8981\u984D\u5916\u8A2D\u5B9A\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"NPM_TOKEN \u9700\u8981\u5728 npm \u7684\u7DB2\u7AD9\u4E0A\u7522\u751F Classic Tokens\uFF0C\u7136\u5F8C\u5728 github \u4E0A\u8A2D\u5B9A\u74B0\u5883\u8B8A\u6578\u3002"}),"\n",(0,i.jsx)(t.Ei,{src:h}),"\n",(0,i.jsx)(n.h2,{id:"\u53C3\u8003\u8CC7\u6599",children:"\u53C3\u8003\u8CC7\u6599"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://pjchender.dev/devops/devops-publish-npm-0/",children:"\u767C\u4F48 npm \u5957\u4EF6 - \u5F9E\u624B\u52D5\u5230\u81EA\u52D5(0)\uFF1A\u5C08\u6848\u8207\u5957\u4EF6\u5EFA\u7F6E\u7BC7"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://stackoverflow.com/questions/51621400/what-is-difference-between-release-notes-and-changelog",children:"What is difference between release notes and changelog?"})}),"\n"]})]})}function u(e={}){let{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}},4634:function(e,n,s){s.d(n,{Z:function(){return a}});var l=s(5893);s(7294);var i=s(6735);function a(e){let{children:n,fallback:s}=e;return(0,i.Z)()?(0,l.jsx)(l.Fragment,{children:n?.()}):s??null}},7620:function(e,n,s){s.d(n,{Z:function(){return i}});var l=s(5893);let i=e=>{let{children:n,color:s,block:i,bold:a,style:r}=e,t="";switch(s){case"yellow":default:t="highlight-yellow";break;case"blue":t="highlight-blue";break;case"green":t="highlight-green";break;case"red":t="highlight-red"}let c={fontWeight:a?"bold":"normal",...r};return i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:`${t} highlight`,style:{...c},children:n}),(0,l.jsx)("p",{})]}):(0,l.jsx)("span",{className:`${t} highlight`,style:{...c},children:n})}},8239:function(e,n,s){s.d(n,{Ei:function(){return r},gO:function(){return t},nI:function(){return c}});var l=s(5893),i=s(4634),a=s(1195);s(7294);let r=e=>{let{src:n,width:s="100%",center:i=!1,style:a={}}=e,r={width:`min(100%,${s})`,display:i?"block":"inline-block",margin:i?"0 auto":"0",borderRadius:"5px",...a};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("img",{src:n,style:{...r}}),(0,l.jsx)("br",{}),(0,l.jsx)("br",{})]})},t=e=>{let{children:n,width:s="100%",center:r=!1,style:t={}}=e;return(0,l.jsx)(i.Z,{children:()=>{let{sm:e}=(0,a.Z)(),i={width:`min(100%,${s})`,margin:r?"0 auto":"0",display:"flex",flexDirection:e?"column":"row",gap:"10px",alignItems:"center",...t};return(0,l.jsx)("div",{style:{...i},children:n})}})},c=e=>{let{style:n,width:s="100%",src:i}=e,a={width:`min(100%,${s})`,flex:1,...n};return(0,l.jsx)("div",{style:{...a},children:(0,l.jsx)(r,{src:i})})}},1195:function(e,n,s){s.d(n,{Z:function(){return i}});var l=s(7294);let i=()=>{let[e,n]=(0,l.useState)({width:window.innerWidth,height:window.innerHeight}),[s,i]=(0,l.useState)(!1);return(0,l.useLayoutEffect)(()=>{let e=()=>{let{innerWidth:e,innerHeight:s}=window;n({width:e,height:s}),i(e<=635)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),{sm:s,windowSize:e}}},65:function(e,n,s){s.d(n,{Z:function(){return t},a:function(){return r}});var l=s(7294);let i={},a=l.createContext(i);function r(e){let n=l.useContext(a);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),l.createElement(a.Provider,{value:n},e.children)}}}]);