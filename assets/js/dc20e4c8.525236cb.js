"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([["8614"],{1592:function(e,t,n){n.r(t),n.d(t,{metadata:()=>s,contentTitle:()=>h,default:()=>x,assets:()=>j,toc:()=>p,frontMatter:()=>o});var s=JSON.parse('{"id":"ithome2023/day27","title":"[Day 27] \u5ACC Jest \u592A\u6162\uFF1F\u4F86\u770B\u770B SWC \u8DDF Vitest \u5427\uFF01","description":"\u5728\u6211\u5011\u524D\u9762\u5728\u5BE6\u4F5C\u6E2C\u8A66\u7684\u6642\u5019\uFF0C\u4E0D\u77E5\u9053\u5927\u5BB6\u6709\u6C92\u6709\u89BA\u5F97 Jest \u8DD1\u6E2C\u8A66\u597D\u50CF\u6709\u9EDE\u6162\u6B38\uFF5E\u96D6\u7136\u516C\u8A8D Jest \u8DD1\u6E2C\u8A66\u7684\u901F\u5EA6\u6BD4 Mocha \u8DDF Karma \u9084\u8981\u5FEB\uFF0C\u4F46\u662F\u5728\u8DD1 React \u6E2C\u8A66\u7684\u6642\u5019\uFF0C\u9084\u662F\u6703\u89BA\u5F97\u6709\u9EDE\u6162\uFF0C\u5C24\u5176\u662F\u5728\u4F60\u7684\u5C08\u6848\u8D8A\u5927\u7684\u6642\u5019\uFF0C\u6E2C\u8A66\u7684\u6642\u9593\u5C31\u6703\u8D8A\u9577\uFF0C\u90A3\u6709\u6C92\u6709\u4EC0\u9EBC\u65B9\u6CD5\u53EF\u4EE5\u8B93\u6E2C\u8A66\u7684\u901F\u5EA6\u8B8A\u5FEB\u4E00\u9EDE\u5462\uFF1F","source":"@site/docs/ithome2023/day27.mdx","sourceDirName":"ithome2023","slug":"/ithome2023/day27","permalink":"/ithome2023/day27","draft":false,"unlisted":false,"tags":[{"inline":false,"label":"IT Home 2023","permalink":"/tags/ithome-2023","description":"IT Home \u9435\u4EBA\u8CFD 2023 \u5E74\u7CFB\u5217\u6587\u7AE0"}],"version":"current","lastUpdatedAt":1718173908000,"frontMatter":{"title":"[Day 27] \u5ACC Jest \u592A\u6162\uFF1F\u4F86\u770B\u770B SWC \u8DDF Vitest \u5427\uFF01","tags":["ithome2023"]},"sidebar":"tutorialSidebar","previous":{"title":"[Day 26] Copilot Chat \u6E2C\u8A66\u5FC3\u5F97","permalink":"/ithome2023/day26"},"next":{"title":"[Day 28] \u6E2C\u8A66\u5B88\u5247\uFF1A\u5982\u4F55\u8B93\u6E2C\u8A66\u66F4\u6709\u898F\u7BC4","permalink":"/ithome2023/day28"}}'),i=n("5893"),r=n("65"),c=n("9366");let l=n.p+"assets/images/day27-1-166dbe149018767ac61d35924f98a1ce.jpg",a=n.p+"assets/images/day27-2-46e4f7fb38065f5cdc288f1712efbf92.jpg",d=n.p+"assets/images/day27-3-4c4f4babd773bb81c9f535952472d034.jpg",o={title:"[Day 27] \u5ACC Jest \u592A\u6162\uFF1F\u4F86\u770B\u770B SWC \u8DDF Vitest \u5427\uFF01",tags:["ithome2023"]},h=void 0,j={},p=[{value:"SWC",id:"swc",level:2},{value:"Vitest",id:"vitest",level:2}];function u(e){let t={a:"a",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.p,{children:"\u5728\u6211\u5011\u524D\u9762\u5728\u5BE6\u4F5C\u6E2C\u8A66\u7684\u6642\u5019\uFF0C\u4E0D\u77E5\u9053\u5927\u5BB6\u6709\u6C92\u6709\u89BA\u5F97 Jest \u8DD1\u6E2C\u8A66\u597D\u50CF\u6709\u9EDE\u6162\u6B38\uFF5E\u96D6\u7136\u516C\u8A8D Jest \u8DD1\u6E2C\u8A66\u7684\u901F\u5EA6\u6BD4 Mocha \u8DDF Karma \u9084\u8981\u5FEB\uFF0C\u4F46\u662F\u5728\u8DD1 React \u6E2C\u8A66\u7684\u6642\u5019\uFF0C\u9084\u662F\u6703\u89BA\u5F97\u6709\u9EDE\u6162\uFF0C\u5C24\u5176\u662F\u5728\u4F60\u7684\u5C08\u6848\u8D8A\u5927\u7684\u6642\u5019\uFF0C\u6E2C\u8A66\u7684\u6642\u9593\u5C31\u6703\u8D8A\u9577\uFF0C\u90A3\u6709\u6C92\u6709\u4EC0\u9EBC\u65B9\u6CD5\u53EF\u4EE5\u8B93\u6E2C\u8A66\u7684\u901F\u5EA6\u8B8A\u5FEB\u4E00\u9EDE\u5462\uFF1F"}),"\n",(0,i.jsx)(t.h2,{id:"swc",children:"SWC"}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.a,{href:"https://swc.rs/",children:"SWC"})," \u662F\u4E00\u500B\u57FA\u65BC Rust \u7684\u6253\u5305\u7DE8\u8B6F\u5DE5\u5177\uFF0C\u53EF\u4EE5\u7528\u4F86\u53D6\u4EE3 Babel\uFF0C\u4E26\u4E14\u53EF\u4EE5\u66F4\u5FEB\u901F\u7684\u7DE8\u8B6F\u7A0B\u5F0F\u78BC\uFF0C\u800C SWC \u4E5F\u6709\u63D0\u4F9B ",(0,i.jsx)(t.a,{href:"https://www.npmjs.com/package/@swc/jest",children:"@swc/jest"})," \u9019\u500B\u5957\u4EF6\uFF0C\u53EF\u4EE5\u8B93\u6211\u5011\u5728 Jest \u4E2D\u4F7F\u7528 SWC \u4F86\u53D6\u4EE3 Babel\u3002"]}),"\n",(0,i.jsx)(t.p,{children:"\u5B89\u88DD\u5957\u4EF6\uFF1A"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"npm i -D jest @swc/core @swc/jest\n"})}),"\n",(0,i.jsxs)(t.p,{children:["\u63A5\u8457\u5728 Jest \u7684\u8A2D\u5B9A\u6A94\u4E2D\u628A\u539F\u672C\u7684 ",(0,i.jsx)(t.code,{children:"babel-jest"})," \u66FF\u63DB\u6210 ",(0,i.jsx)(t.code,{children:"@swc/jest"}),"\uFF1A"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "transform": {\n    "^.+\\\\.(js|jsx|ts|tsx)$": "@swc/jest"\n  }\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["\u5982\u679C\u662F\u4F7F\u7528 React \u9084\u9700\u8981\u52A0\u4E0A ",(0,i.jsx)(t.code,{children:"react"})," \u7684\u8A2D\u5B9A\uFF1A"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "transform": {\n    "^.+\\\\.(js|jsx|ts|tsx)$": [\n      "@swc/jest",\n      {\n        "jsc": {\n          "transform": {\n            "react": {\n              "runtime": "automatic"\n            }\n          }\n        }\n      }\n    ]\n  }\n}\n'})}),"\n",(0,i.jsx)(t.p,{children:"\u8B93\u6211\u5011\u4F86\u5BE6\u969B\u8DD1\u6E2C\u8A66\u770B\u770B\u5FEB\u4E86\u591A\u5C11\uFF0C\u5148\u4F86\u770B\u770B\u539F\u672C\u7684\u6E2C\u8A66\u901F\u5EA6\uFF1A"}),"\n",(0,i.jsx)(c.Ei,{src:l}),"\n",(0,i.jsx)(t.p,{children:"\u800C\u4F7F\u7528 SWC \u4E4B\u5F8C\u7684\u6E2C\u8A66\u901F\u5EA6\uFF1A"}),"\n",(0,i.jsx)(c.Ei,{src:a}),"\n",(0,i.jsx)(t.p,{children:"\u5E73\u5747\u6E2C\u8A66\u4E0B\u4F86\u5927\u6982\u5FEB\u4E86 1 \u79D2\u5DE6\u53F3\uFF0CSWC \u7684\u5B98\u7DB2\u8072\u7A31\u5728\u55AE\u57F7\u884C\u7DD2\u4E0A\u6BD4 Babel \u5FEB 20 \u500D\uFF0C\u800C\u5728\u56DB\u6838\u5FC3\u4E0A\u6BD4 Babel \u5FEB\u4E0A 70 \u500D\uFF0C\u4E0D\u904E\u4E0D\u78BA\u5B9A\u662F\u4E0D\u662F\u5728\u6E2C\u8A66\u4E0A\u662F\u5426\u4E5F\u662F\u9019\u6A23\uFF0C\u7562\u7ADF SWC \u4E5F\u53EA\u662F\u7BC0\u7701\u4E86\u7DE8\u8B6F\u7684\u6642\u9593\uFF0C\u5728\u8DD1\u6E2C\u8A66\u4E0A\u770B\u8D77\u4F86\u9084\u662F\u4F7F\u7528 Jest\uFF0C\u4E0D\u904E\u5BE6\u6E2C\u4E0B\u4F86\u7684\u78BA\u662F\u6709\u63D0\u5347\u8DD1\u6E2C\u8A66\u7684\u901F\u5EA6\u7684\uFF01"}),"\n",(0,i.jsx)(t.h2,{id:"vitest",children:"Vitest"}),"\n",(0,i.jsx)(t.p,{children:"Vitest \u5982\u540C Vite \u4E00\u6A23\u662F\u4F7F\u7528 esbuild \u4F86\u9032\u884C\u6253\u5305\u7DE8\u8B6F\uFF0C\u5982\u679C\u6709\u7528\u904E Vite \u5C31\u77E5\u9053\u4ED6\u6709\u591A\u5FEB\uFF0C\u800C Vitest \u642D\u914D Vite \u53EF\u4EE5\u66F4\u65B9\u4FBF\u4F86\u9032\u884C\u8A2D\u7F6E\u3002"}),"\n",(0,i.jsx)(t.p,{children:"\u5B89\u88DD\u5957\u4EF6\uFF1A"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"npm i -D vitest\n"})}),"\n",(0,i.jsxs)(t.p,{children:["\u5728 package.json \u4E2D\u628A\u6E2C\u8A66\u6846\u67B6 ",(0,i.jsx)(t.code,{children:"jest"})," \u6539\u6210 ",(0,i.jsx)(t.code,{children:"vitest"}),"\uFF0C\u518D\u628A\u539F\u672C Jest \u7684\u8A2D\u5B9A\u90FD\u62FF\u6389\uFF1A"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "scripts": {\n    "test": "vitest"\n  }\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["\u63A5\u8457\u5982\u679C\u4F7F\u7528 Vite \u7684\u8A71\uFF0C\u8981\u5728 ",(0,i.jsx)(t.code,{children:"vite.config.js"})," \u4E2D\u52A0\u4E0A\u7B2C\u4E00\u884C\u7684\u8A2D\u5B9A\uFF1A"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:'/// <reference types="vitest" />\nimport { defineConfig } from "vite";\n\nexport default defineConfig({\n  test: {\n    // ...\n  },\n});\n'})}),"\n",(0,i.jsxs)(t.p,{children:["\u7136\u5F8C\u539F\u672C\u7684 ",(0,i.jsx)(t.code,{children:"setupTests.ts"})," \u5C31\u53EF\u4EE5\u52A0\u5728 ",(0,i.jsx)(t.code,{children:"vite.config.js"})," \u4E2D\u7684 test \u88E1\uFF1A"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:'/// <reference types="vitest" />\nimport { defineConfig } from "vite";\n\nexport default defineConfig({\n  // \u6E2C\u8A66\u8A2D\u5B9A\n  test: {\n    globals: true,\n    environment: "jsdom",\n    setupFiles: ["./setupTests.ts"],\n  },\n});\n'})}),"\n",(0,i.jsxs)(t.p,{children:["\u518D\u4F86\u5982\u679C\u6709\u4F7F\u7528 @testing-library/jest-dom \u7684\u8A71\uFF0C\u5728 ",(0,i.jsx)(t.code,{children:"setupTests.ts"})," \u5F15\u5165\u6642\u8981\u6539\u6210\uFF1A"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:'import "@testing-library/jest-dom/vitest";\n'})}),"\n",(0,i.jsxs)(t.p,{children:["\u4F7F\u7528 TypeScript \u7684\u8A71\uFF0C\u9700\u8981\u5728 ",(0,i.jsx)(t.code,{children:"tsconfig.json"})," \u4E2D\u52A0\u5165\uFF1A"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-json",children:'{\n  "compilerOptions": {\n    "types": ["vitest/globals", "@testing-library/jest-dom/vitest"]\n  }\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["\u63A5\u8457\u5728\u6839\u64DA\u5B98\u7DB2 ",(0,i.jsx)(t.a,{href:"https://vitest.dev/guide/migration.html",children:"Migration Guide"})," \u7684\u6307\u793A\uFF0C\u628A\u4E00\u4E9B jest \u7684\u8A9E\u6CD5\u6539\u6210 vitest \u7684\u8A9E\u6CD5\uFF0C\u5C31\u5927\u529F\u544A\u6210\u4E86\uFF01"]}),"\n",(0,i.jsx)(t.p,{children:"\u8B93\u6211\u5011\u5BE6\u969B\u8DD1\u4E00\u6B21 Vitest \u7684\u6E2C\u8A66\uFF1A"}),"\n",(0,i.jsx)(c.Ei,{src:d}),"\n",(0,i.jsx)(t.p,{children:"\u53EF\u4EE5\u770B\u5230\u53C8\u6BD4 SWC \u5FEB\u4E86\u4E00\u79D2\u591A\uFF0C\u4E5F\u5C31\u662F\u8AAA\u6BD4 Jest \u5FEB\u4E86\u5169\u79D2\u591A\uFF01\u662F\u4E0D\u662F\u7B49\u4E0D\u53CA\u628A Jest \u63DB\u6389\u5566\uFF0C\u800C\u4E14\u7576\u5C08\u6848\u8D8A\u5927\u8D8A\u80FD\u660E\u986F\u770B\u51FA\u4ED6\u5011\u7684\u5DEE\u7570\u3002"}),"\n",(0,i.jsx)(t.p,{children:"\u4E0D\u904E Vitest \u7562\u7ADF\u9084\u662F\u6BD4\u8F03\u65B0\u7684\u5DE5\u5177\uFF0C\u793E\u7FA4\u4E0A\u7576\u7136\u662F\u6BD4\u4E0D\u904E\u6B77\u53F2\u60A0\u4E45\u7684 Jest\uFF0C\u800C\u4E14\u6709\u4E9B\u8A9E\u6CD5\u9084\u4E0D\u5B8C\u5168\u652F\u63F4 Jest\uFF0C\u4F46\u662F\u6211\u975E\u5E38\u770B\u597D Vitest \u7684\u767C\u5C55\uFF0C\u901F\u5EA6\u5FEB\u7528\u8D77\u4F86\u5C31\u662F\u8212\u670D\u554A\uFF5E"}),"\n",(0,i.jsx)(t.hr,{}),"\n",(0,i.jsx)(t.p,{children:"\u9019\u4E00\u7BC7\u8A66\u8457\u628A Jest \u63DB\u6210 SWC \u8DDF Vitest \u4F86\u8DD1\u6E2C\u8A66\uFF0C\u53EF\u4EE5\u770B\u5230\u901F\u5EA6\u4E0A\u7684\u78BA\u6709\u63D0\u5347\uFF0C\u800C\u4E14\u5BE6\u969B\u628A Jest \u66FF\u63DB\u6389\u4E26\u4E0D\u6703\u8017\u8CBB\u5F88\u5927\u7684\u529F\u592B\uFF0C\u6240\u4EE5\u5982\u679C\u4F60\u89BA\u5F97 Jest \u8DD1\u6E2C\u8A66\u592A\u6162\u7684\u8A71\uFF0C\u53EF\u4EE5\u8003\u616E\u4F7F\u7528 SWC \u6216\u662F Vitest \u4F86\u53D6\u4EE3 Jest\uFF01"}),"\n",(0,i.jsx)(t.p,{children:"\u66FF\u63DB\u7684\u904E\u7A0B\u53EF\u4EE5\u53C3\u8003\uFF1A"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://github.com/Jim876633/ithome-2023/commit/9b51fe2f9f72a22ed590d0151dd1d162d73c95b7",children:"SWC"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.a,{href:"https://github.com/Jim876633/ithome-2023/commit/3eb26270d53a87eb21f149923983aa65e120599b",children:"Vitest"})}),"\n"]})]})}function x(e={}){let{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(u,{...e})}):u(e)}},144:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(5893);n(7294);var i=n(7227);function r(e){let{children:t,fallback:n}=e;return(0,i.Z)()?(0,s.jsx)(s.Fragment,{children:t?.()}):n??null}},9366:function(e,t,n){n.d(t,{Ei:function(){return c},gO:function(){return l},nI:function(){return a}});var s=n(5893),i=n(144),r=n(1094);n(7294);let c=e=>{let{src:t,width:n="100%",center:i=!1,style:r={}}=e,c={width:`min(100%,${n})`,display:i?"block":"inline-block",margin:i?"0 auto":"0",borderRadius:"5px",...r};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("img",{src:t,style:{...c}}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{})]})},l=e=>{let{children:t,width:n="100%",center:c=!1,style:l={}}=e;return(0,s.jsx)(i.Z,{children:()=>{let{sm:e}=(0,r.Z)(),i={width:`min(100%,${n})`,margin:c?"0 auto":"0",display:"flex",flexDirection:e?"column":"row",gap:"10px",alignItems:"center",...l};return(0,s.jsx)("div",{style:{...i},children:t})}})},a=e=>{let{style:t,width:n="100%",src:i}=e,r={width:`min(100%,${n})`,flex:1,...t};return(0,s.jsx)("div",{style:{...r},children:(0,s.jsx)(c,{src:i})})}},1094:function(e,t,n){n.d(t,{Z:function(){return r}});var s=n(7294);let i=635,r=()=>{let[e,t]=(0,s.useState)({width:window.innerWidth,height:window.innerHeight}),[n,r]=(0,s.useState)(!1);return(0,s.useLayoutEffect)(()=>{let e=()=>{let{innerWidth:e,innerHeight:n}=window;t({width:e,height:n}),r(e<=i)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[]),{sm:n,windowSize:e}}},65:function(e,t,n){n.d(t,{Z:function(){return l},a:function(){return c}});var s=n(7294);let i={},r=s.createContext(i);function c(e){let t=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);