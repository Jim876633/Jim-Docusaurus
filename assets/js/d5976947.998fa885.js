"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[6895],{3714:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>j,frontMatter:()=>h,metadata:()=>m,toc:()=>p});var a=s(5893),l=s(1151),i=s(676),r=s(5397);const c=s.p+"assets/images/npm-publish-1-4995ce9afbaabae52dc982915941c674.jpg",t=s.p+"assets/images/npm-publish-2-f60ec805f25c7252c6533db3c801b787.jpg",h={title:"\u3010Npm\u3011\u4f7f\u7528 semantic-release \u81ea\u52d5\u767c\u5e03 npm \u5957\u4ef6",sidebar_label:"\u4f7f\u7528 semantic-release \u81ea\u52d5\u767c\u5e03 npm \u5957\u4ef6",tags:["Npm","semantic-release","CI/CD"]},o="\u4f7f\u7528 semantic-release \u81ea\u52d5\u767c\u5e03 npm \u5957\u4ef6",m={id:"npm/npm-publish",title:"\u3010Npm\u3011\u4f7f\u7528 semantic-release \u81ea\u52d5\u767c\u5e03 npm \u5957\u4ef6",description:"\u767c\u4f48\u53ca\u66f4\u65b0 npm \u5957\u4ef6\uff0c\u6703\u9700\u8981\u5e7e\u500b\u6b65\u9a5f\uff1a",source:"@site/docs/npm/npm-publish.mdx",sourceDirName:"npm",slug:"/npm/npm-publish",permalink:"/npm/npm-publish",draft:!1,unlisted:!1,tags:[{label:"Npm",permalink:"/tags/npm"},{label:"semantic-release",permalink:"/tags/semantic-release"},{label:"CI/CD",permalink:"/tags/ci-cd"}],version:"current",lastUpdatedAt:1707383602,formattedLastUpdatedAt:"2024\u5e742\u67088\u65e5",frontMatter:{title:"\u3010Npm\u3011\u4f7f\u7528 semantic-release \u81ea\u52d5\u767c\u5e03 npm \u5957\u4ef6",sidebar_label:"\u4f7f\u7528 semantic-release \u81ea\u52d5\u767c\u5e03 npm \u5957\u4ef6",tags:["Npm","semantic-release","CI/CD"]},sidebar:"tutorialSidebar",previous:{title:"npm \u548c npx \u7684\u5dee\u5225\uff1f",permalink:"/npm/npm-npx"},next:{title:"package.json \u8ddf package-lock.json \u7684\u5dee\u5225",permalink:"/npm/package"}},d={},p=[{value:"\u624b\u52d5\u767c\u5e03",id:"\u624b\u52d5\u767c\u5e03",level:2},{value:"\u4fee\u6539\u7248\u672c\u865f",id:"\u4fee\u6539\u7248\u672c\u865f",level:3},{value:"\u767c\u4f48\u5957\u4ef6\u5230 npm",id:"\u767c\u4f48\u5957\u4ef6\u5230-npm",level:3},{value:"\u5c07\u6700\u65b0\u7684 commit \u52a0\u4e0a tag",id:"\u5c07\u6700\u65b0\u7684-commit-\u52a0\u4e0a-tag",level:3},{value:"\u66f4\u65b0 changelog",id:"\u66f4\u65b0-changelog",level:3},{value:"\u66f4\u65b0 release note",id:"\u66f4\u65b0-release-note",level:3},{value:"semantic-release \u767c\u5e03",id:"semantic-release-\u767c\u5e03",level:2},{value:"\u5b89\u88dd\u5957\u4ef6",id:"\u5b89\u88dd\u5957\u4ef6",level:3},{value:"\u8a2d\u5b9a .releaserc.json",id:"\u8a2d\u5b9a-releasercjson",level:3},{value:"\u8a2d\u5b9a npm configuration",id:"\u8a2d\u5b9a-npm-configuration",level:3},{value:"\u57f7\u884c semantic-release",id:"\u57f7\u884c-semantic-release",level:3},{value:"\u8a2d\u5b9a CI/CD",id:"\u8a2d\u5b9a-cicd",level:2},{value:"\u53c3\u8003\u8cc7\u6599",id:"\u53c3\u8003\u8cc7\u6599",level:2}];function g(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h1,{id:"\u4f7f\u7528-semantic-release-\u81ea\u52d5\u767c\u5e03-npm-\u5957\u4ef6",children:"\u4f7f\u7528 semantic-release \u81ea\u52d5\u767c\u5e03 npm \u5957\u4ef6"}),"\n",(0,a.jsx)(n.p,{children:"\u767c\u4f48\u53ca\u66f4\u65b0 npm \u5957\u4ef6\uff0c\u6703\u9700\u8981\u5e7e\u500b\u6b65\u9a5f\uff1a"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\u4fee\u6539 ",(0,a.jsx)(n.code,{children:"package.json"})," \u53ca ",(0,a.jsx)(n.code,{children:"package-lock.json"})," \u7684\u7248\u672c\u865f"]}),"\n",(0,a.jsxs)(n.li,{children:["\u57f7\u884c ",(0,a.jsx)(n.code,{children:"npm publish"})," \u4f86\u767c\u4f48\u5957\u4ef6"]}),"\n",(0,a.jsx)(n.li,{children:"\u5c07\u65b0\u7248\u672c\u7684 commit \u62bc\u4e0a tag"}),"\n",(0,a.jsxs)(n.li,{children:["\u66f4\u65b0 ",(0,a.jsx)(n.code,{children:"CHANGELOG.md"})," \u4f86\u8a18\u9304\u7248\u672c\u66f4\u65b0\u7684\u5167\u5bb9"]}),"\n",(0,a.jsx)(n.li,{children:"\u66f4\u65b0 release note \u4f86\u544a\u77e5\u4f7f\u7528\u8005\u6709\u65b0\u7248\u672c\u7684\u5957\u4ef6"}),"\n"]}),"\n","\n",(0,a.jsx)(n.h2,{id:"\u624b\u52d5\u767c\u5e03",children:"\u624b\u52d5\u767c\u5e03"}),"\n",(0,a.jsx)(n.p,{children:"\u5148\u4f86\u770b\u770b\u5982\u679c\u662f\u624b\u52d5\u767c\u5e03\u7684\u8a71\uff0c\u6703\u9700\u8981\u505a\u54ea\u4e9b\u4e8b\u60c5\u3002"}),"\n",(0,a.jsx)(n.h3,{id:"\u4fee\u6539\u7248\u672c\u865f",children:"\u4fee\u6539\u7248\u672c\u865f"}),"\n",(0,a.jsxs)(n.p,{children:["\u9664\u4e86\u624b\u52d5\u4fee\u6539 ",(0,a.jsx)(n.code,{children:"package.json"})," \u53ca ",(0,a.jsx)(n.code,{children:"package-lock.json"})," \u7684\u7248\u672c\u865f\u4e4b\u5916\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"npm version"})," \u4f86\u66f4\u65b0\u7248\u672c\u865f\u3002"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm version <\u7248\u672c\u865f>\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u9019\u6a23\u6703\u81ea\u52d5\u66f4\u65b0\u5169\u500b\u6a94\u6848\u7684\u7248\u672c\u865f\uff0c\u4e26\u4e14\u7522\u751f\u4e00\u500b commit \u53ca tag\u3002"}),"\n",(0,a.jsx)(r.E,{src:c}),"\n",(0,a.jsx)(n.p,{children:"\u5982\u679c\u4e0d\u60f3\u624b\u52d5\u6253\u6578\u5b57\uff0c\u53ef\u4ee5\u4f7f\u7528 major, minor, patch \u4f86\u66f4\u65b0\u7248\u672c\u865f\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm version major # \u4e3b\u8981\u7248\u672c\u865f 1.0.0 -> 2.0.0\nnpm version minor # \u6b21\u8981\u7248\u672c\u865f 1.0.0 -> 1.1.0\nnpm version patch # \u4fee\u8a02\u7248\u672c\u865f 1.0.0 -> 1.0.1\n"})}),"\n",(0,a.jsx)(n.admonition,{title:"\u5c0f\u77e5\u8b58",type:"info",children:(0,a.jsxs)(n.p,{children:["\u5982\u679c ",(0,a.jsx)(n.code,{children:"package.json"})," \u8ddf ",(0,a.jsx)(n.code,{children:"package-lock.json"})," \u7684\u7248\u672c\u865f\u4e0d\u4e00\u81f4\uff0c\u5728 npm install \u7684\u6642\u5019\u6703\u5f37\u5236\u66f4\u65b0 ",(0,a.jsx)(n.code,{children:"package-lock.json"})," \u7684\u7248\u672c\u865f\u8ddf ",(0,a.jsx)(n.code,{children:"package.json"})," \u4e00\u81f4\u3002"]})}),"\n",(0,a.jsx)(n.h3,{id:"\u767c\u4f48\u5957\u4ef6\u5230-npm",children:"\u767c\u4f48\u5957\u4ef6\u5230 npm"}),"\n",(0,a.jsx)(n.p,{children:"\u9996\u5148\u8981\u5148\u767b\u5165 npm"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm login\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u7136\u5f8c\u57f7\u884c ",(0,a.jsx)(n.code,{children:"npm publish"})," \u4f86\u767c\u4f48\u5957\u4ef6\u3002"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm publish\n"})}),"\n",(0,a.jsx)(n.h3,{id:"\u5c07\u6700\u65b0\u7684-commit-\u52a0\u4e0a-tag",children:"\u5c07\u6700\u65b0\u7684 commit \u52a0\u4e0a tag"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"git tag v1.0.0\ngit push origin v1.0.0\n"})}),"\n",(0,a.jsxs)(n.p,{children:["\u4e0b Tag \u7684\u65b9\u6cd5\u53ef\u4ee5\u53c3\u8003 ",(0,a.jsx)(n.a,{href:"https:/jimhuang.dev/git/tag",children:"git tag"})]}),"\n",(0,a.jsx)(n.h3,{id:"\u66f4\u65b0-changelog",children:"\u66f4\u65b0 changelog"}),"\n",(0,a.jsxs)(n.p,{children:["\u66f4\u65b0 ",(0,a.jsx)(n.code,{children:"CHANGELOG.md"})," \u4f86\u8a18\u9304\u7248\u672c\u66f4\u65b0\u7684\u5167\u5bb9"]}),"\n",(0,a.jsxs)(n.p,{children:["changelog \u7684\u898f\u7bc4\u53ca\u4ecb\u7d39\u53ef\u4ee5\u53c3\u8003",(0,a.jsx)(n.a,{href:"https://keepachangelog.com/zh-TW/1.1.0/",children:"\u5982\u4f55\u7dad\u8b77\u66f4\u65b0\u65e5\u8a8c"})]}),"\n",(0,a.jsx)(n.h3,{id:"\u66f4\u65b0-release-note",children:"\u66f4\u65b0 release note"}),"\n",(0,a.jsx)(n.p,{children:"\u5728 github \u4e0a release note \u901a\u5e38\u6703\u9078\u64c7\u4e00\u500b tag \u4f86\u767c\u5e03\uff0c\u4e26\u4e14\u5728 release note \u4e0a\u5beb\u4e0a\u7248\u672c\u66f4\u65b0\u7684\u5167\u5bb9\u3002"}),"\n",(0,a.jsxs)(n.admonition,{title:"changelog \u53ca release note \u7684\u5dee\u7570",type:"info",children:[(0,a.jsx)(n.p,{children:"changelog \u4e3b\u8981\u662f\u7d66\u958b\u767c\u8005\u770b\u7684\uff0c\u5167\u5bb9\u6703\u6bd4\u8f03\u8a73\u7d30\uff0c\u4e14\u8f03\u591a\u6280\u8853\u7d30\u7bc0\uff0c\u800c release note \u662f\u7d66\u4f7f\u7528\u8005\u770b\u7684\uff0c\u6982\u8ff0\u7248\u672c\u66f4\u65b0\u7684\u5167\u5bb9\u3002"}),(0,a.jsx)(n.p,{children:"\u4e0d\u904e\u5927\u90e8\u5206\u5957\u4ef6\u7684 changelog \u8ddf release note \u90fd\u6c92\u6709\u5340\u5206\u7684\u90a3\u9ebc\u6e05\u695a\uff0c\u6709\u6642\u5019\u9084\u6703\u770b\u5230 release note \u76f4\u63a5\u5c31\u653e changelog \u7684\u9023\u7d50\u3002"})]}),"\n",(0,a.jsx)(n.h2,{id:"semantic-release-\u767c\u5e03",children:"semantic-release \u767c\u5e03"}),"\n",(0,a.jsxs)(n.p,{children:["\u770b\u5b8c\u4e86\u624b\u52d5\u767c\u5e03\u7684\u6b65\u9a5f\uff0c\u5176\u5be6\u8aaa\u591a\u4e5f\u4e0d\u591a\uff0c\u4e0d\u904e\u5982\u679c\u6bcf\u6b21\u767c\u4f48\u65b0\u7248\u672c\u90fd\u8981\u624b\u52d5\u505a\u9019\u4e9b\u4e8b\u60c5\uff0c\u9084\u662f\u6703\u89ba\u5f97\u6709\u9ede\u9ebb\u7169\u3002\u800c\u4e14\u6709\u6642\u5019\u4e5f\u5bb9\u6613\u5fd8\u8a18\u66f4\u65b0\u7248\u672c\u865f\uff0c\u6216\u8005\u7248\u672c\u865f\u7684\u66f4\u65b0\u4e0d\u7b26\u5408 ",(0,a.jsx)(n.a,{href:"https://semver.org/",children:"SemVer"})," \u7684\u898f\u7bc4\u7b49\u7b49\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"\u800c semantic-release \u5c31\u53ef\u4ee5\u4e00\u6b21\u89e3\u6c7a\u9019\u4e9b\u554f\u984c\uff01\u57fa\u672c\u4e0a\u4f60\u8a2d\u5b9a\u597d\u4e4b\u5f8c\uff0c\u53ea\u9700\u8981\u628a\u6b64\u6b21\u66f4\u65b0\u7684 branch merge \u5230 main branch\uff0c\u7136\u5f8c push \u5230\u9060\u7aef\uff0csemantic-release \u5c31\u53ef\u4ee5\u4e00\u6b21\u628a\u4e0a\u9762\u6240\u6709\u7684\u6b65\u9a5f\u90fd\u5e6b\u4f60\u505a\u5b8c\uff01\u662f\u4e0d\u662f\u5f88\u5fc3\u52d5\u554a\uff01\u8b93\u6211\u5011\u4f86\u770b\u770b\u600e\u9ebc\u8a2d\u5b9a\u5427\uff01"}),"\n",(0,a.jsx)(n.h3,{id:"\u5b89\u88dd\u5957\u4ef6",children:"\u5b89\u88dd\u5957\u4ef6"}),"\n",(0,a.jsxs)(n.p,{children:["\u9996\u5148\u5148\u8ddf\u8457",(0,a.jsx)(n.a,{href:"https://semantic-release.gitbook.io/semantic-release/usage/installation#installation",children:"\u5b98\u7db2"}),"\u5b89\u88dd semantic-release"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm install -D semantic-release\n"})}),"\n",(0,a.jsx)(n.p,{children:"semantic-release \u5e95\u4e0b\u6709\u5f88\u591a\u7684 plugin \u4f86\u5206\u5225\u8655\u7406\u4e0a\u9762\u4e0d\u540c\u7684\u6b65\u9a5f\uff0c\u5728\u4f60\u5b89\u88dd semantic-release \u6642\uff0c\u6703\u81ea\u52d5\u5e6b\u4f60\u5b89\u88dd\u4e00\u4e9b\u9810\u8a2d\u7684 plugin\uff1a"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/semantic-release/commit-analyzer",children:"@semantic-release/commit-analyzer"}),"\uff1a\u5206\u6790 commit message \u4f86\u6c7a\u5b9a\u7248\u672c\u865f\u53ca\u767c\u4f48\u7684\u985e\u578b"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/semantic-release/release-notes-generator",children:"@semantic-release/release-notes-generator"}),"\uff1a\u6839\u64da commit message \u4f86\u7522\u751f release note \u7684\u5167\u5bb9\u50b3\u7d66\u5176\u4ed6 plugin"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/semantic-release/npm",children:"@semantic-release/npm"}),"\uff1a\u767c\u4f48 npm \u5957\u4ef6"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/semantic-release/github",children:"@semantic-release/github"}),"\uff1a\u66f4\u65b0 release note \u5230 github"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"\u9664\u4e86\u9810\u8a2d plugin \u5916\uff0c\u5982\u679c\u9700\u8981\u58d3 tag \u53ca\u5efa\u7acb changelog\uff0c\u9084\u9700\u8981\u984d\u5916\u5b89\u88dd\uff1a"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npm install @semantic-release/changelog @semantic-release/git -D\n"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/semantic-release/changelog",children:"@semantic-release/changelog"}),"\uff1a\u6839\u64da release note \u4f86\u5efa\u7acb/\u66f4\u65b0 changelog"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.a,{href:"https://github.com/semantic-release/git",children:"@semantic-release/git"}),"\uff1a\u628a\u65b0\u7248\u672c\u7684 commit \u58d3\u4e0a tag\uff0c\u4e26\u4e14 push \u5230\u9060\u7aef"]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"\u7528 semantic-release \u5efa\u7acb\u7684 changelog \u6703\u8ddf release note \u4e00\u6a23\u3002"})}),"\n",(0,a.jsx)(n.h3,{id:"\u8a2d\u5b9a-releasercjson",children:"\u8a2d\u5b9a .releaserc.json"}),"\n",(0,a.jsx)(n.p,{children:"\u53ef\u4ee5\u8a2d\u5b9a .releaserc.json \u4f86\u5ba2\u88fd\u5316 semantic-release \u7684\u8a2d\u5b9a\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "branches": ["main"],\n  "plugins": [\n    [\n      "@semantic-release/commit-analyzer",\n      {\n        "preset": "angular",\n        "releaseRules": [{ "type": "chore", "release": "patch" }]\n      }\n    ],\n    "@semantic-release/release-notes-generator",\n    "@semantic-release/changelog",\n    "@semantic-release/npm",\n    "@semantic-release/github",\n    "@semantic-release/git"\n  ]\n}\n'})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"branches\uff1a\u8a2d\u5b9a\u8981\u89f8\u767c semantic-release \u7684 branch"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["\u5728 plugin \u88e1\u7684 ",(0,a.jsx)(n.em,{children:"commit-analyzer"})," \u53ef\u4ee5\u8a2d\u5b9a commit message \u7684\u5206\u6790\u683c\u5f0f\uff0c\u9810\u8a2d\u4f7f\u7528\u7684\u662f Angular \u63d0\u51fa\u7684 ",(0,a.jsx)(n.a,{href:"https://github.com/angular/angular/blob/22b96b9/CONTRIBUTING.md#-commit-message-guidelines",children:"commit \u898f\u7bc4"}),"\uff0c\u4e5f\u53ef\u4ee5\u81ea\u5df1\u5ba2\u88fd\u5316\u3002\u9664\u4e86 angluar \u5916\uff0c\u9084\u6709\u5176\u4ed6\u7684 preset \u53ef\u4ee5\u9078\u64c7\uff0c\u4f8b\u5982 eslint, atom, ember \u7b49\u7b49\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"\u4e0b\u9762\u662f\u5957\u4ef6\u5167\u7684\u8a2d\u5b9a\u6a94\uff0c\u53ef\u4ee5\u770b\u5230\u9810\u8a2d\u7684 releaseRules\u3002"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",metastring:'title="@semantic-release/commit-analyzer/lib/default-release-rules.js"',children:'export default [\n  { breaking: true, release: "major" },\n  { revert: true, release: "patch" },\n  // Angular\n  { type: "feat", release: "minor" },\n  { type: "fix", release: "patch" },\n  { type: "perf", release: "patch" },\n  // Atom\n  { emoji: ":racehorse:", release: "patch" },\n  { emoji: ":bug:", release: "patch" },\n  { emoji: ":penguin:", release: "patch" },\n  { emoji: ":apple:", release: "patch" },\n  { emoji: ":checkered_flag:", release: "patch" },\n  // Ember\n  { tag: "BUGFIX", release: "patch" },\n  { tag: "FEATURE", release: "minor" },\n  { tag: "SECURITY", release: "patch" },\n  // ESLint\n  { tag: "Breaking", release: "major" },\n  { tag: "Fix", release: "patch" },\n  { tag: "Update", release: "minor" },\n  { tag: "New", release: "minor" },\n  // Express\n  { component: "perf", release: "patch" },\n  { component: "deps", release: "patch" },\n  // JSHint\n  { type: "FEAT", release: "minor" },\n  { type: "FIX", release: "patch" },\n];\n'})}),"\n",(0,a.jsxs)(n.p,{children:["angular \u9810\u8a2d\u7684\u53ea\u6709 ",(0,a.jsx)(n.code,{children:"feat"}),"\u3001",(0,a.jsx)(n.code,{children:"fix"}),"\u3001",(0,a.jsx)(n.code,{children:"perf"})," \u6703\u88ab\u8996\u70ba release \u7684 commit\uff0c\u5982\u679c\u6709\u5176\u4ed6\u7684 commit type \u4e5f\u60f3\u8981\u88ab\u8996\u70ba release \u7684\u8a71\uff0c\u5c31\u53ef\u4ee5\u900f\u904e releaseRules \u4f86\u984d\u5916\u7684\u8a2d\u5b9a\u3002"]}),"\n",(0,a.jsx)(n.admonition,{title:"\u6ce8\u610f\u4e8b\u9805",type:"warning",children:(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\u96d6\u7136 plugin \u6709\u9810\u8a2d 4 \u500b plugin\uff0c\u4f46\u662f\u53ea\u8981\u6709\u65b0\u589e ",(0,a.jsx)(n.code,{children:".releaserc.json"})," \u88e1\u9762\u7684 plugin\uff0c\u5c31\u9700\u8981\u628a\u6240\u6709\u7684 plugin \u90fd\u52a0\u4e0a\u53bb\uff0c\u56e0\u70ba\u65b0\u589e\u7684 plugin \u6b04\u4f4d\u6703\u8986\u84cb\u6389\u9810\u8a2d\u7684 plugin\u3002"]}),"\n",(0,a.jsx)(n.li,{children:"plugin \u7684\u9806\u5e8f\u4e5f\u5f88\u91cd\u8981\uff0c\u56e0\u70ba semantic-release \u6703\u4f9d\u7167 plugin \u7684\u9806\u5e8f\u4f86\u57f7\u884c\u7684\uff0c\u9806\u5e8f\u6703\u662f\ncommit-analyzer -> release-notes-generator -> changelog -> npm/ github / git\u3002"}),"\n"]})}),"\n",(0,a.jsx)(n.h3,{id:"\u8a2d\u5b9a-npm-configuration",children:"\u8a2d\u5b9a npm configuration"}),"\n",(0,a.jsxs)(n.p,{children:["\u5982\u679c\u6709 ",(0,a.jsx)(n.code,{children:".npmrc"})," \u6703\u76f4\u63a5\u8b80\u53d6\u88e1\u9762\u7684\u8a2d\u5b9a\uff0c\u6216\u662f\u53ef\u4ee5\u76f4\u63a5\u5728 ",(0,a.jsx)(n.code,{children:"package.json"})," \u88e1\u9762\u8a2d\u5b9a"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "publishConfig": {\n    "registry": "https://registry.npmjs.org/",\n    "tag": "latest"\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"\u57f7\u884c-semantic-release",children:"\u57f7\u884c semantic-release"}),"\n",(0,a.jsx)(n.p,{children:"\u53ef\u4ee5\u5728 script \u88e1\u9762\u52a0\u4e0a semantic-release \u7684\u6307\u4ee4"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'{\n  "scripts": {\n    "release": "semantic-release"\n  }\n}\n'})}),"\n",(0,a.jsx)(n.p,{children:"\u6216\u662f\u76f4\u63a5\u7528 npx \u57f7\u884c"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"npx semantic-release\n"})}),"\n",(0,a.jsx)(n.p,{children:"\u5982\u679c\u4f60\u76f4\u63a5\u5728\u672c\u5730\u7aef\u57f7\u884c semantic-release\uff0c\u6703\u767c\u73fe\u6709\u4e9b\u6b65\u9a5f\u88ab skip \u6389\uff0c\u56e0\u70ba semantic-release \u5f88\u591a\u6b65\u9a5f\u90fd\u662f\u4f9d\u8cf4\u65bc CI/CD \u53ca\u74b0\u5883\u8b8a\u6578\u4f86\u57f7\u884c\uff0c\u4f8b\u5982\u66f4\u65b0 release note \u5230 github\uff0c\u6216\u662f\u767c\u4f48 npm \u5957\u4ef6\u7b49\u7b49\uff0c\u6240\u4ee5\u5efa\u8b70\u8981\u5728 CI/CD \u4e0a\u57f7\u884c release\u3002"}),"\n",(0,a.jsx)(n.h2,{id:"\u8a2d\u5b9a-cicd",children:"\u8a2d\u5b9a CI/CD"}),"\n",(0,a.jsxs)(n.p,{children:["\u5b98\u7db2\u6709\u63d0\u4f9b\u5404\u5f0f\u7684 ",(0,a.jsx)(n.a,{href:"https://semantic-release.gitbook.io/semantic-release/recipes/ci-configurations",children:"CI configurations"})," \u8a2d\u5b9a\u65b9\u6cd5\uff0c\u9019\u908a\u4ee5 ",(0,a.jsx)(n.strong,{children:"Github Action"})," \u70ba\u4f8b\u3002"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",metastring:'{33-35} title=".github/workflows/release.yml"',children:"name: Release\non:\n  push:\n    branches:\n      - main\n\npermissions:\n  contents: read # for checkout\n\njobs:\n  release:\n    name: Release\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write # to be able to publish a GitHub release\n      issues: write # to be able to comment on released issues\n      pull-requests: write # to be able to comment on released pull requests\n      id-token: write # to enable use of OIDC for npm provenance\n    steps:\n      - name: Checkout\n        uses: actions/checkout@v3\n        with:\n          fetch-depth: 0\n      - name: Setup Node.js\n        uses: actions/setup-node@v3\n        with:\n          node-version: 20\n          cache: npm\n      - name: Install dependencies\n        run: npm install\n      - name: Release\n        env:\n          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}\n          NPM_TOKEN: ${{ secrets.NPM_TOKEN }}\n        run: npx semantic-release\n"})}),"\n",(0,a.jsx)(n.admonition,{title:"\u6ce8\u610f\u4e8b\u9805",type:"warning",children:(0,a.jsx)(n.p,{children:"permissions \u4e00\u5b9a\u8981\u8a2d\u5b9a\uff0c\u624d\u80fd\u5728 Github \u4e0a\u53bb\u767c\u4f48 release note \u53ca\u66f4\u65b0 changelog \u7b49\u5beb\u5165\u6b0a\u9650\u3002"})}),"\n",(0,a.jsx)(n.p,{children:"\u9019\u908a\u6703\u9700\u8981\u5169\u500b\u74b0\u5883\u8b8a\u6578\uff1a"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(i.Z,{children:"GITHUB_TOKEN"}),"\uff1a\u7528\u4f86\u66f4\u65b0 release note \u53ca CHANGELOG.md \u5230\ngithub"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(i.Z,{children:"NPM_TOKEN"}),"\uff1a\u7528\u4f86\u767c\u4f48 npm \u5957\u4ef6"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["GITHUB_TOKEN \u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528 ",(0,a.jsx)(n.code,{children:"secrets.GITHUB_TOKEN"}),"\uff0cGithub \u6703\u81ea\u52d5\u7522\u751f Token\uff0c\u4e0d\u9700\u8981\u984d\u5916\u8a2d\u5b9a\u3002"]}),"\n",(0,a.jsx)(n.p,{children:"NPM_TOKEN \u9700\u8981\u5728 npm \u7684\u7db2\u7ad9\u4e0a\u7522\u751f Classic Tokens\uff0c\u7136\u5f8c\u5728 github \u4e0a\u8a2d\u5b9a\u74b0\u5883\u8b8a\u6578\u3002"}),"\n",(0,a.jsx)(r.E,{src:t}),"\n",(0,a.jsx)(n.h2,{id:"\u53c3\u8003\u8cc7\u6599",children:"\u53c3\u8003\u8cc7\u6599"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://pjchender.dev/devops/devops-publish-npm-0/",children:"\u767c\u4f48 npm \u5957\u4ef6 - \u5f9e\u624b\u52d5\u5230\u81ea\u52d5(0)\uff1a\u5c08\u6848\u8207\u5957\u4ef6\u5efa\u7f6e\u7bc7"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://stackoverflow.com/questions/51621400/what-is-difference-between-release-notes-and-changelog",children:"What is difference between release notes and changelog?"})}),"\n"]})]})}function j(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(g,{...e})}):g(e)}},676:(e,n,s)=>{s.d(n,{Z:()=>l});var a=s(5893);const l=e=>{let{children:n,color:s,block:l}=e,i="";switch(s){case"yellow":default:i="highlight-yellow";break;case"blue":i="highlight-blue";break;case"green":i="highlight-green";break;case"red":i="highlight-red"}return l?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:`${i} highlight`,children:n}),(0,a.jsx)("p",{})]}):(0,a.jsx)("span",{className:`${i} highlight`,children:n})}},5397:(e,n,s)=>{s.d(n,{E:()=>l});s(7294);var a=s(5893);const l=e=>{let{src:n,width:s="100%",center:l=!1,style:i={}}=e;const r={width:`min(100%,${s})`,display:l?"block":"inline-block",margin:l?"0 auto":"0",borderRadius:"5px",...i};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("img",{src:n,style:{...r}}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]})}},1151:(e,n,s)=>{s.d(n,{Z:()=>c,a:()=>r});var a=s(7294);const l={},i=a.createContext(l);function r(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);