"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5671],{962:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>m,contentTitle:()=>d,default:()=>x,frontMatter:()=>l,metadata:()=>u,toc:()=>p});var n=t(5893),r=t(1151),c=t(5397);const i=t.p+"assets/images/getDocList-1-f9996536724f3e95bc9d2eaff171fbc5.png",o=t.p+"assets/images/getDocList-2-e0b960a67aff79f334eac9d4ba0f3376.png",a=t.p+"assets/images/getDocList-3-f84c2ecfb44733f8cbff8449e5f20993.png",l={title:"\u3010Docusaurus\u3011\u5982\u4f55\u81ea\u52d5\u986f\u793a Docusaurus \u6587\u7ae0\u5217\u8868",sidebar_label:"\u5982\u4f55\u81ea\u52d5\u986f\u793a Docusaurus \u6587\u7ae0\u5217\u8868",tags:["Docusaurus","\u6587\u7ae0\u5217\u8868"]},d=void 0,u={id:"Docusaurus/getDocList",title:"\u3010Docusaurus\u3011\u5982\u4f55\u81ea\u52d5\u986f\u793a Docusaurus \u6587\u7ae0\u5217\u8868",description:"\u96d6\u7136 Docusaurus \u6709 Sidebar \u53ef\u4ee5\u5f88\u6e05\u695a\u5730\u627e\u5230\u4f60\u8981\u7684\u6587\u7ae0\uff0c\u4f46\u6211\u5e0c\u671b\u53ef\u4ee5\u5728\u9996\u9801\u770b\u5230\u6700\u65b0\u66f4\u65b0\u7684\u6587\u7ae0\u5217\u8868\uff0c\u4e0d\u904e\u5728 Docusaurus \u6c92\u6709\u5167\u5efa\u7684\u529f\u80fd\u6216 API \u53ef\u4ee5\u986f\u793a\u6240\u6709\u7684\u6587\u7ae0\uff0c\u6240\u4ee5\u9700\u8981\u81ea\u5df1\u505a\u4e00\u500b\u81ea\u52d5\u722c\u87f2\u7684 component\u3002",source:"@site/docs/Docusaurus/getDocList.mdx",sourceDirName:"Docusaurus",slug:"/Docusaurus/getDocList",permalink:"/Docusaurus/getDocList",draft:!1,unlisted:!1,tags:[{label:"Docusaurus",permalink:"/tags/docusaurus"},{label:"\u6587\u7ae0\u5217\u8868",permalink:"/tags/\u6587\u7ae0\u5217\u8868"}],version:"current",lastUpdatedAt:1699945574,formattedLastUpdatedAt:"2023\u5e7411\u670814\u65e5",frontMatter:{title:"\u3010Docusaurus\u3011\u5982\u4f55\u81ea\u52d5\u986f\u793a Docusaurus \u6587\u7ae0\u5217\u8868",sidebar_label:"\u5982\u4f55\u81ea\u52d5\u986f\u793a Docusaurus \u6587\u7ae0\u5217\u8868",tags:["Docusaurus","\u6587\u7ae0\u5217\u8868"]},sidebar:"tutorialSidebar",previous:{title:"\u5728 Docusaurus \u5c0e\u5165 Algolia \u641c\u5c0b",permalink:"/Docusaurus/algolia"},next:{title:"\u5982\u4f55\u5728 docusaurus \u589e\u52a0\u7559\u8a00\u5340",permalink:"/Docusaurus/giscus"}},m={},p=[{value:"\u60f3\u6cd5\u6982\u5ff5",id:"\u60f3\u6cd5\u6982\u5ff5",level:2},{value:"Step1: useDocsSidebar()",id:"step1-usedocssidebar",level:2},{value:"Step2: Promise.all()",id:"step2-promiseall",level:2},{value:"Step3: DOMParser();",id:"step3-domparser",level:2},{value:"Step4: import component",id:"step4-import-component",level:2},{value:"\u984d\u5916\u88dc\u5145",id:"\u984d\u5916\u88dc\u5145",level:2}];function h(e){const s={a:"a",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.p,{children:"\u96d6\u7136 Docusaurus \u6709 Sidebar \u53ef\u4ee5\u5f88\u6e05\u695a\u5730\u627e\u5230\u4f60\u8981\u7684\u6587\u7ae0\uff0c\u4f46\u6211\u5e0c\u671b\u53ef\u4ee5\u5728\u9996\u9801\u770b\u5230\u6700\u65b0\u66f4\u65b0\u7684\u6587\u7ae0\u5217\u8868\uff0c\u4e0d\u904e\u5728 Docusaurus \u6c92\u6709\u5167\u5efa\u7684\u529f\u80fd\u6216 API \u53ef\u4ee5\u986f\u793a\u6240\u6709\u7684\u6587\u7ae0\uff0c\u6240\u4ee5\u9700\u8981\u81ea\u5df1\u505a\u4e00\u500b\u81ea\u52d5\u722c\u87f2\u7684 component\u3002"}),"\n",(0,n.jsx)(s.h2,{id:"\u60f3\u6cd5\u6982\u5ff5",children:"\u60f3\u6cd5\u6982\u5ff5"}),"\n",(0,n.jsxs)(s.p,{children:["\u5728\u627e\u6709\u6c92\u6709\u5b98\u65b9\u63d0\u4f9b\u7684 API \u9054\u5230\u6211\u8981\u7684\u529f\u80fd\u6642\uff0c\u6709\u770b\u5230\u4e00\u500b ",(0,n.jsx)(s.code,{children:"useDocsSidebar()"})," \u7684\u51fd\u5f0f\u53ef\u4ee5\u6293\u51fa sidebar \u7684\u6e05\u55ae\uff0c\u6c7a\u5b9a\u5f9e\u9019\u88e1\u4e0b\u624b\u3002\u518d\u5229\u7528\u88e1\u9762\u63d0\u4f9b\u7684\u5404\u9801\u9762\u7684 url \u53bb\u6293\u7db2\u9801\u7684 HTML\uff0c\u7be9\u9078\u51fa\u6211\u8981\u7684\u8cc7\u6599\u3002"]}),"\n",(0,n.jsx)(s.p,{children:"\u6b65\u9a5f\u5927\u6982\u662f\u9019\u6a23\uff1a"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsxs)(s.li,{children:["\u7528 ",(0,n.jsx)(s.code,{children:"useDocsSidebar()"})," \u6293\u51fa\u6240\u6709\u9801\u9762\u7684 url \u9663\u5217\u3002"]}),"\n",(0,n.jsxs)(s.li,{children:["\u7528 ",(0,n.jsx)(s.code,{children:"Promise.all()"})," \u540c\u6642 fetch \u6240\u6709\u7684\u975c\u614b\u9801\u9762\u6587\u5b57\u6a94\u3002"]}),"\n",(0,n.jsxs)(s.li,{children:["\u4f7f\u7528\u539f\u751f ",(0,n.jsx)(s.code,{children:"DOMParser()"})," \u8f49\u6210 HTML \u683c\u5f0f\uff0c\u4e26\u6293\u53d6\u8cc7\u6599\u3002"]}),"\n",(0,n.jsx)(s.li,{children:"\u6700\u5f8c\u628a component \u5f15\u5165 mdx \u6a94\u3002"}),"\n"]}),"\n",(0,n.jsx)(s.h2,{id:"step1-usedocssidebar",children:"Step1: useDocsSidebar()"}),"\n",(0,n.jsxs)(s.p,{children:["\u5148\u5efa\u4e00\u500b component \u53eb ",(0,n.jsx)(s.code,{children:"DocList"}),"\uff0c\u4f7f\u7528 ",(0,n.jsx)(s.code,{children:"useDocsSidebar()"})," \u53d6\u51fa\u88e1\u9762\u7684 ",(0,n.jsx)(s.strong,{children:"items"}),"\u3002"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-jsx",metastring:"title=DocList.jsx",children:'import { useDocsSidebar } from "@docusaurus/theme-common/internal";\n\nfunction DocList() {\n  const { items } = useDocsSidebar();\n  ...\n}\n'})}),"\n",(0,n.jsx)(s.p,{children:"\u53d6\u51fa\u4f86\u5f8c\u6703\u9577\u9019\u6a23"}),"\n",(0,n.jsx)(c.E,{src:i}),"\n",(0,n.jsx)(s.p,{children:"\u5c31\u662f\u4f60\u7684 Sidebar \u7684\u8cc7\u6599\u7d50\u69cb\uff0c\u9019\u908a\u5982\u679c\u6709\u5f88\u591a\u5c64\u7684\u8a71\u9700\u8981\u4e00\u5c64\u4e00\u5c64\u62c6\u6389\uff0c\u53ef\u4ee5\u7528 lodash \u7684 flatMapDeep \u89e3\u69cb\u3002\u6216\u662f\u50cf\u6211\u4e00\u6a23\u4e0d\u60f3\u88dd\u5957\u4ef6\uff0c\u7528 flatMap \u52a0\u905e\u8ff4\u7684\u65b9\u5f0f\u62c6\u958b\u3002"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-jsx",children:"function formatDocList(items) {\n  return items.flatMap((item) => {\n    if (!item.items) {\n      return {\n        title: item.label,\n        id: item.docId,\n        href: item.href,\n      };\n    } else {\n      return formatDocList(item.items);\n    }\n  });\n}\n"})}),"\n",(0,n.jsx)(s.h2,{id:"step2-promiseall",children:"Step2: Promise.all()"}),"\n",(0,n.jsxs)(s.p,{children:["\u6574\u7406\u5b8c\u5f8c\uff0c\u518d\u6293\u51fa\u4e00\u500b\u53ea\u6709 href \u7684\u9663\u5217\uff0c\u7136\u5f8c\u518d\u7528 ",(0,n.jsx)(s.code,{children:"Promise.all()"})," \u540c\u6642\u767c\u51fa\u8acb\u6c42\u3002"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-jsx",children:"async function fetchDocs(docsList) {\n  const docUrlList = docsList.map(\n    (doc) => `https://jim876633.github.io${doc.href}`\n  );\n\n  const results = await Promise.all(\n    docUrlList.map((url) => fetch(url).then((res) => res.text()))\n  );\n}\n"})}),"\n",(0,n.jsxs)(s.p,{children:["\u56de\u50b3\u7684 ",(0,n.jsx)(s.code,{children:"result"})," \u5c31\u662f\u542b\u6709\u6240\u6709\u9801\u9762 HTML \u6587\u5b57\u7684\u9663\u5217\u3002"]}),"\n",(0,n.jsx)(s.h2,{id:"step3-domparser",children:"Step3: DOMParser();"}),"\n",(0,n.jsxs)(s.p,{children:["\u56e0\u70ba\u6293\u56de\u4f86\u7684\u662f\u6587\u5b57\uff0c\u6bd4\u8f03\u96e3\u53bb\u53d6\u5f97\u60f3\u8981\u7684\u8cc7\u8a0a\uff0c\u6240\u4ee5\u9019\u908a\u7528\u539f\u751f\u7684 ",(0,n.jsx)(s.code,{children:"DOMParser()"})," \u53bb\u5c07\u6587\u5b57\u8f49\u6210 HTML\u3002"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-jsx",children:'results.forEach((data, i) => {\n  // translate to html\n  const parser = new DOMParser();\n  const html = parser.parseFromString(data, "text/html");\n  const body = html.body;\n});\n'})}),"\n",(0,n.jsxs)(s.p,{children:["\u6293\u5230 body \u7684 DOM \u5f8c\uff0c\u5c31\u8981\u4f86\u6293\u6211\u8981\u7684",(0,n.jsx)(s.em,{children:"\u66f4\u65b0\u65e5\u671f"}),"\uff0c\u9019\u908a\u8981\u5148\u5728 ",(0,n.jsx)(s.code,{children:"docusaurus.config.js"})," \u8a2d\u5b9a ",(0,n.jsx)(s.strong,{children:"showLastUpdateTime"}),"\uff0c\u8a73\u7d30\u8cc7\u8a0a\u53ef\u4ee5\u53c3\u8003",(0,n.jsx)(s.a,{href:"https://docusaurus.io/docs/api/plugins/@docusaurus/plugin-content-docs#showLastUpdateTime",children:"\u5b98\u7db2"}),"\uff0c\u9019\u908a\u5c31\u4e0d\u591a\u8d05\u8ff0\u3002"]}),"\n",(0,n.jsxs)(s.p,{children:["\u653e\u66f4\u65b0\u65e5\u671f\u7684 HTML tag \u662f\u4e00\u500b ",(0,n.jsx)(s.code,{children:"<time>...<time/>"})," \u7684\u7d50\u69cb\uff0c\u5b83\u6709\u4e00\u500b ",(0,n.jsx)(s.code,{children:"datetime"})," \u7684 Attribute\uff0c\u88e1\u9762\u653e\u7684\u5c31\u662f\u6211\u8981\u7684\u65e5\u671f\u683c\u5f0f\u3002"]}),"\n",(0,n.jsx)(c.E,{src:o}),"\n",(0,n.jsx)(s.p,{children:"\u518d\u4f86\u7684\u5c31\u53ea\u662f\u628a\u5b83\u53d6\u51fa\u4f86\uff0c\u7136\u5f8c\u5408\u4f75\u5230\u4e4b\u524d\u6574\u7406\u904e\u7684\u7269\u4ef6\u88e1\u3002"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-jsx",metastring:"{8-16} showLineNumbers",children:'const timeStamp = time.getAttribute("datetime");\ndocs[i].timeStamp = new Date(timeStamp).getTime();\n'})}),"\n",(0,n.jsx)(s.h2,{id:"step4-import-component",children:"Step4: import component"}),"\n",(0,n.jsxs)(s.p,{children:["\u6700\u5f8c\u62ff\u5230\u6709\u65e5\u671f\u7684\u7269\u4ef6\u9663\u5217\uff0c\u518d\u7528 ",(0,n.jsx)(s.code,{children:"sort"})," \u53bb\u4f9d\u64da\u65e5\u671f\u6392\u5e8f\uff0c\u7136\u5f8c\u518d import \u5230 .mdx \u6a94\uff08\u8a18\u5f97\u628a .md \u8f49\u6210 .mdx \u624d\u80fd\u5f15\u5165\uff09\u3002"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-jsx",metastring:"title='intro.mdx'",children:'import DocList from "@site/src/components/docList.jsx";\n\n<DocList />;\n'})}),"\n",(0,n.jsx)(s.p,{children:"\u5c31\u53ef\u4ee5\u5728\u9996\u9801\u770b\u5230\u6700\u65b0\u66f4\u65b0\u7684\u6587\u7ae0\u5217\u8868\u4e86 \ud83c\udf89"}),"\n",(0,n.jsx)(c.E,{src:a,width:"500px"}),"\n",(0,n.jsx)(s.h2,{id:"\u984d\u5916\u88dc\u5145",children:"\u984d\u5916\u88dc\u5145"}),"\n",(0,n.jsxs)(s.p,{children:["\u4e0d\u904e\u56e0\u70ba\u662f\u7528 component \u5f15\u5165\uff0c\u6240\u4ee5\u53ea\u8981\u9032\u5165\u5230\u9996\u9801\u5c31\u6703 fetch \u6240\u6709\u6587\u7ae0\u7684\u8cc7\u6599\uff0c\u9019\u6a23\u6548\u80fd\u4e26\u4e0d\u662f\u5f88\u597d\uff0c\u60f3\u512a\u5316\u6548\u80fd\u7684\u53ef\u4ee5\u4f7f\u7528 ",(0,n.jsx)(s.a,{href:"https://tanstack.com/query/latest",children:"TanStack Query"})," \u4f86\u7ba1\u7406 API \u8acb\u6c42\uff0c\u6709\u8208\u8da3\u7684\u53ef\u4ee5\u770b\u6211\u5b8c\u6574\u7684\u7a0b\u5f0f\u78bc\u3002"]})]})}function x(e={}){const{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}},5397:(e,s,t)=>{t.d(s,{E:()=>r});t(7294);var n=t(5893);const r=e=>{let{src:s,width:t="100%",center:r=!1,style:c={}}=e;const i={width:`min(100%,${t})`,display:r?"block":"inline-block",margin:r?"0 auto":"0",borderRadius:"5px",...c};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("img",{src:s,style:{...i}}),(0,n.jsx)("br",{}),(0,n.jsx)("br",{})]})}},1151:(e,s,t)=>{t.d(s,{Z:()=>o,a:()=>i});var n=t(7294);const r={},c=n.createContext(r);function i(e){const s=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),n.createElement(c.Provider,{value:s},e.children)}}}]);